<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.2">Jekyll</generator><link href="http://yourdomain.com/feed.xml" rel="self" type="application/atom+xml" /><link href="http://yourdomain.com/" rel="alternate" type="text/html" /><updated>2024-08-10T06:16:52+00:00</updated><id>http://yourdomain.com/feed.xml</id><title type="html">Your Site Title</title><subtitle>This is an example site description. You can use Markdown here.</subtitle><entry><title type="html">Canada PR application (after provincial nomination)</title><link href="http://yourdomain.com/2024/07/27/canada-pr-application.html" rel="alternate" type="text/html" title="Canada PR application (after provincial nomination)" /><published>2024-07-27T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/07/27/canada-pr-application</id><content type="html" xml:base="http://yourdomain.com/2024/07/27/canada-pr-application.html"><![CDATA[<h2 id="emails">Emails</h2>

<ul>
  <li>
    <p>from PNPInfo@gov.bc.ca</p>

    <p>BC Provincial Nominee Program</p>

    <p>[Mailing Address]</p>

    <p>The attached certificate confirms that you have been nominated for the Provincial Nominee Program. You must apply to Immigration, Refugees and Citizenship Canada (IRCC)  <strong>before the nomination expiry date listed on the certificate.  Please note this is not valid for Express Entry.</strong></p>

    <p>Visit IRCC’s website (<a href="https://www.canada.ca/en/immigration-refugees-citizenship/services/immigrate-canada/provincial-nominees/non-express-entry/apply.html">IRCC Non-Express Entry Provincial Nominee</a>) for instructions and forms for applying for permanent residence for a non-Express Entry nominee.  <strong>IRCC must receive your complete application before the nomination certificate expiry date indicated.</strong></p>

    <p>As a BC PNP Nominee, if you are considering a real estate purchase please review <a href="https://www2.gov.bc.ca/gov/content/taxes/property-taxes/property-transfer-tax/additional-property-transfer-tax#:~:text=B.C. Provincial Nominees">this important information from the Ministry of Finance.</a></p>

    <p>Please refer to our <a href="https://www.welcomebc.ca/immigrate-to-b-c/guides-forms-reports-documents">Post Nomination Guide</a> for further information.</p>

    <p>Please be aware that Immigration, Refugees and Citizenship Canada is responsible for conducting medical, criminal, and security screening processes and only their officers have the authority to make the final determination as to whether you meet the requirements to become a permanent resident.</p>

    <p>Sincerely,</p>

    <p>BC Provincial Nominee Program
Email: PNPInfo@gov.bc.ca
Website: WelcomeBC.ca/PNP</p>

    <p>This communication is intended for the use of the recipient to whom it is addressed, and may contain confidential, personal and/or privileged information. Please contact us immediately if you are not the intended recipient of this communication, and do not copy, distribute, or take action relying on it. A communication received in error, or subsequent reply, should be deleted or destroyed.</p>
  </li>
</ul>

<h2 id="references">References</h2>

<p><a href="https://www.welcomebc.ca/immigrate-to-b-c/bc-pnp-si-post-nomination-guide-pdf">Skills Immigration Post-Nomination Guide (PDF, 1MB)</a></p>

<p><a href="https://www.canada.ca/en/immigration-refugees-citizenship/services/immigrate-canada/provincial-nominees/non-express-entry/apply.html">Application process for non-EE PNP application</a></p>

<h2 id="in-canada-applicants">In-Canada applicants</h2>

<p>IRCC has put in place a <a href="https://www.canada.ca/en/immigration-refugees-citizenship/news/notices/2022-foreign-exempt-ime.html">temporary public policy</a> for immigration medical exams (IMEs) <strong>until October 6, 2024</strong>.</p>

<p>If you completed an IME within 5 years of submitting your new application, include the IME number (or the unique medical identifier number) from your previous exam in your current application.</p>

<p>You may be exempt from completing another IME if you meet <strong>all</strong> of these conditions:</p>

<ul>
  <li>You applied, or are applying, for either permanent residence or temporary residence.</li>
  <li>You already live in Canada.</li>
  <li>You completed your previous IME in the last 5 years.</li>
  <li>Your previous IME indicated a low risk or no risk to public health or public safety.</li>
</ul>

<h2 id="checklist">Checklist</h2>

<p>https://www.canada.ca/en/immigration-refugees-citizenship/services/application/application-forms-guides/guide-p7000-application-permanent-residence-provincial-nominee-class.html</p>

<h3 id="supporting-documents-for-provincial-nominee-program-pnp-required">Supporting Documents for Provincial Nominee Program (PNP) <strong>(required)</strong></h3>

<p>Upload all of the required supporting documents for your immigration program.</p>

<p><strong>Document labelling:</strong></p>

<p>If you have more than one document to upload under any one category, upload each one separately with a unique name (for example: Police_Certificate1, Police_Certificate2, Police_Certificate3).</p>

<ul>
  <li>Use this naming convention to label your documents: “Last Name - First Name – Document type - #.” For example: “Wong - John - Proof of Education -1.”</li>
  <li>Visit the <a href="https://www.canada.ca/en/immigration-refugees-citizenship/services/new-immigrants/pr-card/apply-renew-replace/photo.html">guide(opens in a new browser tab)</a> for permanent resident photos for instructions.</li>
  <li><strong>Accepted file types:</strong> PDF, JPG, JPEG, PNG, DOC, and DOCX</li>
  <li><strong>Accepted file size:</strong> File size should be 4 MB maximum and photos should be 420x540 pixels minimum.</li>
  <li><strong>Accepted characters for file names:</strong> File names can only contain the following characters: “A-Z” “a-z” “0-9” “-“ “_” “.”</li>
</ul>

<ol>
  <li>Travel documents and passports</li>
  <li>Confirmation of nomination
    <ul>
      <li>Sent by PNPInfo@gov.bc.ca</li>
    </ul>
  </li>
  <li>Proof of language proficiency
    <ul>
      <li>Not required for BCPNP-IPG non-EE stream</li>
    </ul>
  </li>
  <li><a href="https://www.canada.ca/en/immigration-refugees-citizenship/services/application/medical-police/police-certificates/about.html">Police certificates and clearances</a>
    <ul>
      <li>Provide clearances for any place you have lived for more than 6 months, excluding Canada.</li>
      <li>Accredited translation if the original copy is not in English.</li>
    </ul>
  </li>
  <li><a href="https://www.canada.ca/en/immigration-refugees-citizenship/services/new-immigrants/pr-card/apply-renew-replace/photo.html">Photos</a></li>
  <li>Birth certificates
    <ul>
      <li>Accredited translation if the original copy is not in English.</li>
    </ul>
  </li>
</ol>

<h2 id="additional-notes">Additional notes</h2>

<h3 id="apply-for-trv-in-canada">Apply for TRV in Canada</h3>

<ul>
  <li><a href="https://www.canada.ca/en/immigration-refugees-citizenship/services/application/account/where-submit-passport.html">mailing instructions after receiving OPR</a></li>
</ul>

<p>If you applied for a new temporary resident visa, or a study or temporary work permit from within Canada you</p>

<ul>
  <li>must <strong>mail us</strong> your passport</li>
  <li>can’t submit your passport in person</li>
</ul>

<p>Read the details in your passport request letter and follow the instructions below.</p>

<p>You should <strong>wait until you have your passport back before booking travel outside Canada</strong>.</p>

<h5 id="mailing-instructions">Mailing instructions</h5>

<ul>
  <li>Send us your passport by mail (Canada Post) or courier. Choose and pay for a mailing service:
    <ul>
      <li>If you’re not using a courier service, we recommend you use Canada Post’s Xpresspost or Priority Post services so you can track your envelopes.</li>
      <li>The mailing service you choose will determine how fast it will take for your passport to be returned to you.</li>
    </ul>
  </li>
  <li>Purchase 2 prepaid envelopes:
    <ul>
      <li>If you live in Ontario or Quebec, purchase <strong>regional envelopes</strong>.</li>
      <li>If you live in another province or territory, purchase <strong>national envelopes</strong>.</li>
    </ul>
  </li>
  <li>Envelope sizes:
    <ul>
      <li>To send us your passport:
        <ul>
          <li>1 letter-size envelope (318 x 241 mm)</li>
        </ul>
      </li>
      <li>For us to mail you back your passport:
        <ul>
          <li>1 standard-size envelope (260 x 159 mm)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Write down the tracking numbers for both envelopes. To track your envelopes with Canada Post or with your courier service:</p>

    <ul>
      <li>Use the tracking number for the letter-size envelope to find out when <strong>we receive your passport at our office</strong>.</li>
      <li>Use the tracking number for the return envelope (standard-size), to find out <strong>when we mail it back to you</strong>.</li>
    </ul>
  </li>
  <li>
    <p>Prepare your package:</p>

    <ul>
      <li>Write your <strong>full</strong> mailing address on the return envelope (standard-size) in the “Deliver to” field.</li>
      <li>In the letter-size envelope, put:
        <ul>
          <li>your passport</li>
          <li>a copy of your passport request letter showing your unique client identifier (UCI) and application numbers</li>
          <li>the return envelope with your address on it</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Mailing addresses</p>

    <div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>Canada Post address
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>  
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>Temporary Resident Visa Section
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>CPC-Ottawa (e-Application)
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>PO Box 9640
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>Ottawa, Ontario
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>K1G 6T2
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>  
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>===============================
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>  
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>Courier address
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>Temporary Resident Visa Section
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>CPC-Ottawa (e-Application)
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>365 Laurier Avenue West
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>Ottawa, Ontario
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>K1A 1L1
</pre></div>
</div>
    </div>
  </li>
</ul>]]></content><author><name></name></author><summary type="html"><![CDATA[Emails]]></summary></entry><entry><title type="html">Angular Notes</title><link href="http://yourdomain.com/2024/07/22/angular-notes.html" rel="alternate" type="text/html" title="Angular Notes" /><published>2024-07-22T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/07/22/angular-notes</id><content type="html" xml:base="http://yourdomain.com/2024/07/22/angular-notes.html"><![CDATA[<h2 id="bindings">Bindings</h2>

<h3 id="interpolation-binding-">Interpolation binding (``)</h3>

<ul>
  <li>cannot interpolate arbitrary javascript commands, instead, calling functions from that component</li>
</ul>

<h3 id="property-binding-">Property binding (<code>[]</code>)</h3>

<h3 id="event-binding-">Event binding (<code>()</code>)</h3>

<div class="language-typescript highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>import {Component} from '@angular/core';
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>@Component({
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>  selector: 'app-root',
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  styleUrls: ['app.component.css'],
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>  template: `
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>  &lt;div&gt;
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    &lt;input type=&quot;text&quot; (change)=&quot;onChange($event)&quot; /&gt;
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    &lt;p&gt;&lt;/p&gt;
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>  &lt;/div&gt;
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>  `,
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  standalone: true,
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>})
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>export class AppComponent {
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>  isEditable:boolean = true;
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>  value: string = &quot;&quot;;
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>  onChange(event: Event): void {
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>    const inputElem = event.target as HTMLInputElement;
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>    this.value = inputElem.value;
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>  }
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>}
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>
</pre></div>
</div>
</div>

<ul>
  <li>
    <p>A list of events</p>

    <h4 id="mouse-events">Mouse Events</h4>

    <ul>
      <li><strong>(click)</strong>: Triggered when an element is clicked.</li>
      <li><strong>(dblclick)</strong>: Triggered when an element is double-clicked.</li>
      <li><strong>(mousedown)</strong>: Triggered when a mouse button is pressed on an element.</li>
      <li><strong>(mouseup)</strong>: Triggered when a mouse button is released over an element.</li>
      <li><strong>(mouseenter)</strong>: Triggered when the mouse pointer enters the element.</li>
      <li><strong>(mouseleave)</strong>: Triggered when the mouse pointer leaves the element.</li>
      <li><strong>(mousemove)</strong>: Triggered when the mouse pointer is moved over the element.</li>
      <li><strong>(mouseover)</strong>: Triggered when the mouse pointer is moved onto the element.</li>
      <li><strong>(mouseout)</strong>: Triggered when the mouse pointer is moved out of the element.</li>
      <li><strong>(contextmenu)</strong>: Triggered when the right mouse button is clicked to open a context menu.</li>
    </ul>

    <h4 id="keyboard-events">Keyboard Events</h4>

    <ul>
      <li><strong>(keydown)</strong>: Triggered when a key is pressed.</li>
      <li><strong>(keypress)</strong>: Triggered when a key is pressed and held.</li>
      <li><strong>(keyup)</strong>: Triggered when a key is released.</li>
    </ul>

    <h4 id="focus-events">Focus Events</h4>

    <ul>
      <li><strong>(focus)</strong>: Triggered when an element gains focus.</li>
      <li><strong>(blur)</strong>: Triggered when an element loses focus.</li>
    </ul>

    <h4 id="form-events">Form Events</h4>

    <ul>
      <li><strong>(input)</strong>: Triggered when the value of an input element changes.</li>
      <li><strong>(change)</strong>: Triggered when the value of an input element changes and the element loses focus.</li>
      <li><strong>(submit)</strong>: Triggered when a form is submitted.</li>
      <li><strong>(reset)</strong>: Triggered when a form is reset.</li>
    </ul>

    <h4 id="drag-and-drop-events">Drag and Drop Events</h4>

    <ul>
      <li><strong>(drag)</strong>: Triggered when an element is being dragged.</li>
      <li><strong>(dragstart)</strong>: Triggered when the user starts dragging an element.</li>
      <li><strong>(dragend)</strong>: Triggered when the user stops dragging an element.</li>
      <li><strong>(dragenter)</strong>: Triggered when a dragged element enters a drop target.</li>
      <li><strong>(dragleave)</strong>: Triggered when a dragged element leaves a drop target.</li>
      <li><strong>(dragover)</strong>: Triggered when an element is being dragged over a drop target.</li>
      <li><strong>(drop)</strong>: Triggered when a dragged element is dropped on a drop target.</li>
    </ul>

    <h4 id="clipboard-events">Clipboard Events</h4>

    <ul>
      <li><strong>(copy)</strong>: Triggered when content is copied to the clipboard.</li>
      <li><strong>(cut)</strong>: Triggered when content is cut to the clipboard.</li>
      <li><strong>(paste)</strong>: Triggered when content is pasted from the clipboard.</li>
    </ul>

    <h4 id="touch-events">Touch Events</h4>

    <ul>
      <li><strong>(touchstart)</strong>: Triggered when a touch point is placed on the touch surface.</li>
      <li><strong>(touchmove)</strong>: Triggered when a touch point is moved along the touch surface.</li>
      <li><strong>(touchend)</strong>: Triggered when a touch point is removed from the touch surface.</li>
      <li><strong>(touchcancel)</strong>: Triggered when a touch event is interrupted.</li>
    </ul>

    <h4 id="miscellaneous-events">Miscellaneous Events</h4>

    <ul>
      <li><strong>(scroll)</strong>: Triggered when the user scrolls an element.</li>
      <li><strong>(resize)</strong>: Triggered when the window is resized.</li>
      <li><strong>(error)</strong>: Triggered when an error occurs.</li>
      <li><strong>(load)</strong>: Triggered when an element or resource finishes loading.</li>
      <li><strong>(unload)</strong>: Triggered when the document or a resource is being unloaded.</li>
    </ul>

    <h4 id="custom-events">Custom Events</h4>

    <ul>
      <li><strong>(ngModelChange)</strong>: Triggered when the value of a form control bound with <code>[(ngModel)]</code> changes.</li>
    </ul>
  </li>
</ul>

<h3 id="two-way-data-binding----use-formsmodule-to-handle-form-value-changes">Two-way data binding (<code>[()]</code>) - use <code>FormsModule</code> to handle form value changes</h3>

<div class="language-typescript highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>import {Component} from '@angular/core';
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>import {FormsModule} from '@angular/forms';
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>@Component({
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  selector: 'app-root',
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>  styleUrls: ['app.component.css'],
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>  template: `
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>  &lt;div&gt;
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    &lt;input type=&quot;text&quot; [(ngModel)]=&quot;value&quot; /&gt;
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>    &lt;p&gt;&lt;/p&gt;
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>  &lt;/div&gt;
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  `,
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>  standalone: true,
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>  imports: [FormsModule]
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>})
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>export class AppComponent {
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>  isEditable:boolean = true;
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>  value: string = &quot;&quot;;
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>  onChange(event: Event): void {
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>    const inputElem = event.target as HTMLInputElement;
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>    this.value = inputElem.value;
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>  }
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>}
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>
</pre></div>
</div>
</div>

<h2 id="component-communication">Component communication</h2>

<h3 id="input"><code>@Input</code></h3>

<p>For receiving values from other components.</p>

<h3 id="output"><code>@Output</code></h3>

<p>For notifying other components that a event has happened.</p>

<p>child component - output an event emitter for emitting a string - emitter can be treated as a source of event, like (change), (click) and others.</p>

<div class="language-typescript highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>import {Component, Output, EventEmitter} from '@angular/core';
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>@Component({
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>  selector: 'app-child',
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  styles: `.btn { padding: 5px; }`,
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>  template: `
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    &lt;button class=&quot;btn&quot; (click)=&quot;addItem()&quot;&gt;Add Item&lt;/button&gt;
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>  `,
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  standalone: true,
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>})
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>export class ChildComponent {
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  @Output() addItemEvent = new EventEmitter&lt;string&gt;();
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>  addItem() {
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>    this.addItemEvent.emit('🐢');
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>  }
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>}
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>
</pre></div>
</div>
</div>

<p>parent component - use an emitter from child component as an event binding to handle events.</p>

<div class="language-typescript highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>import {Component} from '@angular/core';
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>import {ChildComponent} from './child.component';
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>@Component({
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  selector: 'app-root',
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>  template: `
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    &lt;app-child (addItemEvent)=&quot;addItem($event)&quot; /&gt;
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    &lt;p&gt;🐢 all the way down &lt;/p&gt;
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  `,
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>  standalone: true,
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>  imports: [ChildComponent],
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>})
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>export class AppComponent {
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>  items = new Array();
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>  addItem(item: string) {
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    this.items.push(item);
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>  }
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>}
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>
</pre></div>
</div>
</div>]]></content><author><name></name></author><summary type="html"><![CDATA[Bindings]]></summary></entry><entry><title type="html">Configure a TypeScript project with CI/CD</title><link href="http://yourdomain.com/2024/07/16/configure-a-ts-project.html" rel="alternate" type="text/html" title="Configure a TypeScript project with CI/CD" /><published>2024-07-16T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/07/16/configure-a-ts-project</id><content type="html" xml:base="http://yourdomain.com/2024/07/16/configure-a-ts-project.html"><![CDATA[<blockquote>
  <p>[!NOTE]</p>

  <p>The project to be configured:</p>

  <table>
    <thead>
      <tr>
        <th> </th>
        <th>Value</th>
        <th>Note</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td> </td>
        <td>multi-stage-cd</td>
        <td> </td>
      </tr>
      <tr>
        <td> </td>
        <td> </td>
        <td> </td>
      </tr>
      <tr>
        <td> </td>
        <td> </td>
        <td> </td>
      </tr>
    </tbody>
  </table>

</blockquote>

<h2 id="initialize-the-project">Initialize the project</h2>

<ol>
  <li>
    <p>Make the directory</p>

    <div class="language-bash highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>mkdir multi-stage-cd
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>cd multi-stage-cd
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>Initialize git repo</p>

    <div class="language-bash highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>git init
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>Install typescript and node env for ts</p>

    <div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>npm install typescript ts-node @types/node --save-dev
</pre></div>
</div>
    </div>

    <p>(<code>--save-dev</code> flag indicates that the packages are necessary for development purposes.)</p>
  </li>
  <li>
    <p>Configure <code>.gitignore</code> to prevent packages being added to git repo</p>

    <div class="language-bash highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>echo &quot;node_modules/*&quot; &gt; .gitignore
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>Initalize ts project</p>

    <div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>tsc --init
</pre></div>
</div>
    </div>
  </li>
</ol>

<h2 id="configure-jest-test-env">Configure Jest test env</h2>

<ol>
  <li>
    <p>Install jest</p>

    <div class="language-bash highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>npm install jest ts-jest @types/jest --save-dev
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>Configure jest</p>

    <div class="language-bash highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>npx ts-jest config:init
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>Modify <code>tsconfig.json</code></p>

    <div class="language-json highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>{
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>  <span class="key"><span class="delimiter">&quot;</span><span class="content">compilerOptions</span><span class="delimiter">&quot;</span></span>: {
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>    <span class="key"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ES6</span><span class="delimiter">&quot;</span></span>,
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>    <span class="key"><span class="delimiter">&quot;</span><span class="content">module</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">commonjs</span><span class="delimiter">&quot;</span></span>,
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>    <span class="key"><span class="delimiter">&quot;</span><span class="content">strict</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>    <span class="key"><span class="delimiter">&quot;</span><span class="content">esModuleInterop</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    <span class="key"><span class="delimiter">&quot;</span><span class="content">outDir</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./dist</span><span class="delimiter">&quot;</span></span>,
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    <span class="key"><span class="delimiter">&quot;</span><span class="content">rootDir</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./src</span><span class="delimiter">&quot;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  },
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>  <span class="key"><span class="delimiter">&quot;</span><span class="content">include</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">src/**/*.ts</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">tests/**/*.ts</span><span class="delimiter">&quot;</span></span>],
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>  <span class="key"><span class="delimiter">&quot;</span><span class="content">exclude</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">node_modules</span><span class="delimiter">&quot;</span></span>]
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>}
</pre></div>
</div>
    </div>
  </li>
</ol>]]></content><author><name></name></author><summary type="html"><![CDATA[[!NOTE] The project to be configured:   Value Note   multi-stage-cd              ]]></summary></entry><entry><title type="html">AZ-500 notes</title><link href="http://yourdomain.com/2024/07/09/azure-500-notes.html" rel="alternate" type="text/html" title="AZ-500 notes" /><published>2024-07-09T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/07/09/azure-500-notes</id><content type="html" xml:base="http://yourdomain.com/2024/07/09/azure-500-notes.html"><![CDATA[<h2 id="manage-identity-and-access">Manage identity and access</h2>

<h3 id="groups">Groups</h3>

<h4 id="memberships">Memberships</h4>

<ul>
  <li>Assigned - manually assigned</li>
  <li>Dynamic user - automatically assigned by user’s attributes</li>
  <li>Dynamic device: automatically assigned on devices by attributes</li>
</ul>

<p><img src="https://learn.microsoft.com/en-ca/training/wwl-azure/manage-identities-microsoft-entra-id/media/microsoft-entra-identity-access-management-4ca9b9bc.png" alt="Diagram showing how access management in Microsoft Entra ID works." /></p>

<h4 id="assignments">Assignments</h4>

<ul>
  <li>Direct assignmnet</li>
  <li>Group assignment - Entra group to the resource, automatically gives all of the group members access to the resource</li>
  <li>Rule-based assignment</li>
  <li>External authority assignment - assigns a group to provide access to the resource and then the external source manages the group members</li>
</ul>

<h2 id="key-points-to-master">Key Points to Master</h2>

<h4 id="oauth2">OAuth2</h4>

<ul>
  <li>Understand the different grant types and their use cases.</li>
  <li>Learn how to implement the OAuth2 flow in client and server applications.</li>
  <li>Know how to secure and manage access tokens.</li>
  <li>Familiarize yourself with common OAuth2 libraries and tools.</li>
</ul>

<h4 id="oidc">OIDC</h4>

<ul>
  <li>Understand how OIDC builds on OAuth2 to provide identity verification.</li>
  <li>Learn the structure and usage of ID tokens.</li>
  <li>Implement OIDC in client applications to obtain user identity information.</li>
  <li>Understand the security considerations and best practices.</li>
</ul>

<h4 id="saml">SAML</h4>

<ul>
  <li>Understand the SAML assertion and its components.</li>
  <li>Learn how to configure and manage identity providers and service providers.</li>
  <li>Familiarize yourself with SSO implementations using SAML.</li>
  <li>Understand the security considerations and best practices.</li>
</ul>

<h4 id="entra-id">Entra ID</h4>

<ul>
  <li>Learn how to register and manage applications in Entra ID.</li>
  <li>Understand how to configure Entra ID for OAuth2, OIDC, and SAML.</li>
  <li>Know how to use Entra ID for user authentication and authorization in various applications.</li>
  <li>Understand the security features and best practices for Entra ID.</li>
</ul>]]></content><author><name></name></author><summary type="html"><![CDATA[Manage identity and access]]></summary></entry><entry><title type="html">Leetcode Notes</title><link href="http://yourdomain.com/2024/07/09/leetcode-notes.html" rel="alternate" type="text/html" title="Leetcode Notes" /><published>2024-07-09T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/07/09/leetcode-notes</id><content type="html" xml:base="http://yourdomain.com/2024/07/09/leetcode-notes.html"><![CDATA[<h2 id="1701-average-waiting-time">1701. Average waiting time</h2>

<p>A restaurant with single chef,</p>

<p>customers[i] = [arrival_i, time_i]</p>

<p>Chef prepares food for customers in the order they were given in the input.</p>

<p>return the average waitiing time of all customers</p>

<p>this question can be modelled as a non-preemptive single process at a time scheduling model.</p>

<p>Intuitative solution (in Python3):</p>

<div class="language-python3 highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>class Solution:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    def averageWaitingTime(self, customers: List[List[int]]) -&gt; float:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        # FCFS scheduling
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        customers[0].append(customers[0][0] + customers[0][1])
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        total_wait_time = customers[0][1]
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        for i in range(1, len(customers)):
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>            prev_customer = customers[i-1]
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>            customer = customers[i]
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            if customer[0] &lt; prev_customer[-1]:
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>                customer.append(prev_customer[-1] + customer[1])
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            else:
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>                customer.append(customer[0]+customer[1])
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>            total_wait_time += customer[2] - customer[0]
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>            
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>        
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>        return total_wait_time/len(customers)
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>            
</pre></div>
</div>
</div>

<p>Java Tips:</p>

<div class="language-java highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="comment">// to initialize an array with the length of an existing array arr</span>
<span class="line-numbers"><a href="#n2" name="n2">2</a></span><span class="type">int</span> newArr<span class="type">[]</span> = <span class="keyword">new</span> <span class="type">int</span>[arr.length];
</pre></div>
</div>
</div>

<p>Optimized:</p>

<ul>
  <li>it is not necessary to save all the finish times of each customer</li>
  <li>in the line <code>total_wait_time += customer[2] - customer[0]</code> , we just need to save the finish time of the previous customer, use a variable to iterate</li>
</ul>

<div class="language-java highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="type">class</span> <span class="class">Solution</span> {
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="directive">public</span> <span class="type">double</span> averageWaitingTime(<span class="type">int</span><span class="type">[]</span><span class="type">[]</span> customers) {
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        <span class="comment">// finish time of the prev customer</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        <span class="type">int</span> ft = <span class="integer">0</span>;
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        <span class="type">double</span> allWaitingTime = <span class="integer">0</span>;
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="integer">0</span>; i&lt;customers.length; i++) {
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>            <span class="comment">// current customer arrived later than the prev customer ends</span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>            <span class="keyword">if</span> (customers[i][<span class="integer">0</span>] &gt; ft) {
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>                ft = customers[i][<span class="integer">0</span>] + customers[i][<span class="integer">1</span>];
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            } 
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>            <span class="comment">// current customer arrived no later than the prev customer ends</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            <span class="keyword">else</span> {
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>                ft = ft + customers[i][<span class="integer">1</span>];
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            }
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>            allWaitingTime += ft-customers[i][<span class="integer">0</span>];
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>        }
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>        <span class="keyword">return</span> allWaitingTime/customers.length;       
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>    }
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>}
</pre></div>
</div>
</div>

<h2 id="1598-crawler-log-folder">1598. Crawler log folder</h2>

<p>A very easy question…</p>

<div class="language-Java highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="type">class</span> <span class="class">Solution</span> {
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="directive">public</span> <span class="type">int</span> minOperations(<span class="predefined-type">String</span><span class="type">[]</span> logs) {
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        <span class="type">int</span> layer = <span class="integer">0</span>;
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="integer">0</span>; i&lt;logs.length; i++) {
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>            <span class="keyword">if</span>(logs[i].equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">../</span><span class="delimiter">&quot;</span></span>)) {
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>                layer = <span class="predefined-type">Math</span>.max(<span class="integer">0</span>, layer-<span class="integer">1</span>);
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>            }
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>            <span class="keyword">else</span> <span class="keyword">if</span> (logs[i].equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">./</span><span class="delimiter">&quot;</span></span>)) {
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>                <span class="comment">// no action - current dir</span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            } <span class="keyword">else</span> {
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>                layer++;
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            }
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        }
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>        <span class="keyword">return</span> layer;
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    }
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>}
</pre></div>
</div>
</div>

<h2 id="1717-maximum-score-from-removing-substrings">1717. Maximum score from removing substrings</h2>

<p><strong>Preservation of Opportunities</strong>:</p>

<ul>
  <li>Removing higher-scoring pairs first does not diminish the opportunity to remove lower-scoring pairs later. For instance, after all “ba” pairs are removed from the string, it still contains “ab” pairs if they existed initially.</li>
  <li>If we reverse this order, i.e., remove lower-scoring pairs first, we might miss out on higher-scoring pairs that could have been formed by the initial configuration of the string.</li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">maximumGain</span>(<span class="predefined-constant">self</span>, s: <span class="predefined">str</span>, x: <span class="predefined">int</span>, y: <span class="predefined">int</span>) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        <span class="comment"># intuitive - recursion and search</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        ab = <span class="string"><span class="delimiter">&quot;</span><span class="content">ab</span><span class="delimiter">&quot;</span></span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        ba = <span class="string"><span class="delimiter">&quot;</span><span class="content">ba</span><span class="delimiter">&quot;</span></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>        first = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        second = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        maxxy = <span class="predefined">max</span>(x,y)
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>        minxy = <span class="predefined">min</span>(x,y)
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        <span class="keyword">if</span> x&gt;y:
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>            first = ab
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            second = ba
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>        <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>            first = ba
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>            second = ab
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>        st = []
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>        it = <span class="integer">0</span>
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        score = <span class="integer">0</span>
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>        <span class="keyword">while</span> it &lt; <span class="predefined">len</span>(s):
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>            curr = s[it]
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>            it += <span class="integer">1</span>
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>            <span class="keyword">if</span> <span class="predefined">len</span>(st) == <span class="integer">0</span>:
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>                st.append(curr)
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>                <span class="keyword">continue</span>
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>                
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>            prev = st[-<span class="integer">1</span>]
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>            
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>            <span class="keyword">if</span> prev+curr == first:
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>                score += maxxy
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>                st.pop()
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>            <span class="keyword">else</span>:
<span class="line-numbers"><strong><a href="#n40" name="n40">40</a></strong></span>                st.append(curr)
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>            
<span class="line-numbers"><a href="#n42" name="n42">42</a></span>           
<span class="line-numbers"><a href="#n43" name="n43">43</a></span>        
<span class="line-numbers"><a href="#n44" name="n44">44</a></span>        s = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>.join(st)
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>        st = []
<span class="line-numbers"><a href="#n46" name="n46">46</a></span>
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>        it = <span class="integer">0</span>
<span class="line-numbers"><a href="#n48" name="n48">48</a></span>
<span class="line-numbers"><a href="#n49" name="n49">49</a></span>        <span class="keyword">while</span> it &lt; <span class="predefined">len</span>(s):
<span class="line-numbers"><strong><a href="#n50" name="n50">50</a></strong></span>            curr = s[it]
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>            it += <span class="integer">1</span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>            <span class="keyword">if</span> <span class="predefined">len</span>(st) == <span class="integer">0</span>:
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>                st.append(curr)
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>                <span class="keyword">continue</span>
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>                
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>            prev = st[-<span class="integer">1</span>]
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>            
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>            <span class="keyword">if</span> prev+curr == second:
<span class="line-numbers"><strong><a href="#n60" name="n60">60</a></strong></span>                score += minxy
<span class="line-numbers"><a href="#n61" name="n61">61</a></span>                st.pop()
<span class="line-numbers"><a href="#n62" name="n62">62</a></span>
<span class="line-numbers"><a href="#n63" name="n63">63</a></span>            <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n64" name="n64">64</a></span>                st.append(curr)
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>            
<span class="line-numbers"><a href="#n66" name="n66">66</a></span>            
<span class="line-numbers"><a href="#n67" name="n67">67</a></span>        
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>
<span class="line-numbers"><a href="#n69" name="n69">69</a></span>        <span class="keyword">return</span> score
<span class="line-numbers"><strong><a href="#n70" name="n70">70</a></strong></span>                
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>        
<span class="line-numbers"><a href="#n72" name="n72">72</a></span>
<span class="line-numbers"><a href="#n73" name="n73">73</a></span>        
</pre></div>
</div>
</div>

<h2 id="1530-number-of-good-leaf-node-pairs">1530. Number of good leaf node pairs</h2>

<ul>
  <li>use BFS - “distance” indicates that we need to search for pairs layer by layer</li>
  <li>construct a graph is necessary since we need to search bidirectionally – than tree having one-way references</li>
  <li>when searching in each layer, use the length of the queue as the number of nodes of this layer</li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="comment"># Definition for a binary tree node.</span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span class="comment"># class TreeNode:</span>
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span><span class="comment">#         self.val = val</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span><span class="comment">#         self.left = left</span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span><span class="comment">#         self.right = right</span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    <span class="keyword">def</span> <span class="function">_traverse_tree</span>(<span class="predefined-constant">self</span>, curr_node: TreeNode, prev_node: TreeNode, graph: <span class="predefined">dict</span>, leaf_nodes: <span class="predefined">set</span>):
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        <span class="keyword">if</span> curr_node <span class="keyword">is</span> <span class="predefined-constant">None</span>:
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            <span class="keyword">return</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>        <span class="keyword">if</span> curr_node.left <span class="keyword">is</span> <span class="predefined-constant">None</span> <span class="keyword">and</span> curr_node.right <span class="keyword">is</span> <span class="predefined-constant">None</span>:
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            leaf_nodes.add(curr_node)
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>        <span class="keyword">if</span> prev_node <span class="keyword">is</span> <span class="keyword">not</span> <span class="predefined-constant">None</span>:
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>            <span class="keyword">if</span> prev_node <span class="keyword">not</span> <span class="keyword">in</span> graph:
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>                graph[prev_node] = []
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>            graph[prev_node].append(curr_node)
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>            <span class="keyword">if</span> curr_node <span class="keyword">not</span> <span class="keyword">in</span> graph:
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>                graph[curr_node] = []
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>            graph[curr_node].append(prev_node)
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>        <span class="predefined-constant">self</span>._traverse_tree(curr_node.left, curr_node, graph, leaf_nodes)
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>        <span class="predefined-constant">self</span>._traverse_tree(curr_node.right, curr_node, graph, leaf_nodes)
<span class="line-numbers"><a href="#n26" name="n26">26</a></span> 
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>    <span class="keyword">def</span> <span class="function">countPairs</span>(<span class="predefined-constant">self</span>, root: TreeNode, distance: <span class="predefined">int</span>) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>        graph = {}
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>        leaf_nodes = <span class="predefined">set</span>()
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>        <span class="predefined-constant">self</span>._traverse_tree(root, <span class="predefined-constant">None</span>, graph, leaf_nodes)
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>        count = <span class="integer">0</span>
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>        <span class="comment"># begin of DFS</span>
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>        <span class="keyword">for</span> leaf <span class="keyword">in</span> leaf_nodes:
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>            queue = []
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>            seen = <span class="predefined">set</span>()
<span class="line-numbers"><strong><a href="#n40" name="n40">40</a></strong></span>            queue.append(leaf)
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>            seen.add(leaf)
<span class="line-numbers"><a href="#n42" name="n42">42</a></span>
<span class="line-numbers"><a href="#n43" name="n43">43</a></span>            <span class="comment"># visiting all nodes, start from the leaf node (distance is 0 at this time)</span>
<span class="line-numbers"><a href="#n44" name="n44">44</a></span>            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(distance+<span class="integer">1</span>):
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>                size = <span class="predefined">len</span>(queue)
<span class="line-numbers"><a href="#n46" name="n46">46</a></span>                <span class="comment">#print(f&quot;leaf:{leaf.val}, distance:{i}, size:{size}&quot;)</span>
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>                <span class="comment"># nodes of this distance</span>
<span class="line-numbers"><a href="#n48" name="n48">48</a></span>                <span class="comment"># visit all nodes of i distance</span>
<span class="line-numbers"><a href="#n49" name="n49">49</a></span>                <span class="comment"># add all nodes of i+1 distance</span>
<span class="line-numbers"><strong><a href="#n50" name="n50">50</a></strong></span>                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(size):
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>                    curr_node = queue.pop(<span class="integer">0</span>) <span class="comment"># bfs -- queue -&gt; popleft</span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>                    <span class="keyword">if</span> curr_node <span class="keyword">in</span> leaf_nodes <span class="keyword">and</span> curr_node != leaf:
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>                        count += <span class="integer">1</span> <span class="comment"># a satisfied leaf node has been visited</span>
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>                    <span class="keyword">if</span> curr_node <span class="keyword">in</span> graph:
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>                        <span class="keyword">for</span> _ <span class="keyword">in</span> graph[curr_node]:
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>                            <span class="keyword">if</span> _ <span class="keyword">not</span> <span class="keyword">in</span> seen:
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>                                queue.append(_)
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>                                seen.add(_)
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>        
<span class="line-numbers"><strong><a href="#n60" name="n60">60</a></strong></span>        <span class="keyword">return</span> count//<span class="integer">2</span>
<span class="line-numbers"><a href="#n61" name="n61">61</a></span>
</pre></div>
</div>
</div>

<h2 id="1380-lucky-numbers-in-a-matrix">1380. Lucky numbers in a matrix</h2>

<ul>
  <li>
    <p>Since matrix contains distinct numbers – we just need to get two sets, one is max values in cols and another is min values in rows.</p>
  </li>
  <li>
    <p>The intersection of this two sets is the answer.</p>

    <p>Proof that there is only one lucky numbers in a matrix – proof by contradicary</p>

    <ul>
      <li>
        <p>suppose that in a matrix, if two lucky numbers, X and Y exist</p>

        <div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>a b X c
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>d Y e f
</pre></div>
</div>
        </div>
      </li>
      <li>
        <p>since X is a lucky number - min of the row and max of the col: X &lt; b and X &gt; e</p>

        <ul>
          <li>in an axis:   —-e—-X—-b—-</li>
        </ul>
      </li>
      <li>
        <p>Y is also a lucky number: Y &lt; e and Y &gt; b</p>

        <ul>
          <li>in the above axis: –Y?—e—X—b—Y?—</li>
        </ul>
      </li>
      <li>
        <p>a contradiction arise - hence, only one lucky number can exist.</p>
      </li>
    </ul>
  </li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">luckyNumbers</span> (<span class="predefined-constant">self</span>, matrix: List[List[<span class="predefined">int</span>]]) -&gt; List[<span class="predefined">int</span>]:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        col_maxs = <span class="predefined">set</span>()
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        row_mins = <span class="predefined">set</span>()
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(matrix)):
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>            row_mins.add(<span class="predefined">min</span>(matrix[i]))
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>        
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        m_T = <span class="predefined">list</span>(<span class="predefined">zip</span>(*matrix))
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(m_T)):
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            col_maxs.add(<span class="predefined">max</span>(m_T[i]))
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        <span class="docstring"><span class="delimiter">&quot;&quot;&quot;</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span><span class="docstring"><span class="content"></span><span class="content">        for i in range(len(matrix[0])):</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n15" name="n15">15</a></span><span class="docstring"><span class="content"></span><span class="content">            col_max = -1</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span><span class="docstring"><span class="content"></span><span class="content">            for j in range(len(matrix)):</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span><span class="docstring"><span class="content"></span><span class="content">                elem = matrix[j][i]</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n18" name="n18">18</a></span><span class="docstring"><span class="content"></span><span class="content">                if elem &gt; col_max:</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span><span class="docstring"><span class="content"></span><span class="content">                    col_max = elem</span><span class="content"></span></span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span><span class="docstring"><span class="content"></span><span class="content">        </span><span class="content"></span></span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span><span class="docstring"><span class="content"></span><span class="content">            col_maxs.add(col_max)</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span><span class="docstring"><span class="content"></span><span class="content">        </span><span class="delimiter">&quot;&quot;&quot;</span></span>
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>        <span class="docstring"><span class="delimiter">&quot;&quot;&quot;</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n25" name="n25">25</a></span><span class="docstring"><span class="content"></span><span class="content">        class Solution:</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n26" name="n26">26</a></span><span class="docstring"><span class="content"></span><span class="content">            def luckyNumbers (self, matrix: List[List[int]]) -&gt; List[int]:</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n27" name="n27">27</a></span><span class="docstring"><span class="content"></span><span class="content">                return set(map(min,matrix)) &amp; set(map(max,zip(*matrix)))</span><span class="content"></span></span>
<span class="line-numbers"><a href="#n28" name="n28">28</a></span><span class="docstring"><span class="content"></span><span class="content">        </span><span class="delimiter">&quot;&quot;&quot;</span></span>
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>        <span class="keyword">return</span> <span class="predefined">list</span>(col_maxs.intersection(row_mins))
</pre></div>
</div>
</div>

<h2 id="912-sort-an-array---onlogn-complexity">912. Sort an array - o(nlogn) complexity</h2>

<ul>
  <li>
    <p>although quicksort is an optimized sorting algorithm, however in worst case, it takes o(n^2) times.</p>

    <ul>
      <li>
        <p>quicksort</p>

        <ul>
          <li>quicksort() and partiton()</li>
          <li>use index i to label the position that all elem before index i is less than the pivot.</li>
        </ul>

        <div class="language-java highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="type">class</span> <span class="class">Solution</span> {
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="directive">public</span> <span class="type">int</span><span class="type">[]</span> sortArray(<span class="type">int</span><span class="type">[]</span> nums) {
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        quicksort(nums, <span class="integer">0</span>, nums.length-<span class="integer">1</span>);
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>    
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        <span class="keyword">return</span> nums;
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>    }
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    <span class="directive">private</span> <span class="directive">static</span> <span class="type">void</span> quicksort(<span class="type">int</span><span class="type">[]</span> nums, <span class="type">int</span> low, <span class="type">int</span> high) {
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="keyword">if</span> (low &lt; high) {
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            <span class="type">int</span> partitionIndex = partition(nums, low, high);
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>    
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>            quicksort(nums, low, partitionIndex-<span class="integer">1</span>);
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            quicksort(nums, partitionIndex+<span class="integer">1</span>, high);
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        }
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>    }
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>    
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    <span class="directive">private</span> <span class="directive">static</span> <span class="type">int</span> partition(<span class="type">int</span><span class="type">[]</span> nums, <span class="type">int</span> low, <span class="type">int</span> high) {
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>        <span class="type">int</span> pivot = nums[high];
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>    
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>        <span class="type">int</span> i = (low-<span class="integer">1</span>);
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>    
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>    
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        <span class="keyword">for</span>(<span class="type">int</span> j=low; j&lt;= high; j++) {
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>            <span class="keyword">if</span> (nums[j] &lt;= pivot) {
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>                i++;
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>    
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>                <span class="comment">// all elements before index at i is less than the pivot</span>
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>                <span class="comment">// therefore, if elem at j is less than the pivot</span>
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>                <span class="comment">// swap elem at j with elem at i</span>
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>                <span class="comment">// in special circumstance - low...j is all less than the pivot, the swapping swaps the element by itself</span>
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>                <span class="type">int</span> temp = nums[i];
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>                nums[i] = nums[j];
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>                nums[j] = temp;
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>            }
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>        }
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>    
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>        <span class="keyword">return</span> i;
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>    }
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>}
</pre></div>
</div>
        </div>
      </li>
    </ul>
  </li>
</ul>

<h2 id="2418-sort-the-people">2418. Sort the people</h2>

<ul>
  <li>easy solution - “distinct value in heights” - create a map mapping height to name, then sort the keys (heights), output the names in the sorted order.</li>
  <li>Or, sorting manually with quicksort.</li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">sortPeople</span>(<span class="predefined-constant">self</span>, names: List[<span class="predefined">str</span>], heights: List[<span class="predefined">int</span>]) -&gt; List[<span class="predefined">str</span>]:
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>        height_dict = {h:n <span class="keyword">for</span> h, n <span class="keyword">in</span> <span class="predefined">zip</span>(heights, names)}
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>        sorted_keys = <span class="predefined">sorted</span>(<span class="predefined">list</span>(k <span class="keyword">for</span> k <span class="keyword">in</span> height_dict.keys()), reverse=<span class="predefined-constant">True</span>)
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>        
<span class="line-numbers"><a href="#n7" name="n7">7</a></span>        <span class="keyword">return</span> [height_dict[height] <span class="keyword">for</span> height <span class="keyword">in</span> sorted_keys]
</pre></div>
</div>
</div>

<h2 id="1636-sort-array-by-increasing-frequency">1636. Sort array by increasing frequency</h2>

<ul>
  <li>
    <p>Count the frequency for each number into pairs</p>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="comment"># initial attempt</span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>    <span class="keyword">def</span> <span class="function">frequencySort</span>(<span class="predefined-constant">self</span>, nums: List[<span class="predefined">int</span>]) -&gt; List[<span class="predefined">int</span>]:
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        reversedlookup = {}
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        n_min = -<span class="integer">100</span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        n_max = <span class="integer">100</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>  
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        frequency = [<span class="integer">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="predefined">range</span>(n_min, n_max+<span class="integer">1</span>)]
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>          
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>        <span class="keyword">for</span> num <span class="keyword">in</span> nums:
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>            frequency[num-n_min] += <span class="integer">1</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>          
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(frequency)):
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            num = i+n_min
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>            freq = frequency[i]
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>            <span class="keyword">if</span> freq &gt; <span class="integer">0</span>:
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>                <span class="keyword">if</span> freq <span class="keyword">in</span> reversedlookup:
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>                    reversedlookup[freq].append(num)
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>                <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>                    reversedlookup[freq] = [num]
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>          
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        result = []
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>        sorted_keys = <span class="predefined">sorted</span>(reversedlookup.keys())
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>          
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>        <span class="keyword">for</span> k <span class="keyword">in</span> sorted_keys:
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>            <span class="keyword">for</span> elem <span class="keyword">in</span> <span class="predefined">sorted</span>(reversedlookup[k], reverse=<span class="predefined-constant">True</span>):
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(k):
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>                    result.append(elem)
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>          
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>  
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>        <span class="keyword">return</span> result
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>Sort the frequency by key</p>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">frequencySort</span>(<span class="predefined-constant">self</span>, nums: List[<span class="predefined">int</span>]) -&gt; List[<span class="predefined">int</span>]:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        freq = {}
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>  
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        <span class="keyword">for</span> n <span class="keyword">in</span> nums:
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>            <span class="keyword">if</span> n <span class="keyword">in</span> freq:
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>                freq[n] += <span class="integer">1</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>            <span class="keyword">else</span>:
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>                freq[n] = <span class="integer">1</span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>          
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>        result = <span class="predefined">sorted</span>(nums, key = <span class="keyword">lambda</span> x: (freq[x], -x)) <span class="comment"># by the frequency first, if they have the same frequency, sort the numbers in decreasing order</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        <span class="keyword">return</span> result
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>              
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>  
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>          
</pre></div>
</div>
    </div>
  </li>
</ul>

<h2 id="2058-find-the-minimum-and-maximum-number-of-nodes-between-critical-points"><a href="https://leetcode.com/problems/find-the-minimum-and-maximum-number-of-nodes-between-critical-points/">2058. Find the Minimum and Maximum Number of Nodes Between Critical Points</a></h2>

<h2 id="2191-sort-the-jumbled-numbers">2191. Sort the jumbled numbers</h2>

<ul>
  <li>design a key that jumbles numbers.</li>
  <li>use sorted to sort <code>nums</code> using that key</li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">convert</span>(<span class="predefined-constant">self</span>, mapping, num):
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        <span class="keyword">if</span> num == <span class="integer">0</span>:
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>            <span class="keyword">return</span> mapping[<span class="integer">0</span>]
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        val = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        i = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="keyword">while</span> num != <span class="integer">0</span>:
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            digit = num % <span class="integer">10</span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            num = num//<span class="integer">10</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>            val += mapping[digit] * <span class="integer">10</span>**i
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            i+=<span class="integer">1</span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>        <span class="keyword">return</span> val
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>    <span class="keyword">def</span> <span class="function">sortJumbled</span>(<span class="predefined-constant">self</span>, mapping: List[<span class="predefined">int</span>], nums: List[<span class="predefined">int</span>]) -&gt; List[<span class="predefined">int</span>]:
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>        
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>        <span class="keyword">return</span> <span class="predefined">sorted</span>(nums, key=<span class="keyword">lambda</span> x: <span class="predefined-constant">self</span>.convert(mapping, x))
</pre></div>
</div>
</div>

<h2 id="164-maximum-gap">164. Maximum gap</h2>

<ul>
  <li>
    <p>Vanilla approach - sort then count</p>

    <ul>
      <li>
        <p>however this violates the restriction that you must write an algorithm that runs in <strong>linear time</strong> and uses <strong>linear extra space</strong>.</p>

        <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">maximumGap</span>(<span class="predefined-constant">self</span>, nums: List[<span class="predefined">int</span>]) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        <span class="keyword">if</span> <span class="predefined">len</span>(nums) &lt; <span class="integer">2</span>:
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>            <span class="keyword">return</span> <span class="integer">0</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>    
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        max_gap = -<span class="integer">1</span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        sorted_nums = <span class="predefined">sorted</span>(nums)
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(sorted_nums)-<span class="integer">1</span>):
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            curr_n = sorted_nums[i]
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            next_n = sorted_nums[i+<span class="integer">1</span>]
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>    
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            max_gap = <span class="predefined">max</span>(next_n-curr_n, max_gap)
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>            
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>        <span class="keyword">return</span> max_gap
</pre></div>
</div>
        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Hence we can consider bucket sort - where we compare the gap between adjacent buckets</p>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">maximumGap</span>(<span class="predefined-constant">self</span>, nums: List[<span class="predefined">int</span>]) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        low, high, n = <span class="predefined">min</span>(nums), <span class="predefined">max</span>(nums), <span class="predefined">len</span>(nums)
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>  
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        <span class="keyword">if</span> n &lt;= <span class="integer">2</span> <span class="keyword">or</span> high == low: <span class="keyword">return</span> high - low
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>  
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        buckets = defaultdict(<span class="predefined">list</span>)
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>  
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="keyword">for</span> num <span class="keyword">in</span> nums:
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            bucket_index = n-<span class="integer">2</span> <span class="keyword">if</span> num == high <span class="keyword">else</span> ((num - low)*(n-<span class="integer">1</span>))//(high-low) <span class="comment"># the index of the bucket</span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            buckets[bucket_index].append(num)
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>          
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        candidates = [[<span class="predefined">min</span>(buckets[i]), <span class="predefined">max</span>(buckets[i])] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n-<span class="integer">1</span>) <span class="keyword">if</span> buckets[i]]
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>  
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>        max_gap = -<span class="integer">1</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>        <span class="comment">#for k in buckets.keys():</span>
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>            <span class="comment">#print(k, buckets[k])</span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(candidates)-<span class="integer">1</span>):
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>            <span class="comment"># min: next bucket #max: curr bucket</span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>            max_gap = <span class="predefined">max</span>(max_gap, candidates[i+<span class="integer">1</span>][<span class="integer">0</span>] - candidates[i][<span class="integer">1</span>])
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>          
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        <span class="keyword">return</span> max_gap
</pre></div>
</div>
    </div>
  </li>
</ul>

<h2 id="1334-find-the-city-with-the-smallest-number-of-neighbors-at-a-threshold-distance">1334. Find the city with the smallest number of neighbors at a threshold distance</h2>

<ul>
  <li>
    <p>BFS won’t suffice for this question! – it can only visit a node once but there will be circumstance that two paths using the same node.</p>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">findTheCity</span>(<span class="predefined-constant">self</span>, n: <span class="predefined">int</span>, edges: List[List[<span class="predefined">int</span>]], distanceThreshold: <span class="predefined">int</span>) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        <span class="comment"># solution - BFS with threshold cut</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>          
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>      
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        graph = {}
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        candidates = []
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>        <span class="comment"># notes: init the graph map first, in case there may have city with no neighbour -- wont be added to keys when building the graph</span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="keyword">for</span> city_no <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            graph[city_no] = []
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            candidates.append([city_no, <span class="integer">0</span>])
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        <span class="keyword">for</span> edge <span class="keyword">in</span> edges:
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>            node_0 = edge[<span class="integer">0</span>]
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            node_1 = edge[<span class="integer">1</span>]
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>            distance = edge[<span class="integer">2</span>]
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>              
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>            <span class="keyword">if</span> node_0 <span class="keyword">in</span> graph:
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>                graph[node_0].append([node_1, distance])
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>            <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>                graph[node_0] = [[node_1, distance]]
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>  
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>            <span class="keyword">if</span> node_1 <span class="keyword">in</span> graph:
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>                graph[node_1].append([node_0, distance])
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>            <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>                graph[node_1] = [[node_0, distance]]
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>              
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>        print(graph)
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>  
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>        <span class="keyword">for</span> node <span class="keyword">in</span> graph:
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>            queue = []
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>            visited = <span class="predefined">set</span>()
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>              
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>            queue.append([node, <span class="integer">0</span>, <span class="integer">0</span>])
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>                        <span class="comment"># node, accumulated distance, city_visited</span>
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>  
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>            most_city_visited = -<span class="integer">1</span>
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>              
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>            <span class="keyword">while</span> (<span class="predefined">len</span>(queue) &gt; <span class="integer">0</span>):
<span class="line-numbers"><strong><a href="#n40" name="n40">40</a></strong></span>                curr = queue.pop(<span class="integer">0</span>)
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>                city = curr[<span class="integer">0</span>]
<span class="line-numbers"><a href="#n42" name="n42">42</a></span>                <span class="keyword">if</span> city <span class="keyword">in</span> visited:
<span class="line-numbers"><a href="#n43" name="n43">43</a></span>                    <span class="keyword">continue</span>
<span class="line-numbers"><a href="#n44" name="n44">44</a></span>                  
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>                acc_dist = curr[<span class="integer">1</span>]
<span class="line-numbers"><a href="#n46" name="n46">46</a></span>                  
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>                <span class="keyword">if</span> acc_dist &gt; distanceThreshold:
<span class="line-numbers"><a href="#n48" name="n48">48</a></span>                    <span class="keyword">continue</span>
<span class="line-numbers"><a href="#n49" name="n49">49</a></span>  
<span class="line-numbers"><strong><a href="#n50" name="n50">50</a></strong></span>                visited.add(city)
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>                most_city_visited += <span class="integer">1</span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>                city_visited = curr[<span class="integer">2</span>]
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>  
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>                print(<span class="string"><span class="delimiter">&quot;</span><span class="content">startcity</span><span class="delimiter">&quot;</span></span>, node, <span class="string"><span class="delimiter">&quot;</span><span class="content">visiting</span><span class="delimiter">&quot;</span></span>, city, <span class="string"><span class="delimiter">&quot;</span><span class="content">city_visited</span><span class="delimiter">&quot;</span></span>, most_city_visited, <span class="string"><span class="delimiter">'</span><span class="content">acc_dist</span><span class="delimiter">'</span></span>, acc_dist)
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>                  
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>                <span class="keyword">for</span> edge <span class="keyword">in</span> graph[city]:
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>                    neighbour = edge[<span class="integer">0</span>]
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>                    distance = edge[<span class="integer">1</span>]+acc_dist
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>                    <span class="keyword">if</span> neighbour <span class="keyword">not</span> <span class="keyword">in</span> visited:
<span class="line-numbers"><strong><a href="#n60" name="n60">60</a></strong></span>                        queue.append([neighbour, distance, city_visited+<span class="integer">1</span>])
<span class="line-numbers"><a href="#n61" name="n61">61</a></span>              
<span class="line-numbers"><a href="#n62" name="n62">62</a></span>            candidates[node] = [node, most_city_visited]
<span class="line-numbers"><a href="#n63" name="n63">63</a></span>          
<span class="line-numbers"><a href="#n64" name="n64">64</a></span>          
<span class="line-numbers"><a href="#n65" name="n65">65</a></span>                                                                  <span class="comment">#dsc city_visited #asc city_no</span>
<span class="line-numbers"><a href="#n66" name="n66">66</a></span>        sorted_by_name = <span class="predefined">list</span>(<span class="predefined">sorted</span>(candidates, key=<span class="keyword">lambda</span> pair: [pair[<span class="integer">1</span>], -pair[<span class="integer">0</span>]]))
<span class="line-numbers"><a href="#n67" name="n67">67</a></span>        print(sorted_by_name)
<span class="line-numbers"><a href="#n68" name="n68">68</a></span>  
<span class="line-numbers"><a href="#n69" name="n69">69</a></span>        <span class="keyword">return</span> sorted_by_name[<span class="integer">0</span>][<span class="integer">0</span>]
<span class="line-numbers"><strong><a href="#n70" name="n70">70</a></strong></span>  
<span class="line-numbers"><a href="#n71" name="n71">71</a></span>          
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>The best solution should be using the Floyd-Warshall algorithm</p>

    <ul>
      <li>with $O(n^3)$ time complexity and $O(n^2)$ space complexity.</li>
    </ul>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">findTheCity</span>(<span class="predefined-constant">self</span>, n: <span class="predefined">int</span>, edges: List[List[<span class="predefined">int</span>]], distanceThreshold: <span class="predefined">int</span>) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        <span class="comment"># large value to represent inf</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        INF = <span class="predefined">int</span>(<span class="float">1e9</span>+<span class="integer">7</span>)
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>          
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        distance_matrix = [[INF] * n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="predefined">range</span>(n)]
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>  
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>            distance_matrix[i][i] = <span class="integer">0</span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>  
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>        <span class="keyword">for</span> start, end, weight <span class="keyword">in</span> edges:
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>            distance_matrix[start][end] = weight
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            distance_matrix[end][start] = weight
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>  
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>        <span class="predefined-constant">self</span>.floyd(n, distance_matrix)
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>  
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>        <span class="keyword">return</span> <span class="predefined-constant">self</span>.get_city_with_fewest_reachable(n, distance_matrix, distanceThreshold)
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>  
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>                <span class="comment"># a n^3 algorithm</span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>    <span class="keyword">def</span> <span class="function">floyd</span>(<span class="predefined-constant">self</span>, n, distance_matrix):
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>                    <span class="comment"># compare the distance of previous path and the path passing by node k</span>
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>                    distance_matrix[i][j] = <span class="predefined">min</span>(
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>                        distance_matrix[i][j],
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>                        distance_matrix[i][k] + distance_matrix[k][j]
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>                    )
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>          
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>      
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>    <span class="keyword">def</span> <span class="function">get_city_with_fewest_reachable</span>(<span class="predefined-constant">self</span>, n, distance_matrix, distanceThreshold):
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>        fewest_city_id = -<span class="integer">1</span>
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>        fewest_reachable_cities = n+<span class="integer">1</span>
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>        <span class="keyword">for</span> start_city <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>            count = <span class="integer">0</span>
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>            <span class="keyword">for</span> dest_city <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>                <span class="keyword">if</span> start_city != dest_city <span class="keyword">and</span> distance_matrix[start_city][dest_city] &lt;= distanceThreshold:
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>                    count += <span class="integer">1</span>
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>              
<span class="line-numbers"><strong><a href="#n40" name="n40">40</a></strong></span>            <span class="keyword">if</span> count &lt;= fewest_reachable_cities:
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>                fewest_reachable_cities = count
<span class="line-numbers"><a href="#n42" name="n42">42</a></span>                fewest_city_id = start_city
<span class="line-numbers"><a href="#n43" name="n43">43</a></span>          
<span class="line-numbers"><a href="#n44" name="n44">44</a></span>  
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>        <span class="keyword">return</span> fewest_city_id
</pre></div>
</div>
    </div>
  </li>
</ul>

<h2 id="2976-minimum-cost-to-convert-string-i">2976. Minimum cost to convert string I</h2>

<ul>
  <li>actually it is a application of searching the shortest path between each two nodes in a graph</li>
  <li>the tuple <code>(original, changed, cost)</code> describes the edges in the graph
    <ul>
      <li>need to notice that: there may exist indices <code>i</code>, <code>j</code> such that <code>original[j] == original[i]</code> and <code>changed[j] == changed[i]</code>.</li>
    </ul>
  </li>
  <li>it is possibly that one letter cannot reach another letter through exchanges, so <em>If it is impossible to convert</em> <code>source</code> <em>to</em> <code>target</code>, <em>return</em> <code>-1</code>.</li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="comment"># consider using floyd-warshall</span>
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>    <span class="keyword">def</span> <span class="function">minimumCost</span>(<span class="predefined-constant">self</span>, source: <span class="predefined">str</span>, target: <span class="predefined">str</span>, original: List[<span class="predefined">str</span>], changed: List[<span class="predefined">str</span>], cost: List[<span class="predefined">int</span>]) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        <span class="predefined-constant">self</span>.INF = <span class="integer">10</span>**<span class="integer">9</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        alphabet_lookup, alphabet_matrix = <span class="predefined-constant">self</span>.floyd(source ,target, original, changed, cost)
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        print(alphabet_lookup, alphabet_matrix)
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        cost = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(source)):
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            source_a = source[i]
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            target_a = target[i]
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            source_index = alphabet_lookup[source_a]
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>            target_index = alphabet_lookup[target_a]
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>            change_cost = alphabet_matrix[source_index][target_index]
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>            
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>            <span class="keyword">if</span> change_cost == <span class="predefined-constant">self</span>.INF:
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>                cost = -<span class="integer">1</span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>                <span class="keyword">break</span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>            cost += change_cost
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>        <span class="keyword">return</span> cost
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>        
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>    <span class="keyword">def</span> <span class="function">floyd</span>(<span class="predefined-constant">self</span>, source, target, original, changed, cost):
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>        alphabet_original = <span class="predefined">set</span>(original)
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>        alphabet_change = <span class="predefined">set</span>(changed)
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>        alphabet_source = <span class="predefined">set</span>(source)
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>        alphabet_target = <span class="predefined">set</span>(target)
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>        alphabet = <span class="predefined">list</span>(alphabet_original.union(alphabet_change, alphabet_source, alphabet_target))
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>        
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>        lookup = {}
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(alphabet)):
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>            lookup[alphabet[i]] = i
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>        
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>
<span class="line-numbers"><strong><a href="#n40" name="n40">40</a></strong></span>
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>        alphabet_matrix = [[<span class="predefined-constant">self</span>.INF <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(alphabet))] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(alphabet)) ]
<span class="line-numbers"><a href="#n42" name="n42">42</a></span>        
<span class="line-numbers"><a href="#n43" name="n43">43</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(alphabet)):
<span class="line-numbers"><a href="#n44" name="n44">44</a></span>            alphabet_matrix[i][i] = <span class="integer">0</span>
<span class="line-numbers"><a href="#n45" name="n45">45</a></span>
<span class="line-numbers"><a href="#n46" name="n46">46</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(cost)):
<span class="line-numbers"><a href="#n47" name="n47">47</a></span>            from_index = lookup[original[i]]
<span class="line-numbers"><a href="#n48" name="n48">48</a></span>            to_index = lookup[changed[i]]
<span class="line-numbers"><a href="#n49" name="n49">49</a></span>            
<span class="line-numbers"><strong><a href="#n50" name="n50">50</a></strong></span>            alphabet_matrix[from_index][to_index] = <span class="predefined">min</span>(cost[i], alphabet_matrix[from_index][to_index])
<span class="line-numbers"><a href="#n51" name="n51">51</a></span>            <span class="comment"># to avoid cases as: Note that there may exist indices i, j such that original[j] == original[i] and changed[j] == changed[i].</span>
<span class="line-numbers"><a href="#n52" name="n52">52</a></span>        
<span class="line-numbers"><a href="#n53" name="n53">53</a></span>        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(alphabet)):
<span class="line-numbers"><a href="#n54" name="n54">54</a></span>            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(alphabet)):
<span class="line-numbers"><a href="#n55" name="n55">55</a></span>                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(alphabet)):
<span class="line-numbers"><a href="#n56" name="n56">56</a></span>                    alphabet_matrix[i][j] = <span class="predefined">min</span>(
<span class="line-numbers"><a href="#n57" name="n57">57</a></span>                        alphabet_matrix[i][j],
<span class="line-numbers"><a href="#n58" name="n58">58</a></span>                        alphabet_matrix[i][k] + alphabet_matrix[k][j]
<span class="line-numbers"><a href="#n59" name="n59">59</a></span>                    )
<span class="line-numbers"><strong><a href="#n60" name="n60">60</a></strong></span>
<span class="line-numbers"><a href="#n61" name="n61">61</a></span>
<span class="line-numbers"><a href="#n62" name="n62">62</a></span>        <span class="keyword">return</span> lookup, alphabet_matrix
</pre></div>
</div>
</div>

<h2 id="2134-minimum-swaps-to-group-all-1s-together-ii">2134. Minimum swaps to group all 1’s together II</h2>

<ul>
  <li>use suffix sum</li>
</ul>

<h2 id="3243-shortest-distance-after-road-addition-queries-i">3243. Shortest distance after road addition queries I</h2>

<ul>
  <li>
    <p>Floyd-warshall will exceed the time limit</p>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">shortestDistanceAfterQueries</span>(<span class="predefined-constant">self</span>, n: <span class="predefined">int</span>, queries: List[List[<span class="predefined">int</span>]]) -&gt; List[<span class="predefined">int</span>]:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>          
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        INF = <span class="integer">10000</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        distances = [[INF <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n)] <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(n)]
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>          
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>            distances[i][i] = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>              
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n-<span class="integer">1</span>):
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            distances[i][i+<span class="integer">1</span>] = <span class="integer">1</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>              
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        <span class="comment"># build the initial graph</span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(i+<span class="integer">1</span>, n):
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>                distances[i][j] = j-i
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>          
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>        ans = []
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>  
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>          
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>        <span class="comment"># adding routes</span>
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>        <span class="keyword">for</span> query <span class="keyword">in</span> queries:
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>            u, v = query
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>            distances[u][v] = <span class="integer">1</span>
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>              
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>            <span class="keyword">for</span> k <span class="keyword">in</span> [u,v]:
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>                    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(i+<span class="integer">1</span>, n):
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>                        dist_i_j = distances[i][j]
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>                        dist_i_k_j = distances[i][k] + distances[k][j]
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>                        distances[i][j] = <span class="predefined">min</span>(dist_i_j, dist_i_k_j)
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>              
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>              
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>            <span class="comment">#count current min distance</span>
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>            ans.append(distances[<span class="integer">0</span>][n-<span class="integer">1</span>])
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>          
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>        <span class="keyword">return</span> ans
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>          
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>Using Dijkstra with priority queue (heap queue):</p>
    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">shortestDistanceAfterQueries</span>(<span class="predefined-constant">self</span>, n: <span class="predefined">int</span>, queries: List[List[<span class="predefined">int</span>]]) -&gt; List[<span class="predefined">int</span>]:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        graph = {i: [] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n)}
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n-<span class="integer">1</span>):
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>            graph[i].append((i+<span class="integer">1</span>, <span class="integer">1</span>))
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>          
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        results = []
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>  
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        <span class="keyword">def</span> <span class="function">dijkstra</span>(graph, start, end):
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            distances = {node: <span class="predefined">float</span>(<span class="string"><span class="delimiter">'</span><span class="content">infinity</span><span class="delimiter">'</span></span>) <span class="keyword">for</span> node <span class="keyword">in</span> <span class="predefined">range</span>(n)}
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            distances[start] = <span class="integer">0</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>            priority_queue = [(<span class="integer">0</span>, start)]
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>              
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>            <span class="keyword">while</span> priority_queue:
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>                current_distance, current_node = heapq.heappop(priority_queue)
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>                <span class="comment"># the current_distance is greater than the known shortest distance between start and c_node</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>                <span class="keyword">if</span> current_distance &gt; distances[current_node]:
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>                    <span class="keyword">continue</span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>                  
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>                <span class="keyword">for</span> neighbor, weight <span class="keyword">in</span> graph[current_node]:
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>                    distance = current_distance + weight
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>                    <span class="keyword">if</span> distance &lt; distances[neighbor]:
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>                        distances[neighbor] = distance
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>                        heapq.heappush(priority_queue, (distance, neighbor))
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>              
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>            <span class="keyword">return</span> distances[end]
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>          
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>        <span class="keyword">for</span> u, v <span class="keyword">in</span> queries:
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>            graph[u].append((v, <span class="integer">1</span>))
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>            shortest_path_length = dijkstra(graph, <span class="integer">0</span>, n-<span class="integer">1</span>)
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>            results.append(shortest_path_length)
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>          
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>        <span class="keyword">return</span> results
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>              
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>      
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>          
</pre></div>
</div>
    </div>
  </li>
</ul>

<h2 id="2053-kth-distinct-string-in-an-array">2053. Kth distinct string in an array</h2>

<ul>
  <li>We can organize two sets, one is distinct string set and another is duplicated string set. (set is unordered)</li>
  <li>To find the kth distinct string, we need to follow the order of the original array. We can iterate over the original array and check if each string is in the distinct string set, and use a counter to count the number of distinct string we’ve seen.</li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">kthDistinct</span>(<span class="predefined-constant">self</span>, arr: List[<span class="predefined">str</span>], k: <span class="predefined">int</span>) -&gt; <span class="predefined">str</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        dist_s = <span class="predefined">set</span>()
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        dup_s = <span class="predefined">set</span>()
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        <span class="keyword">for</span> s <span class="keyword">in</span> arr:
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>            <span class="keyword">if</span> s <span class="keyword">in</span> dup_s:
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>                <span class="keyword">continue</span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>            <span class="keyword">if</span> s <span class="keyword">in</span> dist_s:
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>                dist_s.remove(s)
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>                dup_s.add(s)
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>                dist_s.add(s)
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>        
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>        n = <span class="integer">0</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>        <span class="keyword">for</span> s <span class="keyword">in</span> arr:
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>            <span class="keyword">if</span> s <span class="keyword">in</span> dist_s:
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>                n+=<span class="integer">1</span>
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>            
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>            <span class="keyword">if</span> n==k:
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>                <span class="keyword">return</span> s
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>        
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
</pre></div>
</div>
</div>

<h2 id="1460-make-two-arrays-equal-by-reversing-subarrays">1460. Make two arrays equal by reversing subarrays</h2>

<ul>
  <li>
    <p>Think of swapping two adjacent elements – the same as reversing a subarray with length of 2.</p>
  </li>
  <li>
    <p>Therefore, as long as two arrays have the amount of elements, they can be adjusted to be equal.</p>
  </li>
  <li>
    <p>Hence, either we count the elements in two arrays, or we sort them to see if the two arrays are the same after sorting.</p>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="comment"># count the elements</span>
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>    <span class="keyword">def</span> <span class="function">canBeEqual</span>(<span class="predefined-constant">self</span>, target: List[<span class="predefined">int</span>], arr: List[<span class="predefined">int</span>]) -&gt; <span class="predefined">bool</span>:
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>          
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        target_map = {}
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        arr_map = {}
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>  
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>        <span class="keyword">for</span> num <span class="keyword">in</span> arr:
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>            <span class="keyword">if</span> num <span class="keyword">in</span> arr_map:
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>                arr_map[num] += <span class="integer">1</span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>                arr_map[num] = <span class="integer">1</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>          
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        <span class="keyword">for</span> num <span class="keyword">in</span> target:
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            <span class="keyword">if</span> num <span class="keyword">in</span> target_map:
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>                target_map[num] += <span class="integer">1</span>
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>            <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>                target_map[num] = <span class="integer">1</span>
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>          
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>        <span class="keyword">for</span> key <span class="keyword">in</span> arr_map.keys():
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>            <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> target_map.keys():
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>                <span class="keyword">return</span> <span class="predefined-constant">False</span>
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>              
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>            <span class="keyword">if</span> arr_map[key] != target_map[key]:
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>                <span class="keyword">return</span> <span class="predefined-constant">False</span>
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>          
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>        <span class="keyword">return</span> <span class="predefined-constant">True</span>
</pre></div>
</div>
    </div>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">canBeEqual</span>(<span class="predefined-constant">self</span>, target: List[<span class="predefined">int</span>], arr: List[<span class="predefined">int</span>]) -&gt; <span class="predefined">bool</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>          
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        <span class="keyword">if</span> <span class="predefined">len</span>(target) != <span class="predefined">len</span>(arr):
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>            <span class="keyword">return</span> <span class="predefined-constant">False</span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>  
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>        arr_sorted = <span class="predefined">sorted</span>(arr)
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>        target_sorted = <span class="predefined">sorted</span>(target)
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>  
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="predefined">len</span>(arr_sorted)):
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            <span class="keyword">if</span> arr_sorted[i] != target_sorted[i]:
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>                <span class="keyword">return</span> <span class="predefined-constant">False</span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>  
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        <span class="keyword">return</span> <span class="predefined-constant">True</span>
</pre></div>
</div>
    </div>
  </li>
</ul>

<h2 id="1508-range-sum-of-sorted-subarray-sums">1508. Range sum of sorted subarray sums</h2>

<ul>
  <li>
    <p>Use two for-loops to iterate all the ranges, then, sort the array fo subarray sums, get the sum of the sorted array with given indexes.</p>

    <ul>
      <li>this is a brute force solution with $O(n^2 \cdot \log n)$ time complexity – since the solution is sorting an array with $n^2$ elements, at best it need $O(n^2 \cdot \log n^2) = O(n^2 \cdot 2 \log n) = O(n^2 \cdot \log n)$ time.</li>
    </ul>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">rangeSum</span>(<span class="predefined-constant">self</span>, nums: List[<span class="predefined">int</span>], n: <span class="predefined">int</span>, left: <span class="predefined">int</span>, right: <span class="predefined">int</span>) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        subsums = []
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>  
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>            subsum = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(i, n):
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>                subsum += nums[j]
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>                subsums.append(subsum)
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>          
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>        _sorted = <span class="predefined">sorted</span>(subsums)
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        <span class="keyword">return</span> <span class="predefined">sum</span>(_sorted[left-<span class="integer">1</span>: right]) % (<span class="integer">10</span>**<span class="integer">9</span> + <span class="integer">7</span>)
</pre></div>
</div>
    </div>
  </li>
  <li>
    <p>Alternatively, we can use a priority queue to maintain the order of subarray sums.</p>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">rangeSum</span>(<span class="predefined-constant">self</span>, nums: List[<span class="predefined">int</span>], n: <span class="predefined">int</span>, left: <span class="predefined">int</span>, right: <span class="predefined">int</span>) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        pq = []
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>  
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(n):
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>            heapq.heappush(pq, (nums[i], i))
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>          
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>        ans = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>        mod = <span class="float">1e9</span>+<span class="integer">7</span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>  
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>        print(pq)
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="integer">1</span>, right+<span class="integer">1</span>):
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>            p = heapq.heappop(pq)
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>            <span class="keyword">if</span> i &gt;= left:
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>                ans = (ans + p[<span class="integer">0</span>]) % mod
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>              
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>            <span class="keyword">if</span> p[<span class="integer">1</span>] &lt; n-<span class="integer">1</span>:
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>                p = (p[<span class="integer">0</span>] + nums[p[<span class="integer">1</span>]+<span class="integer">1</span>], p[<span class="integer">1</span>]+<span class="integer">1</span>)
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>                heapq.heappush(pq, p)
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>          
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>        <span class="keyword">return</span> <span class="predefined">int</span>(ans)
</pre></div>
</div>
    </div>

    <ul>
      <li>
        <p>Java, using <code>PriorityQueue</code></p>

        <div class="language-java highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="type">class</span> <span class="class">Solution</span> {
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="directive">public</span> <span class="type">int</span> rangeSum(<span class="type">int</span><span class="type">[]</span> nums, <span class="type">int</span> n, <span class="type">int</span> left, <span class="type">int</span> right) {
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        <span class="predefined-type">PriorityQueue</span>&lt;<span class="type">int</span><span class="type">[]</span>&gt; pq = <span class="keyword">new</span> <span class="predefined-type">PriorityQueue</span>&lt;&gt;(
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>            <span class="keyword">new</span> <span class="predefined-type">Comparator</span>&lt;<span class="type">int</span><span class="type">[]</span>&gt;() {
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>                <span class="annotation">@Override</span>
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>                <span class="directive">public</span> <span class="type">int</span> compare(<span class="type">int</span><span class="type">[]</span> o1, <span class="type">int</span><span class="type">[]</span> o2) {
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>                    <span class="keyword">return</span> o1[<span class="integer">0</span>]-o2[<span class="integer">0</span>];
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>                }
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>            }
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        );
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>    
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="integer">0</span>; i&lt;n; i++) {
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>            pq.offer(<span class="keyword">new</span> <span class="type">int</span><span class="type">[]</span> {nums[i], i});
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        } 
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>    
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>        <span class="type">int</span> mod = <span class="integer">1000000007</span>;
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>        <span class="type">int</span> ans = <span class="integer">0</span>;
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="integer">1</span>; i&lt;right+<span class="integer">1</span>; i++) {
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>            <span class="type">int</span><span class="type">[]</span> top = pq.poll();
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>                
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>            <span class="keyword">if</span> (i &gt;= left) {
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>                ans = (ans + top[<span class="integer">0</span>]) % mod;
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>            }
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>    
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>            <span class="keyword">if</span> (top[<span class="integer">1</span>] &lt; n-<span class="integer">1</span>) {
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>                pq.offer(<span class="keyword">new</span> <span class="type">int</span><span class="type">[]</span> {top[<span class="integer">0</span>]+ nums[top[<span class="integer">1</span>]+<span class="integer">1</span>], top[<span class="integer">1</span>]+<span class="integer">1</span>});
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>            }
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>        }
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>    
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>        <span class="keyword">return</span> ans;
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>    
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>    }
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>}
</pre></div>
</div>
        </div>

        <ul>
          <li><code>pq.offer()</code> – add a new element into the priority queue</li>
          <li><code>pq.poll()</code> – pop the top of the priority queue</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="3016-minimum-number-to-pushes-to-type-word-ii">3016. Minimum number to pushes to type word II</h2>

<ul>
  <li>Count the frequency of each character in the word.</li>
  <li>Sort the items in the frequency map in descending order, then get the key press times for each character by <code>math.ceil(ch_freq/numpad_n)</code> (prioritize high-frequency characters in the keypad, once reached the number of total available keys, characters are placed in the second, third, … place of a key – we don’t have to assign them just need to count them).</li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">minimumPushes</span>(<span class="predefined-constant">self</span>, word: <span class="predefined">str</span>) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        freq = {}
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>        <span class="keyword">for</span> ch <span class="keyword">in</span> word:
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>            <span class="keyword">if</span> ch <span class="keyword">in</span> freq:
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>                freq[ch] += <span class="integer">1</span>
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>            <span class="keyword">else</span>:
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>                freq[ch] = <span class="integer">1</span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>        numpad_n = <span class="integer">8</span>
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>        items = <span class="predefined">sorted</span>(freq.items(), key=<span class="keyword">lambda</span> item: -item[<span class="integer">1</span>])
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>        
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>        count = <span class="integer">0</span>
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>        
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>        <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="predefined">enumerate</span>(items):
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>            pressing = (math.ceil((i+<span class="integer">1</span>)/numpad_n))
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>            count += item[<span class="integer">1</span>] * pressing
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>            print(item, i, pressing, count)
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>        
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>        <span class="keyword">return</span> count
</pre></div>
</div>
</div>

<h2 id="2134-minimum-swaps-to-group-all-1s-together-ii-1">2134. Minimum swaps to group all 1’s together II</h2>

<h2 id="840-magic-squares-in-grid">840. Magic squares in grid</h2>

<ul>
  <li>DON’T OVERTHINK! Here is the consequence of overthinking.</li>
</ul>

<div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers">  <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers">  <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">numMagicSquaresInside</span>(<span class="predefined-constant">self</span>, grid: List[List[<span class="predefined">int</span>]]) -&gt; <span class="predefined">int</span>:
<span class="line-numbers">  <a href="#n3" name="n3">3</a></span>        
<span class="line-numbers">  <a href="#n4" name="n4">4</a></span>        count = <span class="integer">0</span>
<span class="line-numbers">  <a href="#n5" name="n5">5</a></span>
<span class="line-numbers">  <a href="#n6" name="n6">6</a></span>        H = <span class="predefined">len</span>(grid)
<span class="line-numbers">  <a href="#n7" name="n7">7</a></span>        L = <span class="predefined">len</span>(grid[<span class="integer">0</span>])
<span class="line-numbers">  <a href="#n8" name="n8">8</a></span>        X_MAX = L-<span class="integer">3</span>+<span class="integer">1</span>
<span class="line-numbers">  <a href="#n9" name="n9">9</a></span>        Y_MAX = H-<span class="integer">3</span>+<span class="integer">1</span>
<span class="line-numbers"> <strong><a href="#n10" name="n10">10</a></strong></span>
<span class="line-numbers"> <a href="#n11" name="n11">11</a></span>
<span class="line-numbers"> <a href="#n12" name="n12">12</a></span>        <span class="keyword">if</span> H &lt; <span class="integer">3</span> <span class="keyword">or</span> L &lt; <span class="integer">3</span>:
<span class="line-numbers"> <a href="#n13" name="n13">13</a></span>            <span class="keyword">return</span> count
<span class="line-numbers"> <a href="#n14" name="n14">14</a></span>        
<span class="line-numbers"> <a href="#n15" name="n15">15</a></span>        steps = X_MAX*Y_MAX
<span class="line-numbers"> <a href="#n16" name="n16">16</a></span>        
<span class="line-numbers"> <a href="#n17" name="n17">17</a></span>
<span class="line-numbers"> <a href="#n18" name="n18">18</a></span>        x = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n19" name="n19">19</a></span>        y = <span class="integer">0</span>
<span class="line-numbers"> <strong><a href="#n20" name="n20">20</a></strong></span>        occur = {}
<span class="line-numbers"> <a href="#n21" name="n21">21</a></span>        non_magic_count = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n22" name="n22">22</a></span>        row_sums = [<span class="integer">0</span>, <span class="integer">0</span>, <span class="integer">0</span>]
<span class="line-numbers"> <a href="#n23" name="n23">23</a></span>        col_sums = [<span class="integer">0</span>, <span class="integer">0</span>, <span class="integer">0</span>]
<span class="line-numbers"> <a href="#n24" name="n24">24</a></span>        
<span class="line-numbers"> <a href="#n25" name="n25">25</a></span>        left_diag = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n26" name="n26">26</a></span>        right_diag = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n27" name="n27">27</a></span>        
<span class="line-numbers"> <a href="#n28" name="n28">28</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(y+<span class="integer">3</span>):
<span class="line-numbers"> <a href="#n29" name="n29">29</a></span>            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(x+<span class="integer">3</span>):
<span class="line-numbers"> <strong><a href="#n30" name="n30">30</a></strong></span>                val = grid[i][j]
<span class="line-numbers"> <a href="#n31" name="n31">31</a></span>                row_sums[i] += val
<span class="line-numbers"> <a href="#n32" name="n32">32</a></span>                col_sums[j] += val
<span class="line-numbers"> <a href="#n33" name="n33">33</a></span>                <span class="keyword">if</span> val <span class="keyword">in</span> occur:
<span class="line-numbers"> <a href="#n34" name="n34">34</a></span>                    occur[val] += <span class="integer">1</span>
<span class="line-numbers"> <a href="#n35" name="n35">35</a></span>                <span class="keyword">else</span>:
<span class="line-numbers"> <a href="#n36" name="n36">36</a></span>                    occur[val] = <span class="integer">1</span>
<span class="line-numbers"> <a href="#n37" name="n37">37</a></span>                
<span class="line-numbers"> <a href="#n38" name="n38">38</a></span>                <span class="keyword">if</span> i == j:
<span class="line-numbers"> <a href="#n39" name="n39">39</a></span>                    left_diag += val
<span class="line-numbers"> <strong><a href="#n40" name="n40">40</a></strong></span>                
<span class="line-numbers"> <a href="#n41" name="n41">41</a></span>                <span class="keyword">if</span> i+j == <span class="integer">2</span>:
<span class="line-numbers"> <a href="#n42" name="n42">42</a></span>                    right_diag += val
<span class="line-numbers"> <a href="#n43" name="n43">43</a></span>
<span class="line-numbers"> <a href="#n44" name="n44">44</a></span>                <span class="keyword">if</span> val &gt; <span class="integer">9</span> <span class="keyword">or</span> val &lt; <span class="integer">1</span>:
<span class="line-numbers"> <a href="#n45" name="n45">45</a></span>                    non_magic_count += <span class="integer">1</span>
<span class="line-numbers"> <a href="#n46" name="n46">46</a></span>
<span class="line-numbers"> <a href="#n47" name="n47">47</a></span>                
<span class="line-numbers"> <a href="#n48" name="n48">48</a></span>        <span class="keyword">if</span> left_diag == right_diag <span class="keyword">and</span> <span class="predefined">len</span>(occur) == <span class="integer">9</span> <span class="keyword">and</span> non_magic_count == <span class="integer">0</span> <span class="keyword">and</span> <span class="predefined">len</span>(<span class="predefined">set</span>(row_sums)) == <span class="integer">1</span> <span class="keyword">and</span> <span class="predefined">len</span>(<span class="predefined">set</span>(col_sums)) == <span class="integer">1</span>:
<span class="line-numbers"> <a href="#n49" name="n49">49</a></span>            count += <span class="integer">1</span>
<span class="line-numbers"> <strong><a href="#n50" name="n50">50</a></strong></span>
<span class="line-numbers"> <a href="#n51" name="n51">51</a></span>        <span class="comment">#print(left_diag, right_diag, occur)</span>
<span class="line-numbers"> <a href="#n52" name="n52">52</a></span>        <span class="comment">#print(grid[0],'\n',grid[1], '\n', grid[2])</span>
<span class="line-numbers"> <a href="#n53" name="n53">53</a></span>        steps -= <span class="integer">1</span>
<span class="line-numbers"> <a href="#n54" name="n54">54</a></span>
<span class="line-numbers"> <a href="#n55" name="n55">55</a></span>        east=    [<span class="integer">0</span>, <span class="integer">1</span>]     <span class="comment"># east</span>
<span class="line-numbers"> <a href="#n56" name="n56">56</a></span>        south=    [<span class="integer">1</span>, <span class="integer">0</span>]     <span class="comment"># south</span>
<span class="line-numbers"> <a href="#n57" name="n57">57</a></span>        west=    [<span class="integer">0</span>, -<span class="integer">1</span>]    <span class="comment"># west</span>
<span class="line-numbers"> <a href="#n58" name="n58">58</a></span>        north=    [-<span class="integer">1</span>, <span class="integer">0</span>]     <span class="comment"># north -- not used</span>
<span class="line-numbers"> <a href="#n59" name="n59">59</a></span>        
<span class="line-numbers"> <strong><a href="#n60" name="n60">60</a></strong></span>        direction = east
<span class="line-numbers"> <a href="#n61" name="n61">61</a></span>        x += direction[<span class="integer">1</span>]
<span class="line-numbers"> <a href="#n62" name="n62">62</a></span>        y += direction[<span class="integer">0</span>]
<span class="line-numbers"> <a href="#n63" name="n63">63</a></span>
<span class="line-numbers"> <a href="#n64" name="n64">64</a></span>        <span class="keyword">while</span> steps &gt; <span class="integer">0</span>:
<span class="line-numbers"> <a href="#n65" name="n65">65</a></span>            <span class="comment"># remove vals out of square</span>
<span class="line-numbers"> <a href="#n66" name="n66">66</a></span>            <span class="keyword">if</span> direction == east:
<span class="line-numbers"> <a href="#n67" name="n67">67</a></span>                col_sums = col_sums[<span class="integer">1</span>:]
<span class="line-numbers"> <a href="#n68" name="n68">68</a></span>                col_sums.append(<span class="integer">0</span>)
<span class="line-numbers"> <a href="#n69" name="n69">69</a></span>                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="integer">3</span>):
<span class="line-numbers"> <strong><a href="#n70" name="n70">70</a></strong></span>                    val = grid[y+i][x-<span class="integer">1</span>]
<span class="line-numbers"> <a href="#n71" name="n71">71</a></span>                    row_sums[i] -= val
<span class="line-numbers"> <a href="#n72" name="n72">72</a></span>                    <span class="keyword">if</span> occur[val] == <span class="integer">1</span>:
<span class="line-numbers"> <a href="#n73" name="n73">73</a></span>                        <span class="keyword">del</span> occur[val]
<span class="line-numbers"> <a href="#n74" name="n74">74</a></span>                    <span class="keyword">else</span>:
<span class="line-numbers"> <a href="#n75" name="n75">75</a></span>                        occur[val] -= <span class="integer">1</span>
<span class="line-numbers"> <a href="#n76" name="n76">76</a></span>                    <span class="keyword">if</span> val &gt; <span class="integer">9</span> <span class="keyword">or</span> val &lt; <span class="integer">1</span>:
<span class="line-numbers"> <a href="#n77" name="n77">77</a></span>                        non_magic_count -= <span class="integer">1</span>
<span class="line-numbers"> <a href="#n78" name="n78">78</a></span>
<span class="line-numbers"> <a href="#n79" name="n79">79</a></span>                    new_val = grid[y+i][x+<span class="integer">2</span>]
<span class="line-numbers"> <strong><a href="#n80" name="n80">80</a></strong></span>                    row_sums[i] += new_val
<span class="line-numbers"> <a href="#n81" name="n81">81</a></span>                    col_sums[<span class="integer">2</span>] += new_val
<span class="line-numbers"> <a href="#n82" name="n82">82</a></span>                    <span class="keyword">if</span> new_val <span class="keyword">in</span> occur:
<span class="line-numbers"> <a href="#n83" name="n83">83</a></span>                        occur[new_val] += <span class="integer">1</span>
<span class="line-numbers"> <a href="#n84" name="n84">84</a></span>                    <span class="keyword">else</span>:
<span class="line-numbers"> <a href="#n85" name="n85">85</a></span>                        occur[new_val] = <span class="integer">1</span>
<span class="line-numbers"> <a href="#n86" name="n86">86</a></span>                    <span class="keyword">if</span> new_val &gt; <span class="integer">9</span> <span class="keyword">or</span> new_val &lt;<span class="integer">1</span>:
<span class="line-numbers"> <a href="#n87" name="n87">87</a></span>                        non_magic_count += <span class="integer">1</span>
<span class="line-numbers"> <a href="#n88" name="n88">88</a></span>                    
<span class="line-numbers"> <a href="#n89" name="n89">89</a></span>            <span class="keyword">if</span> direction == south:
<span class="line-numbers"> <strong><a href="#n90" name="n90">90</a></strong></span>                row_sums = row_sums[<span class="integer">1</span>:]
<span class="line-numbers"> <a href="#n91" name="n91">91</a></span>                row_sums.append(<span class="integer">0</span>)
<span class="line-numbers"> <a href="#n92" name="n92">92</a></span>                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="integer">3</span>):
<span class="line-numbers"> <a href="#n93" name="n93">93</a></span>                    val = grid[y-<span class="integer">1</span>][x+i]
<span class="line-numbers"> <a href="#n94" name="n94">94</a></span>                    col_sums[i] -= val
<span class="line-numbers"> <a href="#n95" name="n95">95</a></span>                    <span class="keyword">if</span> occur[val] == <span class="integer">1</span>:
<span class="line-numbers"> <a href="#n96" name="n96">96</a></span>                        <span class="keyword">del</span> occur[val]
<span class="line-numbers"> <a href="#n97" name="n97">97</a></span>                    <span class="keyword">else</span>:
<span class="line-numbers"> <a href="#n98" name="n98">98</a></span>                        occur[val] -= <span class="integer">1</span>
<span class="line-numbers"> <a href="#n99" name="n99">99</a></span>                    <span class="keyword">if</span> val &gt; <span class="integer">9</span> <span class="keyword">or</span> val &lt; <span class="integer">1</span>:
<span class="line-numbers"><strong><a href="#n100" name="n100">100</a></strong></span>                        non_magic_count -= <span class="integer">1</span>
<span class="line-numbers"><a href="#n101" name="n101">101</a></span>                    
<span class="line-numbers"><a href="#n102" name="n102">102</a></span>                    new_val = grid[y+<span class="integer">2</span>][x+i]
<span class="line-numbers"><a href="#n103" name="n103">103</a></span>                    row_sums[<span class="integer">2</span>] += new_val
<span class="line-numbers"><a href="#n104" name="n104">104</a></span>                    col_sums[i] += new_val
<span class="line-numbers"><a href="#n105" name="n105">105</a></span>                    <span class="keyword">if</span> new_val <span class="keyword">in</span> occur:
<span class="line-numbers"><a href="#n106" name="n106">106</a></span>                        occur[new_val] += <span class="integer">1</span>
<span class="line-numbers"><a href="#n107" name="n107">107</a></span>                    <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n108" name="n108">108</a></span>                        occur[new_val] = <span class="integer">1</span>
<span class="line-numbers"><a href="#n109" name="n109">109</a></span>                    <span class="keyword">if</span> new_val &gt; <span class="integer">9</span> <span class="keyword">or</span> new_val &lt;<span class="integer">1</span>:
<span class="line-numbers"><strong><a href="#n110" name="n110">110</a></strong></span>                        non_magic_count += <span class="integer">1</span>
<span class="line-numbers"><a href="#n111" name="n111">111</a></span>            
<span class="line-numbers"><a href="#n112" name="n112">112</a></span>            <span class="keyword">if</span> direction == west:
<span class="line-numbers"><a href="#n113" name="n113">113</a></span>                col_sums = col_sums[:<span class="integer">2</span>]
<span class="line-numbers"><a href="#n114" name="n114">114</a></span>                col_sums.insert(<span class="integer">0</span>, <span class="integer">0</span>)
<span class="line-numbers"><a href="#n115" name="n115">115</a></span>                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="integer">3</span>):
<span class="line-numbers"><a href="#n116" name="n116">116</a></span>                    val = grid[y+i][x+<span class="integer">1</span>]
<span class="line-numbers"><a href="#n117" name="n117">117</a></span>                    row_sums[i] -= val
<span class="line-numbers"><a href="#n118" name="n118">118</a></span>                    <span class="keyword">if</span> occur[val] == <span class="integer">1</span>:
<span class="line-numbers"><a href="#n119" name="n119">119</a></span>                        <span class="keyword">del</span> occur[val]
<span class="line-numbers"><strong><a href="#n120" name="n120">120</a></strong></span>                    <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n121" name="n121">121</a></span>                        occur[val] -= <span class="integer">1</span>
<span class="line-numbers"><a href="#n122" name="n122">122</a></span>                    <span class="keyword">if</span> val &gt; <span class="integer">9</span> <span class="keyword">or</span> val &lt; <span class="integer">1</span>:
<span class="line-numbers"><a href="#n123" name="n123">123</a></span>                        non_magic_count -= <span class="integer">1</span>
<span class="line-numbers"><a href="#n124" name="n124">124</a></span>
<span class="line-numbers"><a href="#n125" name="n125">125</a></span>                    new_val = grid[y+i][x]
<span class="line-numbers"><a href="#n126" name="n126">126</a></span>                    row_sums[i] += val
<span class="line-numbers"><a href="#n127" name="n127">127</a></span>                    col_sums[<span class="integer">0</span>] += val
<span class="line-numbers"><a href="#n128" name="n128">128</a></span>                    <span class="keyword">if</span> new_val <span class="keyword">in</span> occur:
<span class="line-numbers"><a href="#n129" name="n129">129</a></span>                        occur[new_val] += <span class="integer">1</span>
<span class="line-numbers"><strong><a href="#n130" name="n130">130</a></strong></span>                    <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n131" name="n131">131</a></span>                        occur[new_val] = <span class="integer">1</span>
<span class="line-numbers"><a href="#n132" name="n132">132</a></span>                    <span class="keyword">if</span> new_val &gt; <span class="integer">9</span> <span class="keyword">or</span> new_val &lt;<span class="integer">1</span>:
<span class="line-numbers"><a href="#n133" name="n133">133</a></span>                        non_magic_count += <span class="integer">1</span>
<span class="line-numbers"><a href="#n134" name="n134">134</a></span>                    
<span class="line-numbers"><a href="#n135" name="n135">135</a></span>            <span class="comment"># get diags</span>
<span class="line-numbers"><a href="#n136" name="n136">136</a></span>            left_diag = <span class="integer">0</span>
<span class="line-numbers"><a href="#n137" name="n137">137</a></span>            right_diag = <span class="integer">0</span>
<span class="line-numbers"><a href="#n138" name="n138">138</a></span>            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(<span class="integer">3</span>):
<span class="line-numbers"><a href="#n139" name="n139">139</a></span>                left_diag += grid[y+i][x+i]
<span class="line-numbers"><strong><a href="#n140" name="n140">140</a></strong></span>                right_diag += grid[y+i][<span class="integer">2</span>+x+y-(y+i)]
<span class="line-numbers"><a href="#n141" name="n141">141</a></span>            
<span class="line-numbers"><a href="#n142" name="n142">142</a></span>            <span class="keyword">if</span> left_diag == right_diag <span class="keyword">and</span> <span class="predefined">len</span>(occur) == <span class="integer">9</span> <span class="keyword">and</span> non_magic_count == <span class="integer">0</span> <span class="keyword">and</span> <span class="predefined">len</span>(<span class="predefined">set</span>(row_sums)) == <span class="integer">1</span> <span class="keyword">and</span> <span class="predefined">len</span>(<span class="predefined">set</span>(col_sums)) == <span class="integer">1</span> <span class="keyword">and</span> left_diag == row_sums[<span class="integer">0</span>] <span class="keyword">and</span> left_diag == col_sums[<span class="integer">0</span>]:
<span class="line-numbers"><a href="#n143" name="n143">143</a></span>                count += <span class="integer">1</span>
<span class="line-numbers"><a href="#n144" name="n144">144</a></span>            
<span class="line-numbers"><a href="#n145" name="n145">145</a></span>            <span class="comment">#decide next direction</span>
<span class="line-numbers"><a href="#n146" name="n146">146</a></span>            <span class="keyword">if</span> x == X_MAX <span class="keyword">and</span> direction == east:
<span class="line-numbers"><a href="#n147" name="n147">147</a></span>                direction = south
<span class="line-numbers"><a href="#n148" name="n148">148</a></span>            <span class="keyword">if</span> x == X_MAX <span class="keyword">and</span> direction == south:
<span class="line-numbers"><a href="#n149" name="n149">149</a></span>                direction = west
<span class="line-numbers"><strong><a href="#n150" name="n150">150</a></strong></span>            <span class="keyword">if</span> x == <span class="integer">0</span> <span class="keyword">and</span> direction == west:
<span class="line-numbers"><a href="#n151" name="n151">151</a></span>                direction = south
<span class="line-numbers"><a href="#n152" name="n152">152</a></span>            <span class="keyword">if</span> x == <span class="integer">0</span> <span class="keyword">and</span> direction == south:
<span class="line-numbers"><a href="#n153" name="n153">153</a></span>                direction = east
<span class="line-numbers"><a href="#n154" name="n154">154</a></span>
<span class="line-numbers"><a href="#n155" name="n155">155</a></span>            steps -= <span class="integer">1</span>
<span class="line-numbers"><a href="#n156" name="n156">156</a></span>            x += direction[<span class="integer">1</span>]
<span class="line-numbers"><a href="#n157" name="n157">157</a></span>            y += direction[<span class="integer">0</span>]
<span class="line-numbers"><a href="#n158" name="n158">158</a></span>        
<span class="line-numbers"><a href="#n159" name="n159">159</a></span>        <span class="keyword">return</span> count
</pre></div>
</div>
</div>

<ul>
  <li>
    <p>Simply  scan each 3*3 block through the grids. Also, remember that x, y relationships in diagonal entries.</p>

    <div class="language-python highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span class="keyword">class</span> <span class="class">Solution</span>:
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>    <span class="keyword">def</span> <span class="function">numMagicSquaresInside</span>(<span class="predefined-constant">self</span>, grid: List[List[<span class="predefined">int</span>]]) -&gt; <span class="predefined">int</span>:
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>        count = <span class="integer">0</span>
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        X_MAX, Y_MAX = <span class="predefined">len</span>(grid[<span class="integer">0</span>])-<span class="integer">3</span>+<span class="integer">1</span>, <span class="predefined">len</span>(grid)-<span class="integer">3</span>+<span class="integer">1</span>
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="predefined">range</span>(Y_MAX):
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="predefined">range</span>(X_MAX):
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>                lookup = {}
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>                diag_left = <span class="integer">0</span>
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>                diag_right = <span class="integer">0</span>
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>                rowsums = [<span class="integer">0</span>, <span class="integer">0</span>, <span class="integer">0</span>]
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>                colsums = [<span class="integer">0</span>, <span class="integer">0</span>, <span class="integer">0</span>]
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>                non_magic = <span class="integer">0</span>
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>                  
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>                <span class="keyword">for</span> y <span class="keyword">in</span> <span class="predefined">range</span>(i, i+<span class="integer">3</span>):
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>                    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="predefined">range</span>(j, j+<span class="integer">3</span>):
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>                          
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>                        val = grid[y][x]
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>                        <span class="keyword">if</span> val <span class="keyword">not</span> <span class="keyword">in</span> <span class="predefined">range</span>(<span class="integer">1</span>, <span class="integer">10</span>):
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>                            non_magic += <span class="integer">1</span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>  
<span class="line-numbers"><a href="#n22" name="n22">22</a></span>                        <span class="keyword">if</span> val <span class="keyword">in</span> lookup:
<span class="line-numbers"><a href="#n23" name="n23">23</a></span>                            lookup[val] += <span class="integer">1</span>
<span class="line-numbers"><a href="#n24" name="n24">24</a></span>                        <span class="keyword">else</span>:
<span class="line-numbers"><a href="#n25" name="n25">25</a></span>                            lookup[val] = <span class="integer">1</span>
<span class="line-numbers"><a href="#n26" name="n26">26</a></span>  
<span class="line-numbers"><a href="#n27" name="n27">27</a></span>                        <span class="keyword">if</span> (x-j) == (y-i):
<span class="line-numbers"><a href="#n28" name="n28">28</a></span>                            diag_left += val
<span class="line-numbers"><a href="#n29" name="n29">29</a></span>                          
<span class="line-numbers"><strong><a href="#n30" name="n30">30</a></strong></span>                        <span class="keyword">if</span> (x-j)+(y-i) == <span class="integer">2</span>:
<span class="line-numbers"><a href="#n31" name="n31">31</a></span>                            diag_right += val
<span class="line-numbers"><a href="#n32" name="n32">32</a></span>                          
<span class="line-numbers"><a href="#n33" name="n33">33</a></span>                        rowsums[y-i] += val
<span class="line-numbers"><a href="#n34" name="n34">34</a></span>                        colsums[x-j] += val
<span class="line-numbers"><a href="#n35" name="n35">35</a></span>                          
<span class="line-numbers"><a href="#n36" name="n36">36</a></span>                <span class="keyword">if</span> <span class="predefined">len</span>(lookup) == <span class="integer">9</span> <span class="keyword">and</span> diag_left == diag_right <span class="keyword">and</span> diag_left == rowsums[<span class="integer">0</span>] <span class="keyword">and</span> diag_left == colsums[<span class="integer">0</span>] <span class="keyword">and</span> <span class="predefined">len</span>(<span class="predefined">set</span>(rowsums)) == <span class="integer">1</span> <span class="keyword">and</span> <span class="predefined">len</span>(<span class="predefined">set</span>(colsums)) == <span class="integer">1</span> <span class="keyword">and</span> non_magic == <span class="integer">0</span>:
<span class="line-numbers"><a href="#n37" name="n37">37</a></span>                    count += <span class="integer">1</span>
<span class="line-numbers"><a href="#n38" name="n38">38</a></span>          
<span class="line-numbers"><a href="#n39" name="n39">39</a></span>        <span class="keyword">return</span> count    
<span class="line-numbers"><strong><a href="#n40" name="n40">40</a></strong></span>  
<span class="line-numbers"><a href="#n41" name="n41">41</a></span>        
</pre></div>
</div>
    </div>
  </li>
</ul>

<p>##</p>]]></content><author><name></name></author><summary type="html"><![CDATA[1701. Average waiting time]]></summary></entry><entry><title type="html">Passed AZ-104 (Azure Administrator Associate) Today</title><link href="http://yourdomain.com/2024/07/06/az104-exam.html" rel="alternate" type="text/html" title="Passed AZ-104 (Azure Administrator Associate) Today" /><published>2024-07-06T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/07/06/az104-exam</id><content type="html" xml:base="http://yourdomain.com/2024/07/06/az104-exam.html"><![CDATA[<p>Prepared the exam for nearly 2 months with intermittent learning and practice. The difficulty is moderate for me and the good thing is that we are able to browse MS learn during the exam. It helped me a lot to double-check details like configuration steps, role permissions which quite relieved me, since I thought it is not an open-book exam. Guidelines can be found here:
<a href="https://learn.microsoft.com/en-us/credentials/support/exam-duration-exam-experience#accessing-microsoft-learn-during-your-certification-exam">Accessing Microsoft Learn during your certification exam</a></p>

<p>Another thing is that I chose the OnVUE online exam, and the experience was not satisfactory. Although I am the first in queue when I started the exam and the exam went well, the exam window went frozen when I was about to submit. The proctor restarted my session (luckily I was able to chat with them… Only the exam window froze, not the pop-up toolbar) but I wasn’t able to click on any until I had restarted my laptop (M1 MacBook) and redo all check-in process to submit my exam. Luckily again, the data wasn’t lost. I think I will take the exam at a local test centre next time.
:(</p>

<p>Happy weekend! Will pursue AZ-500 in the next few weeks.</p>]]></content><author><name></name></author><summary type="html"><![CDATA[Prepared the exam for nearly 2 months with intermittent learning and practice. The difficulty is moderate for me and the good thing is that we are able to browse MS learn during the exam. It helped me a lot to double-check details like configuration steps, role permissions which quite relieved me, since I thought it is not an open-book exam. Guidelines can be found here: Accessing Microsoft Learn during your certification exam]]></summary></entry><entry><title type="html">Azure Notes</title><link href="http://yourdomain.com/2024/06/02/azure-notes.html" rel="alternate" type="text/html" title="Azure Notes" /><published>2024-06-02T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/06/02/azure-notes</id><content type="html" xml:base="http://yourdomain.com/2024/06/02/azure-notes.html"><![CDATA[<h2 id="availability-set">Availability set</h2>

<h3 id="fault-domain">Fault Domain</h3>

<ul>
  <li><strong>Definition</strong>: A fault domain is essentially a group of VMs that share a common power source and network switch. By default, Azure distributes VMs in an availability set across up to three fault domains.</li>
  <li><strong>Purpose</strong>: Fault domains are designed to protect against hardware failures, such as issues with the physical server, rack, or data center. If one fault domain fails, the VMs in the other fault domains remain unaffected.</li>
  <li><strong>Example</strong>: If you have three VMs in an availability set, they might be placed in three different fault domains, ensuring that a failure in one domain (e.g., a network switch failure) does not affect the VMs in the other domains.</li>
</ul>

<h3 id="update-domain">Update Domain</h3>

<ul>
  <li><strong>Definition</strong>: An update domain is a group of VMs that can be updated or rebooted at the same time. By default, Azure distributes VMs in an availability set across up to five update domains.</li>
  <li><strong>Purpose</strong>: Update domains are used to manage the application of updates (e.g., patches or software updates) without causing downtime for all VMs in an availability set. Updates are applied one update domain at a time, ensuring that the VMs in other update domains remain available during the process.</li>
  <li><strong>Example</strong>: If you have five VMs in an availability set, they might be placed in five different update domains. During maintenance, Azure will update VMs in one update domain at a time, so only one-fifth of your VMs might be rebooted at any given time.</li>
</ul>

<h3 id="key-differences">Key Differences</h3>

<ul>
  <li><strong>Scope of Protection</strong>:
    <ul>
      <li>Fault Domain: Protects against hardware failures.</li>
      <li>Update Domain: Protects against simultaneous reboots during maintenance or updates.</li>
    </ul>
  </li>
  <li><strong>Number</strong>:
    <ul>
      <li>Fault Domain: Typically up to 3 fault domains.</li>
      <li>Update Domain: Typically up to 5 update domains.</li>
    </ul>
  </li>
  <li><strong>Function</strong>:
    <ul>
      <li>Fault Domain: Ensures VMs are spread across different physical hardware to mitigate hardware failure risk.</li>
      <li>Update Domain: Ensures VMs are updated or rebooted in phases to maintain service availability during maintenance.</li>
    </ul>
  </li>
</ul>

<h2 id="management-group">Management group</h2>

<p>In Microsoft Azure, a subscription can indeed be a member of only one management group at a time. Management groups in Azure are used to manage access, policy, and compliance across multiple Azure subscriptions. Each subscription must be associated with a single management group, but management groups can be nested to provide a hierarchical structure for management.</p>

<h2 id="sas">SAS</h2>

<p>Shared Access Signatures (SAS) in Microsoft Azure provide secure delegated access to resources in your storage account. A SAS token can be used to grant limited access to storage resources without exposing your account key. SAS tokens are supported by various Azure storage services, allowing you to fine-tune permissions and duration of access.</p>

<p>Supported services: <strong>Blob, Queue, Table, File</strong>.</p>

<h3 id="services-supported-by-sas-keys">Services Supported by SAS Keys</h3>

<ol>
  <li><strong>Azure Blob Storage:</strong>
    <ul>
      <li>Containers</li>
      <li>Blobs</li>
      <li>Blob snapshots</li>
      <li>Supports operations like reading, writing, deleting, listing, and setting metadata on blobs and containers.</li>
    </ul>
  </li>
  <li><strong>Azure Queue Storage:</strong>
    <ul>
      <li>Queues</li>
      <li>Messages</li>
      <li>Supports operations like adding, updating, reading, and deleting messages.</li>
    </ul>
  </li>
  <li><strong>Azure Table Storage:</strong>
    <ul>
      <li>Tables</li>
      <li>Entities</li>
      <li>Supports operations like querying, inserting, updating, and deleting table entities.</li>
    </ul>
  </li>
  <li><strong>Azure File Storage:</strong>
    <ul>
      <li>File shares</li>
      <li>Directories</li>
      <li>Files</li>
      <li>Supports operations like reading, writing, deleting files, and managing file shares and directories.</li>
    </ul>
  </li>
</ol>

<h3 id="types-of-sas-tokens">Types of SAS Tokens</h3>

<ol>
  <li><strong>Service SAS:</strong>
    <ul>
      <li>Grants access to resources in a specific service (Blob, Queue, Table, File).</li>
      <li>You can specify permissions, resource types, start and expiry times, and IP address range.</li>
    </ul>
  </li>
  <li><strong>Account SAS:</strong>
    <ul>
      <li>Grants access to resources in any service within the storage account.</li>
      <li>Provides more granular control, including access to service-level operations like listing the blobs in the account.</li>
      <li>Permissions include service operations, service-level actions, and the ability to use specific protocols.</li>
    </ul>
  </li>
  <li><strong>User Delegation SAS:</strong>
    <ul>
      <li>Available for Azure Blob Storage.</li>
      <li>Uses Azure Active Directory (Azure AD) credentials to secure the SAS.</li>
      <li>Allows generating SAS tokens with permissions defined by the user’s Azure AD roles.</li>
    </ul>
  </li>
</ol>

<h3 id="permissions-in-sas-tokens">Permissions in SAS Tokens</h3>

<ul>
  <li><strong>Read (r):</strong> Permits reading resources.</li>
  <li><strong>Write (w):</strong> Permits writing or creating new resources.</li>
  <li><strong>Delete (d):</strong> Permits deleting resources.</li>
  <li><strong>List (l):</strong> Permits listing resources.</li>
  <li><strong>Add (a):</strong> Permits adding messages (Queue Storage) or new resources.</li>
  <li><strong>Create (c):</strong> Permits creating new resources.</li>
  <li><strong>Update (u):</strong> Permits updating resources.</li>
  <li><strong>Process (p):</strong> Permits processing messages (Queue Storage).</li>
</ul>

<h3 id="example-use-cases">Example Use Cases</h3>

<ul>
  <li><strong>Blob Storage:</strong> Generate a SAS token to allow a client to upload images to a blob container without granting full access to the storage account.</li>
  <li><strong>File Storage:</strong> Create a SAS token to enable temporary access to a file share for a user to download files.</li>
  <li><strong>Queue Storage:</strong> Provide limited access to a queue for an application to add messages without exposing the queue’s full access key.</li>
  <li><strong>Table Storage:</strong> Grant access to a table for querying specific entities without exposing the entire storage account key.</li>
</ul>

<h3 id="using-an-azure-file-share-with-windows">Using an Azure file share with Windows</h3>

<p>To use an Azure file share with Windows, you must either mount it, which means assigning it a drive letter or mount point path, or <a href="https://learn.microsoft.com/en-us/azure/storage/files/storage-how-to-use-files-windows#access-an-azure-file-share-via-its-unc-path">access it via its UNC path</a>.</p>

<p>This article uses the storage account key to access the file share. A storage account key is an administrator key for a storage account, including administrator permissions to all files and folders within the file share you’re accessing, and for all file shares and other storage resources (blobs, queues, tables, etc.) contained within your storage account. If this isn’t sufficient for your workload, you can use <a href="https://learn.microsoft.com/en-us/azure/storage/file-sync/file-sync-planning">Azure File Sync</a> or <a href="https://learn.microsoft.com/en-us/azure/storage/files/storage-files-active-directory-overview">identity-based authentication over SMB</a>. <strong>Shared access signature (SAS) tokens aren’t currently supported for mounting Azure file shares.</strong></p>

<h3 id="conclusion">Conclusion</h3>

<p>SAS tokens provide a secure and flexible way to grant limited access to various Azure storage services. By leveraging SAS tokens, you can control access to your storage resources precisely, ensuring that users and applications have the permissions they need without exposing sensitive account keys.</p>

<h2 id="authorization-methods-for-azcopy">Authorization methods for <code>AzCopy</code></h2>

<ul>
  <li>MS Entra ID (AzureAD)</li>
  <li>SAS token</li>
</ul>

<h2 id="vm-scale-set">VM scale set</h2>

<p>Virtual Machine Scale Sets support both Linux and Windows VMs in Azure and can run up to <strong>1,000 VM</strong>s on a single scale set.</p>

<p>The criteria used to activate the upscale or downscale can depend on a customized schedule or actual demand and usage. Scale sets can apply the same configuration to a group of VMs simultaneously. They don’t require you to manually configure instances individually if you don’t want to.</p>

<p>Before you begin the upgrade process, the orchestrator will ensure that no more than 20% of instances in the entire scale set are unhealthy (for any reason), and for 1 instance at minimum (leq 5 instances).</p>

<h2 id="os-image-upgrade-versus-reimage">OS image upgrade versus reimage</h2>

<p>Both <strong>OS Image Upgrade</strong> and <strong><a href="https://learn.microsoft.com/en-us/rest/api/compute/virtual-machine-scale-sets/reimage">Reimage</a></strong> are methods used to update VMs within a scale set, but they serve different purposes and have distinct impacts.</p>

<p>OS image upgrade involves updating the underlying operating system image that is used to create new instances in a scale set. When you perform an OS image upgrade, Azure will create new VM instances with the updated OS image and gradually replace the old VM instances in the scale set with the new ones. This process is typically performed in stages to ensure high availability. OS image upgrades are a non-disruptive way to apply updates or changes to the underlying OS of the VMs in a scale set. Existing VM instances are not affected until they are replaced with the new instances.</p>

<p>Reimaging a VM instance in a scale set is a more immediate and disruptive action. When you choose to reimage a VM instance, Azure will stop the selected VM instance, perform the reimage operation, and then restart the VM using the same OS image. This effectively reinstalls the OS on that specific VM instance. Reimaging is typically used when you need to troubleshoot or reset a specific VM instance due to issues with that instance.</p>

<h2 id="general-roles">General roles</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Built-in role</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#contributor">Contributor</a></td>
      <td style="text-align: left">Grants full access to manage all resources, but does not allow you to assign roles in Azure RBAC, manage assignments in Azure Blueprints, or share image galleries.</td>
      <td style="text-align: left">b24988ac-6180-42a0-ab88-20f7382dd24c</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#owner">Owner</a></td>
      <td style="text-align: left">Grants full access to manage all resources, including the ability to assign roles in Azure RBAC.</td>
      <td style="text-align: left">8e3af657-a8ff-443c-a75c-2fe8c4bcb635</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#reader">Reader</a></td>
      <td style="text-align: left">View all resources, but does not allow you to make any changes.</td>
      <td style="text-align: left">acdd72a7-3385-48ef-bd42-f606fba81ae7</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#role-based-access-control-administrator">Role Based Access Control Administrator</a></td>
      <td style="text-align: left">Manage access to Azure resources by assigning roles using Azure RBAC. This role does not allow you to manage access using other ways, such as Azure Policy.</td>
      <td style="text-align: left">f58310d9-a9f6-439a-9e8d-f62e7b41a168</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#user-access-administrator">User Access Administrator</a></td>
      <td style="text-align: left">Lets you manage user access to Azure resources.</td>
      <td style="text-align: left">18d7d88d-d35e-4fb5-a5c3-7773c20a72d9</td>
    </tr>
  </tbody>
</table>

<h2 id="vm-size-naming-convention">VM size naming convention</h2>

<ol>
  <li><strong>General purpose</strong>:
    <ul>
      <li>Prefix: D, A, B</li>
      <li>Suffix: s (standard), v (version), p (premium), l (low priority), d (disk), a (availability)</li>
      <li>Examples: B, Dsv3, Dv3, Dasv4, Dav4, DSv2, Dv2, Av2, Dpdsv5, Dpldsv5, Dpsv5, Dplsv5, Dv4, Dsv4, Ddv4, Ddsv4, Dv5, Dsv5, Ddv5, Ddsv5, Dasv5, Dadsv5, DCasv5, DCadsv5, DCesv5, DCedsv5</li>
    </ul>
  </li>
  <li><strong>Compute optimized</strong>:
    <ul>
      <li>Prefix: F</li>
      <li>Suffix: s (standard), v (version), X (special)</li>
      <li>Examples: F, Fs, Fsv2, FX</li>
    </ul>
  </li>
  <li><strong>Memory optimized</strong>:
    <ul>
      <li>Prefix: E, M, D (some overlap with general purpose)</li>
      <li>Suffix: s (standard), v (version), p (premium), d (disk), a (availability), C (confidential)</li>
      <li>Examples: Esv3, Ev3, Easv4, Eav4, Epdsv5, Epsv5, Ev4, Esv4, Edv4, Edsv4, Ev5, Esv5, Edv5, Edsv5, Easv5, Eadsv5, Mv2, M, DSv2, Dv2, ECasv5, ECadsv5, ECesv5, ECedsv5</li>
    </ul>
  </li>
  <li><strong>Storage optimized</strong>:
    <ul>
      <li>Prefix: L</li>
      <li>Suffix: s (standard), v (version), a (availability)</li>
      <li>Examples: Lsv2, Lsv3, Lasv3</li>
    </ul>
  </li>
  <li><strong>GPU</strong>:
    <ul>
      <li>Prefix: N</li>
      <li>Suffix: v (version), A (specific GPU type), T (Tesla), r (remote), X (special), s (standard), m (multi-instance)</li>
      <li>Examples: NC, NCv2, NCv3, NCasT4_v3, NCA100v4, ND, NDv2, NGadsV620, NV, NVv3, NVv4, NDasrA100_v4, NDm_A100_v4</li>
    </ul>
  </li>
  <li><strong>High performance compute</strong>:
    <ul>
      <li>Prefix: H</li>
      <li>Suffix: B (batch), C (compute), X (special), v (version)</li>
      <li>Examples: HB, HBv2, HBv3, HBv4, HC, HX</li>
    </ul>
  </li>
</ol>

<h2 id="vpn-gateways">VPN gateways</h2>

<p>https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal</p>

<h2 id="vm-scale-set-az-vmss">VM scale set <code>az vmss</code></h2>

<p><code>az vmss scale</code> - change the number of VMs within a VMSS.</p>

<h2 id="port-numbers-for-common-protocols">Port numbers for common protocols</h2>

<table>
  <thead>
    <tr>
      <th><strong>Protocol</strong></th>
      <th><strong>Port Number</strong></th>
      <th><strong>Description</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>HTTP</strong></td>
      <td>80</td>
      <td>Hypertext Transfer Protocol for web traffic.</td>
    </tr>
    <tr>
      <td><strong>HTTPS</strong></td>
      <td>443</td>
      <td>Secure Hypertext Transfer Protocol for encrypted web traffic.</td>
    </tr>
    <tr>
      <td><strong>FTP</strong></td>
      <td>21</td>
      <td>File Transfer Protocol for transferring files.</td>
    </tr>
    <tr>
      <td><strong>FTPS</strong></td>
      <td>990</td>
      <td>Secure File Transfer Protocol over SSL/TLS.</td>
    </tr>
    <tr>
      <td><strong>SFTP</strong></td>
      <td>22</td>
      <td>Secure File Transfer Protocol over SSH.</td>
    </tr>
    <tr>
      <td><strong>SSH</strong></td>
      <td>22</td>
      <td>Secure Shell for secure remote login and command execution.</td>
    </tr>
    <tr>
      <td><strong>Telnet</strong></td>
      <td>23</td>
      <td>Telnet protocol for unencrypted remote login (not recommended).</td>
    </tr>
    <tr>
      <td><strong>SMTP</strong></td>
      <td>25</td>
      <td>Simple Mail Transfer Protocol for sending emails.</td>
    </tr>
    <tr>
      <td><strong>SMTPS</strong></td>
      <td>465</td>
      <td>Secure SMTP over SSL.</td>
    </tr>
    <tr>
      <td><strong>IMAP</strong></td>
      <td>143</td>
      <td>Internet Message Access Protocol for retrieving emails.</td>
    </tr>
    <tr>
      <td><strong>IMAPS</strong></td>
      <td>993</td>
      <td>Secure IMAP over SSL.</td>
    </tr>
    <tr>
      <td><strong>POP3</strong></td>
      <td>110</td>
      <td>Post Office Protocol version 3 for retrieving emails.</td>
    </tr>
    <tr>
      <td><strong>POP3S</strong></td>
      <td>995</td>
      <td>Secure POP3 over SSL.</td>
    </tr>
    <tr>
      <td><strong>RDP</strong></td>
      <td>3389</td>
      <td>Remote Desktop Protocol for remote desktop access.</td>
    </tr>
    <tr>
      <td><strong>DNS</strong></td>
      <td>53</td>
      <td>Domain Name System for resolving domain names.</td>
    </tr>
    <tr>
      <td><strong>MySQL</strong></td>
      <td>3306</td>
      <td>MySQL database service.</td>
    </tr>
    <tr>
      <td><strong>PostgreSQL</strong></td>
      <td>5432</td>
      <td>PostgreSQL database service.</td>
    </tr>
    <tr>
      <td><strong>SQL Server</strong></td>
      <td>1433</td>
      <td>Microsoft SQL Server database service.</td>
    </tr>
    <tr>
      <td><strong>Oracle DB</strong></td>
      <td>1521</td>
      <td>Oracle database service.</td>
    </tr>
    <tr>
      <td><strong>MongoDB</strong></td>
      <td>27017</td>
      <td>MongoDB database service.</td>
    </tr>
    <tr>
      <td><strong>Redis</strong></td>
      <td>6379</td>
      <td>Redis in-memory data structure store.</td>
    </tr>
    <tr>
      <td><strong>Memcached</strong></td>
      <td>11211</td>
      <td>Memcached caching service.</td>
    </tr>
    <tr>
      <td><strong>NTP</strong></td>
      <td>123</td>
      <td>Network Time Protocol for clock synchronization.</td>
    </tr>
    <tr>
      <td><strong>LDAP</strong></td>
      <td>389</td>
      <td>Lightweight Directory Access Protocol.</td>
    </tr>
    <tr>
      <td><strong>LDAPS</strong></td>
      <td>636</td>
      <td>Secure LDAP over SSL.</td>
    </tr>
    <tr>
      <td><strong>Kerberos</strong></td>
      <td>88</td>
      <td>Kerberos authentication protocol.</td>
    </tr>
    <tr>
      <td><strong>NetBIOS</strong></td>
      <td>137, 138, 139</td>
      <td>NetBIOS over TCP/IP for network services.</td>
    </tr>
    <tr>
      <td><strong>SMB/CIFS</strong></td>
      <td>445</td>
      <td>Server Message Block/Common Internet File System for file sharing.</td>
    </tr>
    <tr>
      <td><strong>VPN (PPTP)</strong></td>
      <td>1723</td>
      <td>Point-to-Point Tunneling Protocol for VPN.</td>
    </tr>
    <tr>
      <td><strong>IKEv2</strong></td>
      <td>500</td>
      <td>Internet Key Exchange for VPN.</td>
    </tr>
    <tr>
      <td><strong>L2TP</strong></td>
      <td>1701</td>
      <td>Layer 2 Tunneling Protocol for VPN.</td>
    </tr>
    <tr>
      <td><strong>ESP</strong></td>
      <td>50</td>
      <td>Encapsulating Security Payload for VPN.</td>
    </tr>
    <tr>
      <td><strong>GRE</strong></td>
      <td>47</td>
      <td>Generic Routing Encapsulation for VPN.</td>
    </tr>
  </tbody>
</table>

<h2 id="tutorial-create-a-site-to-site-vpn-connection">Tutorial: Create a site-to-site VPN connection</h2>

<h3 id="vnet-preparation">VNet preparation</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Address</th>
      <th>Note</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>TestRG1</td>
      <td>Resource Group</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>VNet1</td>
      <td>Virtual Network</td>
      <td>10.1.0.0/16</td>
      <td>Central Canada</td>
    </tr>
    <tr>
      <td>FrontEnd</td>
      <td>Subnet</td>
      <td>10.1.0.0/24</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606161716240.png" alt="image-20240606161716240" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606162220148.png" alt="image-20240606162220148" /></p>

<h3 id="create-a-gateway-subnet">Create a gateway subnet</h3>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606162615577.png" alt="image-20240606162615577" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606162600108.png" alt="image-20240606162600108" /></p>

<h3 id="create-a-vpn-gateway">Create a VPN gateway</h3>

<ol>
  <li>
    <p>In search bar, search “Virtual network gateways”</p>
  </li>
  <li>
    <p>Create a virtual network gateway with the following configs:</p>

    <p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606163210724.png" alt="image-20240606163210724" /></p>
  </li>
</ol>

<h2 id="vm-backup">VM backup</h2>

<p>https://learn.microsoft.com/en-us/azure/backup/backup-azure-vms-first-look-arm</p>

<h2 id="sspr">SSPR</h2>

<p>SSPR is a centralized self-service password reset portal for accounts under Azure tenants.</p>

<p>Requirements:</p>

<ul>
  <li>P1 license and up</li>
  <li>Users with admin roles have more strict reset policies.
    <ul>
      <li>a strong default <em>two-gate</em> policy is enforced.
        <ul>
          <li>requires two pieces of authentication data:
            <ul>
              <li>Email address</li>
              <li>authenticator app</li>
              <li>phone number</li>
            </ul>
          </li>
          <li>security questions are prohibited</li>
        </ul>
      </li>
      <li>cmdlet <code>Update-MgPolicyAuthorizationPolicy</code> can be used to enable/disable SSPR for admin users with parameter <code>-AllowedToUseSspr</code></li>
    </ul>
  </li>
</ul>

<h2 id="dns-verification-process">DNS verification process</h2>

<p>The purpose of DNS verification using a TXT or MX record (containing a random token) is to confirm that the entity requesting the service owns the target domain. After verification, Azure provides the detailed configuration information to the verified domain owner.</p>

<p>To use custom domains, first we need to register this domain at a registrar, then, configure the name server to one of the Azure NSs. Then, we can use Azure to manage the domain (including connecting to vnets and more).</p>

<h3 id="dns-resolution-process">DNS Resolution Process</h3>

<ol>
  <li><strong>Local DNS Resolver</strong>:
    <ul>
      <li>When a user enters a domain name (e.g., <code>example.com</code>) in their browser, the request first goes to the user’s local DNS resolver, which is usually managed by their ISP or configured on their network.</li>
    </ul>
  </li>
  <li><strong>Check Local Cache</strong>:
    <ul>
      <li>The local DNS resolver checks its cache to see if it already has a recent response for the domain name. If it does, it returns the cached result, skipping further steps.</li>
    </ul>
  </li>
  <li><strong>Query the Root DNS Servers</strong>:
    <ul>
      <li>If the local DNS resolver does not have the cached result, it queries one of the root DNS servers. The root DNS servers know the authoritative servers for all top-level domains (TLDs, like <code>.com</code>, <code>.net</code>, etc.).</li>
    </ul>
  </li>
  <li><strong>TLD DNS Servers</strong>:
    <ul>
      <li>The root DNS server responds with the address of the TLD DNS server responsible for <code>.com</code> domains.</li>
      <li>The local DNS resolver then queries the TLD DNS server for <code>example.com</code>.</li>
    </ul>
  </li>
  <li><strong>Authoritative DNS Servers (Azure DNS)</strong>:
    <ul>
      <li>The TLD DNS server responds with the address of the authoritative DNS servers for <code>example.com</code>, which are the Azure DNS servers you configured.</li>
      <li>The local DNS resolver queries one of the Azure DNS servers for <code>example.com</code>.</li>
    </ul>
  </li>
  <li><strong>Retrieve DNS Records</strong>:
    <ul>
      <li>The Azure DNS server responds with the DNS records for <code>example.com</code> (e.g., the IP address associated with the domain).</li>
    </ul>
  </li>
  <li><strong>Return Response to Client</strong>:
    <ul>
      <li>The local DNS resolver caches the response and returns the result to the user’s machine.</li>
      <li>The browser can now connect to the IP address returned and load the website.</li>
    </ul>
  </li>
</ol>

<h3 id="example-walkthrough">Example Walkthrough</h3>

<ol>
  <li><strong>User Input</strong>:
    <ul>
      <li>User enters <code>www.example.com</code> in their browser.</li>
    </ul>
  </li>
  <li><strong>Local DNS Cache</strong>:
    <ul>
      <li>The local DNS resolver checks if <code>www.example.com</code> is in its cache.</li>
    </ul>
  </li>
  <li><strong>Root Server Query</strong>:
    <ul>
      <li>If not in cache, the local DNS resolver queries a root DNS server.</li>
    </ul>
  </li>
  <li><strong>TLD Server Query</strong>:
    <ul>
      <li>Root DNS server responds with the TLD DNS server for <code>.com</code>.</li>
    </ul>
  </li>
  <li><strong>Authoritative DNS Server Query</strong>:
    <ul>
      <li>The local DNS resolver queries the TLD DNS server for <code>example.com</code>.</li>
      <li>TLD DNS server responds with the Azure DNS servers.</li>
    </ul>
  </li>
  <li><strong>Azure DNS Response</strong>:
    <ul>
      <li>The local DNS resolver queries the Azure DNS server for <code>www.example.com</code>.</li>
      <li>Azure DNS server responds with the IP address (e.g., <code>192.0.2.1</code>).</li>
    </ul>
  </li>
  <li><strong>Browser Connects</strong>:
    <ul>
      <li>The local DNS resolver caches the response and returns the IP address to the browser.</li>
      <li>The browser connects to <code>192.0.2.1</code> and loads the website.</li>
    </ul>
  </li>
</ol>

<h2 id="storage-replication-strategies">Storage replication strategies</h2>

<p>LRS</p>

<p>ZRS</p>

<p>GRS</p>

<p>GZRS</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Node in data center unavailable</th>
      <th style="text-align: left">Entire data center unavailable</th>
      <th style="text-align: left">Region-wide outage</th>
      <th style="text-align: left">Read access during region-wide outage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">- <strong>LRS</strong> - <strong>ZRS</strong> - <strong>GRS</strong> - <strong>RA-GRS</strong> - <strong>GZRS</strong> - <strong>RA-GZRS</strong></td>
      <td style="text-align: left">- <strong>ZRS</strong> - <strong>GRS</strong> - <strong>RA-GRS</strong> - <strong>GZRS</strong> - <strong>RA-GZRS</strong></td>
      <td style="text-align: left">- <strong>GRS</strong> - <strong>RA-GRS</strong> - <strong>GZRS</strong> - <strong>RA-GZRS</strong></td>
      <td style="text-align: left">- <strong>RA-GRS</strong> - <strong>RA-GZRS</strong></td>
    </tr>
  </tbody>
</table>

<h2 id="sas-features">SAS features</h2>

<ul>
  <li>Signing method</li>
  <li>Signing key
    <ul>
      <li>MS-managed keys</li>
      <li>customer-managed keys</li>
    </ul>
  </li>
  <li>Permissions</li>
  <li>Start and Expiry date/time</li>
  <li>Allowed IP</li>
  <li>Allowed protocols</li>
</ul>

<h3 id="uri-definitions">URI definitions</h3>

<ul>
  <li>Resource URI</li>
  <li><code>sv</code> - storage version</li>
  <li><code>ss</code> - storage service</li>
  <li><code>st</code> - start time</li>
  <li><code>se</code> - expiry time</li>
  <li><code>sr</code> - resource</li>
  <li><code>sp</code> - permissions</li>
  <li><code>sip</code> - ip range</li>
  <li><code>spr</code> - protocol</li>
  <li><code>sig</code> - signature</li>
</ul>

<h2 id="summary-of-supported-authentication-methods-in-azcopy">Summary of supported authentication methods in <code>azcopy</code></h2>

<table>
  <thead>
    <tr>
      <th>Service</th>
      <th>Supported Authentication Methods</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Azure Blob Storage</strong></td>
      <td>SAS, OAuth</td>
    </tr>
    <tr>
      <td><strong>Azure Files</strong></td>
      <td>Share/Directory SAS</td>
    </tr>
    <tr>
      <td><strong>Azure Data Lake Storage Gen2</strong></td>
      <td>SAS, OAuth, Shared Key</td>
    </tr>
    <tr>
      <td><strong>AWS S3 to Azure Blob</strong></td>
      <td>Access Key (AWS) to SAS, OAuth (Azure Blob)</td>
    </tr>
    <tr>
      <td><strong>Google Cloud Storage to Azure Blob</strong></td>
      <td>Service Account Key (GCS) to SAS, OAuth (Azure Blob)</td>
    </tr>
  </tbody>
</table>

<h2 id="azure-backup-services">Azure backup services</h2>

<h3 id="access-tiers">Access tiers</h3>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Snapshot Tier</th>
      <th>Vault-Standard Tier</th>
      <th>Archive Tier</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Storage Location</strong></td>
      <td>Customer’s subscription</td>
      <td>Microsoft-managed tenant</td>
      <td>Long-term, low-cost storage</td>
    </tr>
    <tr>
      <td><strong>Restoration Speed</strong></td>
      <td>Fastest</td>
      <td>Moderate</td>
      <td>Slowest</td>
    </tr>
    <tr>
      <td><strong>Availability</strong></td>
      <td>Locally available</td>
      <td>Isolated copy</td>
      <td>For compliance, rarely accessed</td>
    </tr>
    <tr>
      <td><strong>Use Cases</strong></td>
      <td>Quick restores</td>
      <td>Regular backup and restore operations</td>
      <td>Long-term retention for compliance</td>
    </tr>
    <tr>
      <td><strong>RTO</strong></td>
      <td>Low</td>
      <td>Moderate</td>
      <td>High</td>
    </tr>
    <tr>
      <td><strong>Pricing</strong></td>
      <td>Higher storage cost</td>
      <td>Moderate cost</td>
      <td>Lowest cost</td>
    </tr>
  </tbody>
</table>

<h3 id="built-in-security-measures">Built-in security measures</h3>

<ul>
  <li>RBAC</li>
  <li>Encryption</li>
  <li>Soft-delete</li>
</ul>

<h3 id="vm-protections">VM Protections</h3>

<ul>
  <li>
    <p>Azure Backup</p>

    <p>Snapshot of the entire vm. Restore the entire</p>
  </li>
  <li>
    <p>Azure Site Recovery</p>
  </li>
  <li>
    <p>Azure managed disks</p>

    <ul>
      <li>snapshot</li>
      <li>image</li>
    </ul>
  </li>
</ul>

<p>images - the whole vm</p>

<p>snapshots - one disk</p>

<p>operating disk backups - for vm with only one disk</p>

<h3 id="soft-delete">Soft delete</h3>

<p>Steps:</p>

<ul>
  <li>Stop backup job</li>
  <li>Apply soft-delete state</li>
  <li>View soft-delete data in the vault - during the 14 day retention period.</li>
  <li>Undelete backup items</li>
  <li>Restore items</li>
  <li>Resume backups</li>
</ul>

<h2 id="entra-id">Entra ID</h2>

<p>Your company makes use of Multi-Factor Authentication for when users are not in the office. The</p>

<p>Per Authentication option has been configured as the usage model.</p>

<p>After the acquisition of a smaller business and the addition of the new staff to Azure Active</p>

<p>Directory (Azure AD) obtains a different company and adding the new employees to Azure Active</p>

<p>Directory (Azure AD), you are informed that these employees should also make use of Multi-</p>

<p>Factor Authentication.</p>

<p>To achieve this, the Per Enabled User setting must be set for the usage model.</p>

<p>Solution: You reconfigure the existing usage model via the Azure portal.</p>

<p>Does the solution meet the goal?</p>

<p>Your company has an Azure Active Directory (Azure AD) tenant named weyland.com that is</p>

<p>configured for hybrid coexistence with the on-premises Active Directory domain.</p>

<p>You have a server named DirSync1 that is configured as a DirSync server.</p>

<p>You create a new user account in the on-premise Active Directory. You now need to replicate the</p>

<p>user information to Azure AD immediately.</p>

<p>Solution: You run the Start-ADSyncSyncCycle -PolicyType Initial PowerShell cmdlet.</p>

<dl>
  <dt>Does the solution meet the goal?</dt>
  <dd>
    <p><code>Start-ADSyncSyncCycle -PolicyType Delta</code></p>
  </dd>
</dl>

<h2 id="move-an-app-to-a-different-region">Move an app to a different region</h2>

<p>The region in which your app runs is the region of the App Service plan it’s in. However, you cannot change an App Service plan’s region. If you want to run your app in a different region, one alternative is app cloning. Cloning makes a copy of your app in a new or existing App Service plan in any region.</p>

<p>You can find <strong>Clone App</strong> in the <strong>Development Tools</strong> section of the menu.</p>

<p><strong>Steps:</strong></p>

<ol>
  <li><a href="https://learn.microsoft.com/en-us/azure/app-service/manage-backup">Create a back up of the source app</a>.</li>
  <li><a href="https://learn.microsoft.com/en-us/azure/app-service/app-service-plan-manage#create-an-app-service-plan">Create an app in a new App Service plan, in the target region</a>.</li>
  <li><a href="https://learn.microsoft.com/en-us/azure/app-service/manage-backup">Restore the back up in the target app</a></li>
  <li>If you use a custom domain, <a href="https://learn.microsoft.com/en-us/azure/app-service/manage-custom-dns-migrate-domain#2-create-the-dns-records">bind it preemptively to the target app</a> with <code>asuid.</code> and <a href="https://learn.microsoft.com/en-us/azure/app-service/manage-custom-dns-migrate-domain#3-enable-the-domain-for-your-app">enable the domain in the target app</a>.</li>
  <li>Configure everything else in your target app to be the same as the source app and verify your configuration.</li>
  <li>When you’re ready for the custom domain to point to the target app, <a href="https://learn.microsoft.com/en-us/azure/app-service/manage-custom-dns-migrate-domain#4-remap-the-active-dns-name">remap the domain name</a>.</li>
</ol>

<h2 id="load-balancer-skus">Load Balancer SKUs</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left">Standard Load Balancer</th>
      <th>Basic Load Balancer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Scenario</td>
      <td style="text-align: left">Equipped for load-balancing network layer traffic when high performance and ultra-low latency is needed. Routes traffic within and across regions, and to availability zones for high resiliency.</td>
      <td>Equipped for small-scale applications that don’t need high availability or redundancy. Not compatible with availability zones.</td>
    </tr>
    <tr>
      <td style="text-align: left">Backend type</td>
      <td style="text-align: left">IP based, NIC based</td>
      <td>NIC based</td>
    </tr>
    <tr>
      <td style="text-align: left">Protocol</td>
      <td style="text-align: left">TCP, UDP</td>
      <td>TCP, UDP</td>
    </tr>
    <tr>
      <td style="text-align: left">Backend pool endpoints</td>
      <td style="text-align: left">Any virtual machines or virtual machine scale sets in a single virtual network</td>
      <td>Virtual machines in a single availability set or virtual machine scale set</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-custom-probe-overview#probe-protocol">Health probes</a></td>
      <td style="text-align: left">TCP, HTTP, HTTPS</td>
      <td>TCP, HTTP</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-custom-probe-overview#probe-down-behavior">Health probe down behavior</a></td>
      <td style="text-align: left">TCP connections stay alive on an instance probe down <strong>and</strong> on all probes down.</td>
      <td>TCP connections stay alive on an instance probe down. All TCP connections end when all probes are down.</td>
    </tr>
    <tr>
      <td style="text-align: left">Availability Zones</td>
      <td style="text-align: left">Zone-redundant, zonal, or non-zonal frontend IP configurations can be used for inbound and outbound traffic</td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left">Type</td>
      <td style="text-align: left">Internal, Public</td>
      <td>Internal, Public</td>
    </tr>
    <tr>
      <td style="text-align: left">Frontend IP configuration</td>
      <td style="text-align: left">When using a Public Standard Load Balancer, the SKU of the public IP must be Standard. Basic Public IPs are not supported on Standard LB</td>
      <td>When using a Public Basic Load Balancer, the SKU of the public IP must be Basic. Standard Public IPs are not supported on Basic LB</td>
    </tr>
    <tr>
      <td style="text-align: left">Diagnostics</td>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-standard-diagnostics">Azure Monitor multi-dimensional metrics</a></td>
      <td>Not supported</td>
    </tr>
    <tr>
      <td style="text-align: left">HA Ports</td>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-ha-ports-overview">Available for Internal Load Balancer</a></td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left">Secure by default</td>
      <td style="text-align: left">Closed to inbound flows unless allowed by a network security group. Internal traffic from the virtual network to the internal load balancer is allowed.</td>
      <td>Open by default. Network security group optional.</td>
    </tr>
    <tr>
      <td style="text-align: left">Outbound Rules</td>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-outbound-connections#outboundrules">Declarative outbound NAT configuration</a></td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left">TCP Reset on Idle</td>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-tcp-reset">Available on any rule</a></td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-multivip-overview">Multiple front ends</a></td>
      <td style="text-align: left">Inbound and <a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-outbound-connections">outbound</a></td>
      <td>Inbound only</td>
    </tr>
    <tr>
      <td style="text-align: left">Management Operations</td>
      <td style="text-align: left">Most operations &lt; 30 seconds</td>
      <td>60-90+ seconds typical</td>
    </tr>
    <tr>
      <td style="text-align: left">SLA</td>
      <td style="text-align: left"><a href="https://azure.microsoft.com/support/legal/sla/load-balancer/v1_0/">99.99%</a></td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left">Global VNet Peering Support</td>
      <td style="text-align: left">Standard Internal Load Balancer is supported via Global VNet Peering</td>
      <td>Not supported</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/virtual-network/nat-gateway/nat-overview">NAT Gateway Support</a></td>
      <td style="text-align: left">Both Standard Internal Load Balancer and Standard Public Load Balancer are supported via Nat Gateway</td>
      <td>Not supported</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/private-link/private-link-overview">Private Link Support</a></td>
      <td style="text-align: left">Standard Internal Load Balancer is supported via Private Link</td>
      <td>Not supported</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/cross-region-overview">Global tier</a></td>
      <td style="text-align: left">Standard Load Balancer supports the Global tier for Public Load Balancers enabling cross-region load balancing</td>
      <td>Not supported</td>
    </tr>
  </tbody>
</table>

<h2 id="azure-governance-tools">Azure governance tools</h2>

<h3 id="a-azure-traffic-analytics">A. Azure Traffic Analytics</h3>

<p>Azure Traffic Analytics is a cloud-based solution that provides visibility into user and application traffic on your Azure virtual network. It leverages Network Security Group (NSG) flow logs to give you insights into traffic patterns and identify potential security threats.</p>

<p><strong>Key Features:</strong></p>

<ul>
  <li><strong>Network Traffic Visibility</strong>: Provides a comprehensive view of the traffic flow in your Azure network.</li>
  <li><strong>Threat Detection</strong>: Helps identify potential security threats and anomalies in network traffic.</li>
  <li><strong>Performance Monitoring</strong>: Monitors network performance and identifies bottlenecks.</li>
  <li><strong>Compliance Reporting</strong>: Assists in compliance reporting by providing detailed traffic logs and analytics.</li>
  <li><strong>Integration</strong>: Integrates with other Azure security services like Azure Security Center.</li>
</ul>

<h3 id="b-azure-monitor">B. Azure Monitor</h3>

<p>Azure Monitor is a full-stack monitoring service that provides a comprehensive solution for collecting, analyzing, and acting on telemetry from your cloud and on-premises environments. It helps you maximize the availability and performance of your applications and services.</p>

<p><strong>Key Features:</strong></p>

<ul>
  <li><strong>Data Collection</strong>: Collects data from various sources, including applications, guest operating systems, Azure resources, and custom sources.</li>
  <li><strong>Metrics and Logs</strong>: Provides powerful metrics and log analytics capabilities.</li>
  <li><strong>Dashboards</strong>: Customizable dashboards to visualize monitoring data.</li>
  <li><strong>Alerts</strong>: Configurable alerts based on specific criteria to notify you of performance issues.</li>
  <li><strong>Insights</strong>: Application Insights for monitoring application performance and dependencies.</li>
  <li><strong>Diagnostics</strong>: Detailed diagnostics to troubleshoot issues.</li>
</ul>

<h3 id="c-azure-activity-log">C. Azure Activity Log</h3>

<p>Azure Activity Log provides a record of all the activities that happen in your Azure subscription. It helps you understand the operations that were performed on resources in your subscription and provides insights into the “what, who, and when” for any write operations (PUT, POST, DELETE) taken on the resources.</p>

<p><strong>Key Features:</strong></p>

<ul>
  <li><strong>Operation Logs</strong>: Logs of all create, update, and delete operations performed on Azure resources.</li>
  <li><strong>User and System Actions</strong>: Tracks actions performed by users and systems.</li>
  <li><strong>Event Insights</strong>: Provides insights into the events that have occurred within your Azure resources.</li>
  <li><strong>Audit and Compliance</strong>: Useful for auditing and compliance purposes by providing detailed logs of resource changes.</li>
  <li><strong>Integration</strong>: Can be integrated with Azure Monitor and other services for deeper analytics and alerts.</li>
</ul>

<h3 id="d-azure-advisor">D. Azure Advisor</h3>

<p>Azure Advisor is a personalized cloud consultant that helps you follow best practices to optimize your Azure deployments. It analyzes your resource configuration and usage telemetry and offers recommendations to help you improve the cost-effectiveness, performance, reliability, and security of your resources.</p>

<p><strong>Key Features:</strong></p>

<ul>
  <li><strong>Cost Recommendations</strong>: Provides suggestions to reduce your overall Azure spending.</li>
  <li><strong>Performance Recommendations</strong>: Offers advice to improve the performance of your applications.</li>
  <li><strong>Security Recommendations</strong>: Identifies potential security vulnerabilities and provides recommendations to mitigate them.</li>
  <li><strong>Reliability Recommendations</strong>: Helps improve the reliability of your applications with best practices.</li>
  <li><strong>Actionable Insights</strong>: Provides actionable insights and recommendations that you can implement directly from the Advisor portal.</li>
  <li><strong>Integration</strong>: Integrates with other Azure services to provide a holistic view of your resource optimization.</li>
</ul>

<p>These tools collectively help you manage, monitor, and optimize your Azure environment effectively.</p>]]></content><author><name></name></author><summary type="html"><![CDATA[Availability set]]></summary></entry><entry><title type="html">Azure Storage</title><link href="http://yourdomain.com/2024/05/30/azure-storage.html" rel="alternate" type="text/html" title="Azure Storage" /><published>2024-05-30T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/05/30/azure-storage</id><content type="html" xml:base="http://yourdomain.com/2024/05/30/azure-storage.html"><![CDATA[<h2 id="install-azure-cli">Install Azure CLI</h2>

<div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>brew install azure-cli
</pre></div>
</div>
</div>

<h2 id="login-to-azure-in-azure-cli">Login to Azure in Azure CLI</h2>

<div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>az login
</pre></div>
</div>
</div>

<p>A browser will start and perform the authentication process.</p>

<h2 id="auth-modes">Auth modes</h2>

<table>
  <thead>
    <tr>
      <th><strong>Authentication Mode</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Pros</strong></th>
      <th><strong>Cons</strong></th>
      <th><strong>Use Cases</strong></th>
      <th><strong>Command Example</strong></th>
      <th><strong>Parameters</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Shared Key Authorization</strong></td>
      <td>Uses the storage account name and account key.</td>
      <td>Easy to use, straightforward for development.</td>
      <td>Security risks if account keys are shared.</td>
      <td>Development, some production scenarios.</td>
      <td><code>az storage blob upload --account-name myaccount --account-key myaccountkey --container-name mycontainer --name myblob --file myfile</code></td>
      <td><code>--account-name</code>, <code>--account-key</code>, <code>--container-name</code>, <code>--name</code>, <code>--file</code></td>
    </tr>
    <tr>
      <td><strong>Shared Access Signature (SAS)</strong></td>
      <td>Provides delegated access with specific permissions and expiration.</td>
      <td>Fine-grained control over permissions and expiration.</td>
      <td>Needs careful management to avoid security risks.</td>
      <td>Temporary access, limited permissions.</td>
      <td><code>az storage blob upload --sas-token mySASToken --container-name mycontainer --name myblob --file myfile</code></td>
      <td><code>--sas-token</code>, <code>--container-name</code>, <code>--name</code>, <code>--file</code></td>
    </tr>
    <tr>
      <td><strong>Azure Active Directory (Azure AD)</strong></td>
      <td>Provides role-based access control (RBAC) using Azure AD identities.</td>
      <td>Provides RBAC, integrates with Azure AD.</td>
      <td>More complex setup compared to shared key or SAS.</td>
      <td>Production, enterprise environments.</td>
      <td><code>az login \n az storage blob upload --account-name myaccount --container-name mycontainer --name myblob --file myfile --auth-mode login</code></td>
      <td><code>--account-name</code>, <code>--container-name</code>, <code>--name</code>, <code>--file</code>, <code>--auth-mode</code></td>
    </tr>
    <tr>
      <td><strong>Managed Identities</strong></td>
      <td>Uses automatically managed identity for Azure resources to authenticate.</td>
      <td>Simplifies identity management, no credentials needed.</td>
      <td>Requires services to support managed identities.</td>
      <td>Production, simplifying identity management.</td>
      <td><code>az login --identity \n az storage blob upload --account-name myaccount --container-name mycontainer --name myblob --file myfile --auth-mode login</code></td>
      <td><code>--account-name</code>, <code>--container-name</code>, <code>--name</code>, <code>--file</code>, <code>--auth-mode</code></td>
    </tr>
    <tr>
      <td><strong>OAuth Bearer Token</strong></td>
      <td>Uses OAuth tokens obtained from Azure AD to authenticate.</td>
      <td>Supports OAuth 2.0, flexible token-based authentication.</td>
      <td>Requires handling OAuth token lifecycle.</td>
      <td>Token-based scenarios, custom authentication flows.</td>
      <td><code>TOKEN=$(az account get-access-token --resource https://storage.azure.com/ --query accessToken --output tsv) \n curl -X PUT -H "Authorization: Bearer $TOKEN" -T myfile "https://myaccount.blob.core.windows.net/mycontainer/myblob"</code></td>
      <td><code>--resource</code>, <code>--query</code>, <code>--output</code> (for <code>az account get-access-token</code>), <code>-X PUT</code>, <code>-H "Authorization: Bearer $TOKEN"</code>, <code>-T myfile</code> (for <code>curl</code>)</td>
    </tr>
  </tbody>
</table>

<ul>
  <li><strong>Account Key</strong>:
    <ul>
      <li>Suitable for full administrative control and development purposes.</li>
      <li>Provides access to all resources within the storage account.</li>
      <li>Higher security risk due to the breadth of access granted.</li>
    </ul>
  </li>
  <li><strong>Shared Access Signature (SAS)</strong>:
    <ul>
      <li>Suitable for scenarios requiring delegated, limited access.</li>
      <li>Provides granular control over permissions, resources, and duration.</li>
      <li>Enhances security by restricting access based on permissions, IP, and protocol.</li>
    </ul>
  </li>
</ul>

<h2 id="azure-blobs">Azure blobs</h2>

<blockquote>
  <p>Using account-key authentication methods</p>

  <p>Account keys can be found here:</p>

  <p><img src="/Users/aoi/Desktop/Screenshot 2024-05-30 at 5.09.24 PM.png" alt="Screenshot 2024-05-30 at 5.09.24 PM" /></p>
</blockquote>

<h3 id="create-a-container">Create a container</h3>

<div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>az storage container create \
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>--name $container-name \
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>--account-name $storage-account \
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>--account-key $storage-access-key \
</pre></div>
</div>
</div>

<p><img src="/Users/aoi/Desktop/Screenshot 2024-05-30 at 5.12.13 PM.png" alt="Screenshot 2024-05-30 at 5.12.13 PM" /></p>

<h3 id="upload-a-file-to-the-container">Upload a file to the container</h3>

<div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>az storage blob upload \
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>--file $file \
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>--container-name $container-name \
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>--account-name $storage-account \
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>--account-key $storage-access-key
</pre></div>
</div>
</div>

<p><img src="/Users/aoi/Desktop/Screenshot 2024-05-30 at 5.34.14 PM.png" alt="Screenshot 2024-05-30 at 5.34.14 PM" /></p>

<h3 id="upload-multiple-files-recursively">Upload multiple files recursively</h3>

<div class="language-plaintext highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span>az storage blob upload-batch \
<span class="line-numbers"><a href="#n2" name="n2">2</a></span>--destination $container-name \
<span class="line-numbers"><a href="#n3" name="n3">3</a></span>--source $path \
<span class="line-numbers"><a href="#n4" name="n4">4</a></span>--pattern *.png \
<span class="line-numbers"><a href="#n5" name="n5">5</a></span>--account-name $storage-account \
<span class="line-numbers"><a href="#n6" name="n6">6</a></span>--account-key $storage-access-key
</pre></div>
</div>
</div>]]></content><author><name></name></author><summary type="html"><![CDATA[Install Azure CLI]]></summary></entry><entry><title type="html">Azure Sas</title><link href="http://yourdomain.com/2024/05/27/Azure-SAS.html" rel="alternate" type="text/html" title="Azure Sas" /><published>2024-05-27T00:00:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/05/27/Azure-SAS</id><content type="html" xml:base="http://yourdomain.com/2024/05/27/Azure-SAS.html"><![CDATA[<h2 id="features-of-entra-id">Features of Entra ID</h2>

<h3 id="sso-access">SSO access</h3>

<h3 id="ubiquitous-device-support">Ubiquitous device support</h3>

<h3 id="secure-remote-access">Secure remote access</h3>

<h3 id="cloud-extensibility">Cloud extensibility</h3>

<h3 id="sensitive-data-protection">Sensitive data protection</h3>

<h3 id="self-service-support">Self-service support</h3>

<h2 id="concepts">Concepts</h2>

<h3 id="identity">Identity</h3>

<h3 id="account">Account</h3>

<h3 id="ms-entra-account">MS Entra account</h3>

<h3 id="azure-tenant-directory---a-single-organization">Azure tenant (directory) - a single organization</h3>

<h3 id="azure-subscription">Azure subscription</h3>

<h2 id="create-user-accounts">Create user accounts</h2>

<h3 id="lab-scenario">Lab scenario</h3>

<p>Your organization will be using Microsoft Entra authentication. You’ve been tasked with provisioning the required user and group accounts. Membership of the groups should be updated automatically based on the user job titles. You also need to invite guest users from another tenant. These guest users should have only limited permissions to resources in your subscription.</p>

<p>Your organization has these specific requirements:</p>

<ul>
  <li>Any user with the Cloud Administrator job title should be assigned to the IT Cloud Administrator group.</li>
  <li>Any user with the System Administrator job title should be assigned to the IT System Administrator group.</li>
  <li>Any user that is a member of the IT Cloud Administrator group or the IT System Administrator group should be assigned to the IT Lab Administrator group.</li>
  <li>A System Administrator in another Active Directory tenant should be invited as guest user with limited permissions.</li>
</ul>

<h3 id="architecture-diagram">Architecture diagram</h3>

<p><img src="https://learn.microsoft.com/en-us/training/wwl-azure/configure-user-group-accounts/media/lab-01.png" alt="Architecture diagram as explained in the text." /></p>

<h3 id="objectives">Objectives</h3>

<ul>
  <li>Task 1: Create and configure Microsoft Entra users.
    <ul>
      <li>User <strong>AZ104-01a-aaduser1</strong> will be a Cloud Administrator assigned the User Administrator role.</li>
      <li>User <strong>AZ104-01a-aaduser2</strong> will be a System Administrator.</li>
    </ul>
  </li>
  <li>Task 2: Create AD groups with assigned and dynamic membership.
    <ul>
      <li>The <strong>IT Cloud Administrator</strong> group should include any user with the Cloud Administrator job title.</li>
      <li>The <strong>IT System Administrator</strong> group should include any user with the System Administrator job title.</li>
      <li>The <strong>IT Lab Administrator</strong> group should include any user in the IT Cloud Administrator group or the IT System Administrator group.</li>
    </ul>
  </li>
  <li>Task 3: Create a Microsoft Entra tenant. This tenant will be used to demonstrate guest users.</li>
  <li>Task 4: Manage Microsoft Entra guest users.
    <ul>
      <li>In the new Microsoft Entra tenant create a System Administrator user, <strong>az104-01b-aaduser1</strong>.</li>
      <li>Invite the new user as a guest user to your subscription.</li>
    </ul>
  </li>
</ul>

<p>Task 1:</p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527213104416.png" alt="image-20240527213104416" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527213308016.png" alt="image-20240527213308016" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527213632925.png" alt="image-20240527213632925" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527213658796.png" alt="image-20240527213658796" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527213718690.png" alt="image-20240527213718690" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527213820915.png" alt="image-20240527213820915" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527213907247.png" alt="image-20240527213907247" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527213949729.png" alt="image-20240527213949729" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527214041178.png" alt="image-20240527214041178" /></p>

<p>(Requires MFA)</p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527214227141.png" alt="image-20240527214227141" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527214313747.png" alt="image-20240527214313747" /> (Able to create new users)</p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527214826343.png" alt="image-20240527214826343" /></p>

<p>Change the name of the current directory</p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527215354687.png" alt="image-20240527215354687" /></p>

<p>Dynamic Group Assignment requires P2 license</p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527220024294.png" alt="image-20240527220024294" /></p>

<p>Create new tenant</p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527220359922.png" alt="image-20240527220359922" /></p>

<p>Paid license needed if you want to create new MS Entra ID tenant</p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527220541905.png" alt="image-20240527220541905" /></p>

<p>Invite external users</p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240527221910165.png" alt="image-20240527221910165" /></p>]]></content><author><name></name></author><summary type="html"><![CDATA[Features of Entra ID]]></summary></entry><entry><title type="html">CSS: layout of the header</title><link href="http://yourdomain.com/2024/05/22/css-flex-layout.html" rel="alternate" type="text/html" title="CSS: layout of the header" /><published>2024-05-22T16:24:00+00:00</published><updated>2024-08-10T06:15:13+00:00</updated><id>http://yourdomain.com/2024/05/22/css-flex-layout</id><content type="html" xml:base="http://yourdomain.com/2024/05/22/css-flex-layout.html"><![CDATA[<p>The final result can refer to the header banner of this page. ⬆️</p>

<h2 id="the-originals">the Originals</h2>

<p><img src="/assets/img/nyc-guidelines.jpg" alt="NYC MTA design guideline" /></p>

<h2 id="the-header">the Header</h2>

<p><img src="/assets/img/header.png" alt="header banner" /></p>

<h3 id="components">Components</h3>

<h4 id="brand">Brand</h4>

<h4 id="post-title">Post title</h4>

<h4 id="navigations">Navigations</h4>

<h2 id="responsive-layout">Responsive layout</h2>

<p>Using the grid system from Bootstrap, the header can adapt to different window/screen size by arranging its components  .</p>

<ul>
  <li><code>xs</code> and <code>sm</code></li>
</ul>

<p>Using media queries <code>@media</code> to manually add some style based on the width of the viewport.</p>

<h2 id="display-flex"><code>display: flex</code></h2>]]></content><author><name>jianing</name></author><category term="web" /><category term="css" /><summary type="html"><![CDATA[The final result can refer to the header banner of this page. ⬆️]]></summary></entry></feed>