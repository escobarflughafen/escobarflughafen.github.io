<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Azure Notes - escobarflughafen</title>
  <meta name="description" content="This is an example site description. You can use Markdown here.">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="icon" href="/assets/img/home.png" type="image/x-icon">
</head>
<body class="mb-3">


<header class="header-banner line-overlay">
    <div class="container">
        <div class="row header-banner-row px-3">
            <a href="/" class="col-auto subway-red link-no-effect pe-3">
                <h1 class="head-text display-text">
                    Exit
                </h1>
            </a>
            <!--prev post-->


            <div class="col flex-grow-1 pe-3">
                <h1 class="head-text">
                    Azure Notes
                </h1>
            </div>


            <a class="col-auto subway-blue link-no-effect" href="#toc">
                <h1 class="head-text display-text">
                   Toc
                </h1>
            </a>

            <div class="col-12 col-md px-0">
                <ul class="nav nav-banner">
    <li class="nav-item my-nav-item">
        <a class="nav-link
        my-nav-link
        head-text
        display-text
        nav-link-banner" aria-current="page" href="/posts">
            <h2 class="
            mb-0">
                posts
            </h2>
        </a>

    </li>

    <li class="nav-item my-nav-item">
        <a class="nav-link
        my-nav-link
        head-text
        display-text
        nav-link-banner" aria-current="page" href="/projects">
            <h2 class="
            mb-0">
                projects
            </h2>
        </a>
    </li>
    <li class="nav-item my-nav-item">
        <a class="nav-link
        my-nav-link
        head-text
        display-text
        nav-link-banner" aria-current="page" href="/photos">
            <h2 class="
            mb-0">
                photos
            </h2>
        </a>
    </li>
    <li class="nav-item my-nav-items">
        <a class="nav-link
        my-nav-link
        head-text
        display-text
        nav-link-banner" aria-current="page" href="/contacts">
            <h2 class="
            mb-0">
                contacts
            </h2>
        </a>
    </li>
</ul>
            </div>


        </div>


    </div>
</header>

<main class="container my-3 px-3">
    <div class="row">
        <div class="col-12 col-md-8 mb-3 mb-md-0">
            <h2 id="availability-set">Availability set</h2>

<h3 id="fault-domain">Fault Domain</h3>

<ul>
  <li><strong>Definition</strong>: A fault domain is essentially a group of VMs that share a common power source and network switch. By default, Azure distributes VMs in an availability set across up to three fault domains.</li>
  <li><strong>Purpose</strong>: Fault domains are designed to protect against hardware failures, such as issues with the physical server, rack, or data center. If one fault domain fails, the VMs in the other fault domains remain unaffected.</li>
  <li><strong>Example</strong>: If you have three VMs in an availability set, they might be placed in three different fault domains, ensuring that a failure in one domain (e.g., a network switch failure) does not affect the VMs in the other domains.</li>
</ul>

<h3 id="update-domain">Update Domain</h3>

<ul>
  <li><strong>Definition</strong>: An update domain is a group of VMs that can be updated or rebooted at the same time. By default, Azure distributes VMs in an availability set across up to five update domains.</li>
  <li><strong>Purpose</strong>: Update domains are used to manage the application of updates (e.g., patches or software updates) without causing downtime for all VMs in an availability set. Updates are applied one update domain at a time, ensuring that the VMs in other update domains remain available during the process.</li>
  <li><strong>Example</strong>: If you have five VMs in an availability set, they might be placed in five different update domains. During maintenance, Azure will update VMs in one update domain at a time, so only one-fifth of your VMs might be rebooted at any given time.</li>
</ul>

<h3 id="key-differences">Key Differences</h3>

<ul>
  <li><strong>Scope of Protection</strong>:
    <ul>
      <li>Fault Domain: Protects against hardware failures.</li>
      <li>Update Domain: Protects against simultaneous reboots during maintenance or updates.</li>
    </ul>
  </li>
  <li><strong>Number</strong>:
    <ul>
      <li>Fault Domain: Typically up to 3 fault domains.</li>
      <li>Update Domain: Typically up to 5 update domains.</li>
    </ul>
  </li>
  <li><strong>Function</strong>:
    <ul>
      <li>Fault Domain: Ensures VMs are spread across different physical hardware to mitigate hardware failure risk.</li>
      <li>Update Domain: Ensures VMs are updated or rebooted in phases to maintain service availability during maintenance.</li>
    </ul>
  </li>
</ul>

<h2 id="management-group">Management group</h2>

<p>In Microsoft Azure, a subscription can indeed be a member of only one management group at a time. Management groups in Azure are used to manage access, policy, and compliance across multiple Azure subscriptions. Each subscription must be associated with a single management group, but management groups can be nested to provide a hierarchical structure for management.</p>

<h2 id="sas">SAS</h2>

<p>Shared Access Signatures (SAS) in Microsoft Azure provide secure delegated access to resources in your storage account. A SAS token can be used to grant limited access to storage resources without exposing your account key. SAS tokens are supported by various Azure storage services, allowing you to fine-tune permissions and duration of access.</p>

<p>Supported services: <strong>Blob, Queue, Table, File</strong>.</p>

<h3 id="services-supported-by-sas-keys">Services Supported by SAS Keys</h3>

<ol>
  <li><strong>Azure Blob Storage:</strong>
    <ul>
      <li>Containers</li>
      <li>Blobs</li>
      <li>Blob snapshots</li>
      <li>Supports operations like reading, writing, deleting, listing, and setting metadata on blobs and containers.</li>
    </ul>
  </li>
  <li><strong>Azure Queue Storage:</strong>
    <ul>
      <li>Queues</li>
      <li>Messages</li>
      <li>Supports operations like adding, updating, reading, and deleting messages.</li>
    </ul>
  </li>
  <li><strong>Azure Table Storage:</strong>
    <ul>
      <li>Tables</li>
      <li>Entities</li>
      <li>Supports operations like querying, inserting, updating, and deleting table entities.</li>
    </ul>
  </li>
  <li><strong>Azure File Storage:</strong>
    <ul>
      <li>File shares</li>
      <li>Directories</li>
      <li>Files</li>
      <li>Supports operations like reading, writing, deleting files, and managing file shares and directories.</li>
    </ul>
  </li>
</ol>

<h3 id="types-of-sas-tokens">Types of SAS Tokens</h3>

<ol>
  <li><strong>Service SAS:</strong>
    <ul>
      <li>Grants access to resources in a specific service (Blob, Queue, Table, File).</li>
      <li>You can specify permissions, resource types, start and expiry times, and IP address range.</li>
    </ul>
  </li>
  <li><strong>Account SAS:</strong>
    <ul>
      <li>Grants access to resources in any service within the storage account.</li>
      <li>Provides more granular control, including access to service-level operations like listing the blobs in the account.</li>
      <li>Permissions include service operations, service-level actions, and the ability to use specific protocols.</li>
    </ul>
  </li>
  <li><strong>User Delegation SAS:</strong>
    <ul>
      <li>Available for Azure Blob Storage.</li>
      <li>Uses Azure Active Directory (Azure AD) credentials to secure the SAS.</li>
      <li>Allows generating SAS tokens with permissions defined by the user’s Azure AD roles.</li>
    </ul>
  </li>
</ol>

<h3 id="permissions-in-sas-tokens">Permissions in SAS Tokens</h3>

<ul>
  <li><strong>Read (r):</strong> Permits reading resources.</li>
  <li><strong>Write (w):</strong> Permits writing or creating new resources.</li>
  <li><strong>Delete (d):</strong> Permits deleting resources.</li>
  <li><strong>List (l):</strong> Permits listing resources.</li>
  <li><strong>Add (a):</strong> Permits adding messages (Queue Storage) or new resources.</li>
  <li><strong>Create (c):</strong> Permits creating new resources.</li>
  <li><strong>Update (u):</strong> Permits updating resources.</li>
  <li><strong>Process (p):</strong> Permits processing messages (Queue Storage).</li>
</ul>

<h3 id="example-use-cases">Example Use Cases</h3>

<ul>
  <li><strong>Blob Storage:</strong> Generate a SAS token to allow a client to upload images to a blob container without granting full access to the storage account.</li>
  <li><strong>File Storage:</strong> Create a SAS token to enable temporary access to a file share for a user to download files.</li>
  <li><strong>Queue Storage:</strong> Provide limited access to a queue for an application to add messages without exposing the queue’s full access key.</li>
  <li><strong>Table Storage:</strong> Grant access to a table for querying specific entities without exposing the entire storage account key.</li>
</ul>

<h3 id="using-an-azure-file-share-with-windows">Using an Azure file share with Windows</h3>

<p>To use an Azure file share with Windows, you must either mount it, which means assigning it a drive letter or mount point path, or <a href="https://learn.microsoft.com/en-us/azure/storage/files/storage-how-to-use-files-windows#access-an-azure-file-share-via-its-unc-path">access it via its UNC path</a>.</p>

<p>This article uses the storage account key to access the file share. A storage account key is an administrator key for a storage account, including administrator permissions to all files and folders within the file share you’re accessing, and for all file shares and other storage resources (blobs, queues, tables, etc.) contained within your storage account. If this isn’t sufficient for your workload, you can use <a href="https://learn.microsoft.com/en-us/azure/storage/file-sync/file-sync-planning">Azure File Sync</a> or <a href="https://learn.microsoft.com/en-us/azure/storage/files/storage-files-active-directory-overview">identity-based authentication over SMB</a>. <strong>Shared access signature (SAS) tokens aren’t currently supported for mounting Azure file shares.</strong></p>

<h3 id="conclusion">Conclusion</h3>

<p>SAS tokens provide a secure and flexible way to grant limited access to various Azure storage services. By leveraging SAS tokens, you can control access to your storage resources precisely, ensuring that users and applications have the permissions they need without exposing sensitive account keys.</p>

<h2 id="authorization-methods-for-azcopy">Authorization methods for <code class="language-plaintext highlighter-rouge">AzCopy</code></h2>

<ul>
  <li>MS Entra ID (AzureAD)</li>
  <li>SAS token</li>
</ul>

<h2 id="vm-scale-set">VM scale set</h2>

<p>Virtual Machine Scale Sets support both Linux and Windows VMs in Azure and can run up to <strong>1,000 VM</strong>s on a single scale set.</p>

<p>The criteria used to activate the upscale or downscale can depend on a customized schedule or actual demand and usage. Scale sets can apply the same configuration to a group of VMs simultaneously. They don’t require you to manually configure instances individually if you don’t want to.</p>

<p>Before you begin the upgrade process, the orchestrator will ensure that no more than 20% of instances in the entire scale set are unhealthy (for any reason), and for 1 instance at minimum (leq 5 instances).</p>

<h2 id="os-image-upgrade-versus-reimage">OS image upgrade versus reimage</h2>

<p>Both <strong>OS Image Upgrade</strong> and <strong><a href="https://learn.microsoft.com/en-us/rest/api/compute/virtual-machine-scale-sets/reimage">Reimage</a></strong> are methods used to update VMs within a scale set, but they serve different purposes and have distinct impacts.</p>

<p>OS image upgrade involves updating the underlying operating system image that is used to create new instances in a scale set. When you perform an OS image upgrade, Azure will create new VM instances with the updated OS image and gradually replace the old VM instances in the scale set with the new ones. This process is typically performed in stages to ensure high availability. OS image upgrades are a non-disruptive way to apply updates or changes to the underlying OS of the VMs in a scale set. Existing VM instances are not affected until they are replaced with the new instances.</p>

<p>Reimaging a VM instance in a scale set is a more immediate and disruptive action. When you choose to reimage a VM instance, Azure will stop the selected VM instance, perform the reimage operation, and then restart the VM using the same OS image. This effectively reinstalls the OS on that specific VM instance. Reimaging is typically used when you need to troubleshoot or reset a specific VM instance due to issues with that instance.</p>

<h2 id="general-roles">General roles</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Built-in role</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#contributor">Contributor</a></td>
      <td style="text-align: left">Grants full access to manage all resources, but does not allow you to assign roles in Azure RBAC, manage assignments in Azure Blueprints, or share image galleries.</td>
      <td style="text-align: left">b24988ac-6180-42a0-ab88-20f7382dd24c</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#owner">Owner</a></td>
      <td style="text-align: left">Grants full access to manage all resources, including the ability to assign roles in Azure RBAC.</td>
      <td style="text-align: left">8e3af657-a8ff-443c-a75c-2fe8c4bcb635</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#reader">Reader</a></td>
      <td style="text-align: left">View all resources, but does not allow you to make any changes.</td>
      <td style="text-align: left">acdd72a7-3385-48ef-bd42-f606fba81ae7</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#role-based-access-control-administrator">Role Based Access Control Administrator</a></td>
      <td style="text-align: left">Manage access to Azure resources by assigning roles using Azure RBAC. This role does not allow you to manage access using other ways, such as Azure Policy.</td>
      <td style="text-align: left">f58310d9-a9f6-439a-9e8d-f62e7b41a168</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles/general#user-access-administrator">User Access Administrator</a></td>
      <td style="text-align: left">Lets you manage user access to Azure resources.</td>
      <td style="text-align: left">18d7d88d-d35e-4fb5-a5c3-7773c20a72d9</td>
    </tr>
  </tbody>
</table>

<h2 id="vm-size-naming-convention">VM size naming convention</h2>

<ol>
  <li><strong>General purpose</strong>:
    <ul>
      <li>Prefix: D, A, B</li>
      <li>Suffix: s (standard), v (version), p (premium), l (low priority), d (disk), a (availability)</li>
      <li>Examples: B, Dsv3, Dv3, Dasv4, Dav4, DSv2, Dv2, Av2, Dpdsv5, Dpldsv5, Dpsv5, Dplsv5, Dv4, Dsv4, Ddv4, Ddsv4, Dv5, Dsv5, Ddv5, Ddsv5, Dasv5, Dadsv5, DCasv5, DCadsv5, DCesv5, DCedsv5</li>
    </ul>
  </li>
  <li><strong>Compute optimized</strong>:
    <ul>
      <li>Prefix: F</li>
      <li>Suffix: s (standard), v (version), X (special)</li>
      <li>Examples: F, Fs, Fsv2, FX</li>
    </ul>
  </li>
  <li><strong>Memory optimized</strong>:
    <ul>
      <li>Prefix: E, M, D (some overlap with general purpose)</li>
      <li>Suffix: s (standard), v (version), p (premium), d (disk), a (availability), C (confidential)</li>
      <li>Examples: Esv3, Ev3, Easv4, Eav4, Epdsv5, Epsv5, Ev4, Esv4, Edv4, Edsv4, Ev5, Esv5, Edv5, Edsv5, Easv5, Eadsv5, Mv2, M, DSv2, Dv2, ECasv5, ECadsv5, ECesv5, ECedsv5</li>
    </ul>
  </li>
  <li><strong>Storage optimized</strong>:
    <ul>
      <li>Prefix: L</li>
      <li>Suffix: s (standard), v (version), a (availability)</li>
      <li>Examples: Lsv2, Lsv3, Lasv3</li>
    </ul>
  </li>
  <li><strong>GPU</strong>:
    <ul>
      <li>Prefix: N</li>
      <li>Suffix: v (version), A (specific GPU type), T (Tesla), r (remote), X (special), s (standard), m (multi-instance)</li>
      <li>Examples: NC, NCv2, NCv3, NCasT4_v3, NCA100v4, ND, NDv2, NGadsV620, NV, NVv3, NVv4, NDasrA100_v4, NDm_A100_v4</li>
    </ul>
  </li>
  <li><strong>High performance compute</strong>:
    <ul>
      <li>Prefix: H</li>
      <li>Suffix: B (batch), C (compute), X (special), v (version)</li>
      <li>Examples: HB, HBv2, HBv3, HBv4, HC, HX</li>
    </ul>
  </li>
</ol>

<h2 id="vpn-gateways">VPN gateways</h2>

<p>https://learn.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal</p>

<h2 id="vm-scale-set-az-vmss">VM scale set <code class="language-plaintext highlighter-rouge">az vmss</code></h2>

<p><code class="language-plaintext highlighter-rouge">az vmss scale</code> - change the number of VMs within a VMSS.</p>

<h2 id="port-numbers-for-common-protocols">Port numbers for common protocols</h2>

<table>
  <thead>
    <tr>
      <th><strong>Protocol</strong></th>
      <th><strong>Port Number</strong></th>
      <th><strong>Description</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>HTTP</strong></td>
      <td>80</td>
      <td>Hypertext Transfer Protocol for web traffic.</td>
    </tr>
    <tr>
      <td><strong>HTTPS</strong></td>
      <td>443</td>
      <td>Secure Hypertext Transfer Protocol for encrypted web traffic.</td>
    </tr>
    <tr>
      <td><strong>FTP</strong></td>
      <td>21</td>
      <td>File Transfer Protocol for transferring files.</td>
    </tr>
    <tr>
      <td><strong>FTPS</strong></td>
      <td>990</td>
      <td>Secure File Transfer Protocol over SSL/TLS.</td>
    </tr>
    <tr>
      <td><strong>SFTP</strong></td>
      <td>22</td>
      <td>Secure File Transfer Protocol over SSH.</td>
    </tr>
    <tr>
      <td><strong>SSH</strong></td>
      <td>22</td>
      <td>Secure Shell for secure remote login and command execution.</td>
    </tr>
    <tr>
      <td><strong>Telnet</strong></td>
      <td>23</td>
      <td>Telnet protocol for unencrypted remote login (not recommended).</td>
    </tr>
    <tr>
      <td><strong>SMTP</strong></td>
      <td>25</td>
      <td>Simple Mail Transfer Protocol for sending emails.</td>
    </tr>
    <tr>
      <td><strong>SMTPS</strong></td>
      <td>465</td>
      <td>Secure SMTP over SSL.</td>
    </tr>
    <tr>
      <td><strong>IMAP</strong></td>
      <td>143</td>
      <td>Internet Message Access Protocol for retrieving emails.</td>
    </tr>
    <tr>
      <td><strong>IMAPS</strong></td>
      <td>993</td>
      <td>Secure IMAP over SSL.</td>
    </tr>
    <tr>
      <td><strong>POP3</strong></td>
      <td>110</td>
      <td>Post Office Protocol version 3 for retrieving emails.</td>
    </tr>
    <tr>
      <td><strong>POP3S</strong></td>
      <td>995</td>
      <td>Secure POP3 over SSL.</td>
    </tr>
    <tr>
      <td><strong>RDP</strong></td>
      <td>3389</td>
      <td>Remote Desktop Protocol for remote desktop access.</td>
    </tr>
    <tr>
      <td><strong>DNS</strong></td>
      <td>53</td>
      <td>Domain Name System for resolving domain names.</td>
    </tr>
    <tr>
      <td><strong>MySQL</strong></td>
      <td>3306</td>
      <td>MySQL database service.</td>
    </tr>
    <tr>
      <td><strong>PostgreSQL</strong></td>
      <td>5432</td>
      <td>PostgreSQL database service.</td>
    </tr>
    <tr>
      <td><strong>SQL Server</strong></td>
      <td>1433</td>
      <td>Microsoft SQL Server database service.</td>
    </tr>
    <tr>
      <td><strong>Oracle DB</strong></td>
      <td>1521</td>
      <td>Oracle database service.</td>
    </tr>
    <tr>
      <td><strong>MongoDB</strong></td>
      <td>27017</td>
      <td>MongoDB database service.</td>
    </tr>
    <tr>
      <td><strong>Redis</strong></td>
      <td>6379</td>
      <td>Redis in-memory data structure store.</td>
    </tr>
    <tr>
      <td><strong>Memcached</strong></td>
      <td>11211</td>
      <td>Memcached caching service.</td>
    </tr>
    <tr>
      <td><strong>NTP</strong></td>
      <td>123</td>
      <td>Network Time Protocol for clock synchronization.</td>
    </tr>
    <tr>
      <td><strong>LDAP</strong></td>
      <td>389</td>
      <td>Lightweight Directory Access Protocol.</td>
    </tr>
    <tr>
      <td><strong>LDAPS</strong></td>
      <td>636</td>
      <td>Secure LDAP over SSL.</td>
    </tr>
    <tr>
      <td><strong>Kerberos</strong></td>
      <td>88</td>
      <td>Kerberos authentication protocol.</td>
    </tr>
    <tr>
      <td><strong>NetBIOS</strong></td>
      <td>137, 138, 139</td>
      <td>NetBIOS over TCP/IP for network services.</td>
    </tr>
    <tr>
      <td><strong>SMB/CIFS</strong></td>
      <td>445</td>
      <td>Server Message Block/Common Internet File System for file sharing.</td>
    </tr>
    <tr>
      <td><strong>VPN (PPTP)</strong></td>
      <td>1723</td>
      <td>Point-to-Point Tunneling Protocol for VPN.</td>
    </tr>
    <tr>
      <td><strong>IKEv2</strong></td>
      <td>500</td>
      <td>Internet Key Exchange for VPN.</td>
    </tr>
    <tr>
      <td><strong>L2TP</strong></td>
      <td>1701</td>
      <td>Layer 2 Tunneling Protocol for VPN.</td>
    </tr>
    <tr>
      <td><strong>ESP</strong></td>
      <td>50</td>
      <td>Encapsulating Security Payload for VPN.</td>
    </tr>
    <tr>
      <td><strong>GRE</strong></td>
      <td>47</td>
      <td>Generic Routing Encapsulation for VPN.</td>
    </tr>
  </tbody>
</table>

<h2 id="tutorial-create-a-site-to-site-vpn-connection">Tutorial: Create a site-to-site VPN connection</h2>

<h3 id="vnet-preparation">VNet preparation</h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Address</th>
      <th>Note</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>TestRG1</td>
      <td>Resource Group</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>VNet1</td>
      <td>Virtual Network</td>
      <td>10.1.0.0/16</td>
      <td>Central Canada</td>
    </tr>
    <tr>
      <td>FrontEnd</td>
      <td>Subnet</td>
      <td>10.1.0.0/24</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606161716240.png" alt="image-20240606161716240" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606162220148.png" alt="image-20240606162220148" /></p>

<h3 id="create-a-gateway-subnet">Create a gateway subnet</h3>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606162615577.png" alt="image-20240606162615577" /></p>

<p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606162600108.png" alt="image-20240606162600108" /></p>

<h3 id="create-a-vpn-gateway">Create a VPN gateway</h3>

<ol>
  <li>
    <p>In search bar, search “Virtual network gateways”</p>
  </li>
  <li>
    <p>Create a virtual network gateway with the following configs:</p>

    <p><img src="/Users/aoi/Library/Application Support/typora-user-images/image-20240606163210724.png" alt="image-20240606163210724" /></p>
  </li>
</ol>

<h2 id="vm-backup">VM backup</h2>

<p>https://learn.microsoft.com/en-us/azure/backup/backup-azure-vms-first-look-arm</p>

<h2 id="sspr">SSPR</h2>

<p>SSPR is a centralized self-service password reset portal for accounts under Azure tenants.</p>

<p>Requirements:</p>

<ul>
  <li>P1 license and up</li>
  <li>Users with admin roles have more strict reset policies.
    <ul>
      <li>a strong default <em>two-gate</em> policy is enforced.
        <ul>
          <li>requires two pieces of authentication data:
            <ul>
              <li>Email address</li>
              <li>authenticator app</li>
              <li>phone number</li>
            </ul>
          </li>
          <li>security questions are prohibited</li>
        </ul>
      </li>
      <li>cmdlet <code class="language-plaintext highlighter-rouge">Update-MgPolicyAuthorizationPolicy</code> can be used to enable/disable SSPR for admin users with parameter <code class="language-plaintext highlighter-rouge">-AllowedToUseSspr</code></li>
    </ul>
  </li>
</ul>

<h2 id="dns-verification-process">DNS verification process</h2>

<p>The purpose of DNS verification using a TXT or MX record (containing a random token) is to confirm that the entity requesting the service owns the target domain. After verification, Azure provides the detailed configuration information to the verified domain owner.</p>

<p>To use custom domains, first we need to register this domain at a registrar, then, configure the name server to one of the Azure NSs. Then, we can use Azure to manage the domain (including connecting to vnets and more).</p>

<h3 id="dns-resolution-process">DNS Resolution Process</h3>

<ol>
  <li><strong>Local DNS Resolver</strong>:
    <ul>
      <li>When a user enters a domain name (e.g., <code class="language-plaintext highlighter-rouge">example.com</code>) in their browser, the request first goes to the user’s local DNS resolver, which is usually managed by their ISP or configured on their network.</li>
    </ul>
  </li>
  <li><strong>Check Local Cache</strong>:
    <ul>
      <li>The local DNS resolver checks its cache to see if it already has a recent response for the domain name. If it does, it returns the cached result, skipping further steps.</li>
    </ul>
  </li>
  <li><strong>Query the Root DNS Servers</strong>:
    <ul>
      <li>If the local DNS resolver does not have the cached result, it queries one of the root DNS servers. The root DNS servers know the authoritative servers for all top-level domains (TLDs, like <code class="language-plaintext highlighter-rouge">.com</code>, <code class="language-plaintext highlighter-rouge">.net</code>, etc.).</li>
    </ul>
  </li>
  <li><strong>TLD DNS Servers</strong>:
    <ul>
      <li>The root DNS server responds with the address of the TLD DNS server responsible for <code class="language-plaintext highlighter-rouge">.com</code> domains.</li>
      <li>The local DNS resolver then queries the TLD DNS server for <code class="language-plaintext highlighter-rouge">example.com</code>.</li>
    </ul>
  </li>
  <li><strong>Authoritative DNS Servers (Azure DNS)</strong>:
    <ul>
      <li>The TLD DNS server responds with the address of the authoritative DNS servers for <code class="language-plaintext highlighter-rouge">example.com</code>, which are the Azure DNS servers you configured.</li>
      <li>The local DNS resolver queries one of the Azure DNS servers for <code class="language-plaintext highlighter-rouge">example.com</code>.</li>
    </ul>
  </li>
  <li><strong>Retrieve DNS Records</strong>:
    <ul>
      <li>The Azure DNS server responds with the DNS records for <code class="language-plaintext highlighter-rouge">example.com</code> (e.g., the IP address associated with the domain).</li>
    </ul>
  </li>
  <li><strong>Return Response to Client</strong>:
    <ul>
      <li>The local DNS resolver caches the response and returns the result to the user’s machine.</li>
      <li>The browser can now connect to the IP address returned and load the website.</li>
    </ul>
  </li>
</ol>

<h3 id="example-walkthrough">Example Walkthrough</h3>

<ol>
  <li><strong>User Input</strong>:
    <ul>
      <li>User enters <code class="language-plaintext highlighter-rouge">www.example.com</code> in their browser.</li>
    </ul>
  </li>
  <li><strong>Local DNS Cache</strong>:
    <ul>
      <li>The local DNS resolver checks if <code class="language-plaintext highlighter-rouge">www.example.com</code> is in its cache.</li>
    </ul>
  </li>
  <li><strong>Root Server Query</strong>:
    <ul>
      <li>If not in cache, the local DNS resolver queries a root DNS server.</li>
    </ul>
  </li>
  <li><strong>TLD Server Query</strong>:
    <ul>
      <li>Root DNS server responds with the TLD DNS server for <code class="language-plaintext highlighter-rouge">.com</code>.</li>
    </ul>
  </li>
  <li><strong>Authoritative DNS Server Query</strong>:
    <ul>
      <li>The local DNS resolver queries the TLD DNS server for <code class="language-plaintext highlighter-rouge">example.com</code>.</li>
      <li>TLD DNS server responds with the Azure DNS servers.</li>
    </ul>
  </li>
  <li><strong>Azure DNS Response</strong>:
    <ul>
      <li>The local DNS resolver queries the Azure DNS server for <code class="language-plaintext highlighter-rouge">www.example.com</code>.</li>
      <li>Azure DNS server responds with the IP address (e.g., <code class="language-plaintext highlighter-rouge">192.0.2.1</code>).</li>
    </ul>
  </li>
  <li><strong>Browser Connects</strong>:
    <ul>
      <li>The local DNS resolver caches the response and returns the IP address to the browser.</li>
      <li>The browser connects to <code class="language-plaintext highlighter-rouge">192.0.2.1</code> and loads the website.</li>
    </ul>
  </li>
</ol>

<h2 id="storage-replication-strategies">Storage replication strategies</h2>

<p>LRS</p>

<p>ZRS</p>

<p>GRS</p>

<p>GZRS</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Node in data center unavailable</th>
      <th style="text-align: left">Entire data center unavailable</th>
      <th style="text-align: left">Region-wide outage</th>
      <th style="text-align: left">Read access during region-wide outage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">- <strong>LRS</strong> - <strong>ZRS</strong> - <strong>GRS</strong> - <strong>RA-GRS</strong> - <strong>GZRS</strong> - <strong>RA-GZRS</strong></td>
      <td style="text-align: left">- <strong>ZRS</strong> - <strong>GRS</strong> - <strong>RA-GRS</strong> - <strong>GZRS</strong> - <strong>RA-GZRS</strong></td>
      <td style="text-align: left">- <strong>GRS</strong> - <strong>RA-GRS</strong> - <strong>GZRS</strong> - <strong>RA-GZRS</strong></td>
      <td style="text-align: left">- <strong>RA-GRS</strong> - <strong>RA-GZRS</strong></td>
    </tr>
  </tbody>
</table>

<h2 id="sas-features">SAS features</h2>

<ul>
  <li>Signing method</li>
  <li>Signing key
    <ul>
      <li>MS-managed keys</li>
      <li>customer-managed keys</li>
    </ul>
  </li>
  <li>Permissions</li>
  <li>Start and Expiry date/time</li>
  <li>Allowed IP</li>
  <li>Allowed protocols</li>
</ul>

<h3 id="uri-definitions">URI definitions</h3>

<ul>
  <li>Resource URI</li>
  <li><code class="language-plaintext highlighter-rouge">sv</code> - storage version</li>
  <li><code class="language-plaintext highlighter-rouge">ss</code> - storage service</li>
  <li><code class="language-plaintext highlighter-rouge">st</code> - start time</li>
  <li><code class="language-plaintext highlighter-rouge">se</code> - expiry time</li>
  <li><code class="language-plaintext highlighter-rouge">sr</code> - resource</li>
  <li><code class="language-plaintext highlighter-rouge">sp</code> - permissions</li>
  <li><code class="language-plaintext highlighter-rouge">sip</code> - ip range</li>
  <li><code class="language-plaintext highlighter-rouge">spr</code> - protocol</li>
  <li><code class="language-plaintext highlighter-rouge">sig</code> - signature</li>
</ul>

<h2 id="summary-of-supported-authentication-methods-in-azcopy">Summary of supported authentication methods in <code class="language-plaintext highlighter-rouge">azcopy</code></h2>

<table>
  <thead>
    <tr>
      <th>Service</th>
      <th>Supported Authentication Methods</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Azure Blob Storage</strong></td>
      <td>SAS, OAuth</td>
    </tr>
    <tr>
      <td><strong>Azure Files</strong></td>
      <td>Share/Directory SAS</td>
    </tr>
    <tr>
      <td><strong>Azure Data Lake Storage Gen2</strong></td>
      <td>SAS, OAuth, Shared Key</td>
    </tr>
    <tr>
      <td><strong>AWS S3 to Azure Blob</strong></td>
      <td>Access Key (AWS) to SAS, OAuth (Azure Blob)</td>
    </tr>
    <tr>
      <td><strong>Google Cloud Storage to Azure Blob</strong></td>
      <td>Service Account Key (GCS) to SAS, OAuth (Azure Blob)</td>
    </tr>
  </tbody>
</table>

<h2 id="azure-backup-services">Azure backup services</h2>

<h3 id="access-tiers">Access tiers</h3>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Snapshot Tier</th>
      <th>Vault-Standard Tier</th>
      <th>Archive Tier</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Storage Location</strong></td>
      <td>Customer’s subscription</td>
      <td>Microsoft-managed tenant</td>
      <td>Long-term, low-cost storage</td>
    </tr>
    <tr>
      <td><strong>Restoration Speed</strong></td>
      <td>Fastest</td>
      <td>Moderate</td>
      <td>Slowest</td>
    </tr>
    <tr>
      <td><strong>Availability</strong></td>
      <td>Locally available</td>
      <td>Isolated copy</td>
      <td>For compliance, rarely accessed</td>
    </tr>
    <tr>
      <td><strong>Use Cases</strong></td>
      <td>Quick restores</td>
      <td>Regular backup and restore operations</td>
      <td>Long-term retention for compliance</td>
    </tr>
    <tr>
      <td><strong>RTO</strong></td>
      <td>Low</td>
      <td>Moderate</td>
      <td>High</td>
    </tr>
    <tr>
      <td><strong>Pricing</strong></td>
      <td>Higher storage cost</td>
      <td>Moderate cost</td>
      <td>Lowest cost</td>
    </tr>
  </tbody>
</table>

<h3 id="built-in-security-measures">Built-in security measures</h3>

<ul>
  <li>RBAC</li>
  <li>Encryption</li>
  <li>Soft-delete</li>
</ul>

<h3 id="vm-protections">VM Protections</h3>

<ul>
  <li>
    <p>Azure Backup</p>

    <p>Snapshot of the entire vm. Restore the entire</p>
  </li>
  <li>
    <p>Azure Site Recovery</p>
  </li>
  <li>
    <p>Azure managed disks</p>

    <ul>
      <li>snapshot</li>
      <li>image</li>
    </ul>
  </li>
</ul>

<p>images - the whole vm</p>

<p>snapshots - one disk</p>

<p>operating disk backups - for vm with only one disk</p>

<h3 id="soft-delete">Soft delete</h3>

<p>Steps:</p>

<ul>
  <li>Stop backup job</li>
  <li>Apply soft-delete state</li>
  <li>View soft-delete data in the vault - during the 14 day retention period.</li>
  <li>Undelete backup items</li>
  <li>Restore items</li>
  <li>Resume backups</li>
</ul>

<h2 id="entra-id">Entra ID</h2>

<p>Your company makes use of Multi-Factor Authentication for when users are not in the office. The</p>

<p>Per Authentication option has been configured as the usage model.</p>

<p>After the acquisition of a smaller business and the addition of the new staff to Azure Active</p>

<p>Directory (Azure AD) obtains a different company and adding the new employees to Azure Active</p>

<p>Directory (Azure AD), you are informed that these employees should also make use of Multi-</p>

<p>Factor Authentication.</p>

<p>To achieve this, the Per Enabled User setting must be set for the usage model.</p>

<p>Solution: You reconfigure the existing usage model via the Azure portal.</p>

<p>Does the solution meet the goal?</p>

<p>Your company has an Azure Active Directory (Azure AD) tenant named weyland.com that is</p>

<p>configured for hybrid coexistence with the on-premises Active Directory domain.</p>

<p>You have a server named DirSync1 that is configured as a DirSync server.</p>

<p>You create a new user account in the on-premise Active Directory. You now need to replicate the</p>

<p>user information to Azure AD immediately.</p>

<p>Solution: You run the Start-ADSyncSyncCycle -PolicyType Initial PowerShell cmdlet.</p>

<dl>
  <dt>Does the solution meet the goal?</dt>
  <dd>
    <p><code class="language-plaintext highlighter-rouge">Start-ADSyncSyncCycle -PolicyType Delta</code></p>
  </dd>
</dl>

<h2 id="move-an-app-to-a-different-region">Move an app to a different region</h2>

<p>The region in which your app runs is the region of the App Service plan it’s in. However, you cannot change an App Service plan’s region. If you want to run your app in a different region, one alternative is app cloning. Cloning makes a copy of your app in a new or existing App Service plan in any region.</p>

<p>You can find <strong>Clone App</strong> in the <strong>Development Tools</strong> section of the menu.</p>

<p><strong>Steps:</strong></p>

<ol>
  <li><a href="https://learn.microsoft.com/en-us/azure/app-service/manage-backup">Create a back up of the source app</a>.</li>
  <li><a href="https://learn.microsoft.com/en-us/azure/app-service/app-service-plan-manage#create-an-app-service-plan">Create an app in a new App Service plan, in the target region</a>.</li>
  <li><a href="https://learn.microsoft.com/en-us/azure/app-service/manage-backup">Restore the back up in the target app</a></li>
  <li>If you use a custom domain, <a href="https://learn.microsoft.com/en-us/azure/app-service/manage-custom-dns-migrate-domain#2-create-the-dns-records">bind it preemptively to the target app</a> with <code class="language-plaintext highlighter-rouge">asuid.</code> and <a href="https://learn.microsoft.com/en-us/azure/app-service/manage-custom-dns-migrate-domain#3-enable-the-domain-for-your-app">enable the domain in the target app</a>.</li>
  <li>Configure everything else in your target app to be the same as the source app and verify your configuration.</li>
  <li>When you’re ready for the custom domain to point to the target app, <a href="https://learn.microsoft.com/en-us/azure/app-service/manage-custom-dns-migrate-domain#4-remap-the-active-dns-name">remap the domain name</a>.</li>
</ol>

<h2 id="load-balancer-skus">Load Balancer SKUs</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: left">Standard Load Balancer</th>
      <th>Basic Load Balancer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Scenario</td>
      <td style="text-align: left">Equipped for load-balancing network layer traffic when high performance and ultra-low latency is needed. Routes traffic within and across regions, and to availability zones for high resiliency.</td>
      <td>Equipped for small-scale applications that don’t need high availability or redundancy. Not compatible with availability zones.</td>
    </tr>
    <tr>
      <td style="text-align: left">Backend type</td>
      <td style="text-align: left">IP based, NIC based</td>
      <td>NIC based</td>
    </tr>
    <tr>
      <td style="text-align: left">Protocol</td>
      <td style="text-align: left">TCP, UDP</td>
      <td>TCP, UDP</td>
    </tr>
    <tr>
      <td style="text-align: left">Backend pool endpoints</td>
      <td style="text-align: left">Any virtual machines or virtual machine scale sets in a single virtual network</td>
      <td>Virtual machines in a single availability set or virtual machine scale set</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-custom-probe-overview#probe-protocol">Health probes</a></td>
      <td style="text-align: left">TCP, HTTP, HTTPS</td>
      <td>TCP, HTTP</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-custom-probe-overview#probe-down-behavior">Health probe down behavior</a></td>
      <td style="text-align: left">TCP connections stay alive on an instance probe down <strong>and</strong> on all probes down.</td>
      <td>TCP connections stay alive on an instance probe down. All TCP connections end when all probes are down.</td>
    </tr>
    <tr>
      <td style="text-align: left">Availability Zones</td>
      <td style="text-align: left">Zone-redundant, zonal, or non-zonal frontend IP configurations can be used for inbound and outbound traffic</td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left">Type</td>
      <td style="text-align: left">Internal, Public</td>
      <td>Internal, Public</td>
    </tr>
    <tr>
      <td style="text-align: left">Frontend IP configuration</td>
      <td style="text-align: left">When using a Public Standard Load Balancer, the SKU of the public IP must be Standard. Basic Public IPs are not supported on Standard LB</td>
      <td>When using a Public Basic Load Balancer, the SKU of the public IP must be Basic. Standard Public IPs are not supported on Basic LB</td>
    </tr>
    <tr>
      <td style="text-align: left">Diagnostics</td>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-standard-diagnostics">Azure Monitor multi-dimensional metrics</a></td>
      <td>Not supported</td>
    </tr>
    <tr>
      <td style="text-align: left">HA Ports</td>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-ha-ports-overview">Available for Internal Load Balancer</a></td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left">Secure by default</td>
      <td style="text-align: left">Closed to inbound flows unless allowed by a network security group. Internal traffic from the virtual network to the internal load balancer is allowed.</td>
      <td>Open by default. Network security group optional.</td>
    </tr>
    <tr>
      <td style="text-align: left">Outbound Rules</td>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-outbound-connections#outboundrules">Declarative outbound NAT configuration</a></td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left">TCP Reset on Idle</td>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-tcp-reset">Available on any rule</a></td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-multivip-overview">Multiple front ends</a></td>
      <td style="text-align: left">Inbound and <a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-outbound-connections">outbound</a></td>
      <td>Inbound only</td>
    </tr>
    <tr>
      <td style="text-align: left">Management Operations</td>
      <td style="text-align: left">Most operations &lt; 30 seconds</td>
      <td>60-90+ seconds typical</td>
    </tr>
    <tr>
      <td style="text-align: left">SLA</td>
      <td style="text-align: left"><a href="https://azure.microsoft.com/support/legal/sla/load-balancer/v1_0/">99.99%</a></td>
      <td>Not available</td>
    </tr>
    <tr>
      <td style="text-align: left">Global VNet Peering Support</td>
      <td style="text-align: left">Standard Internal Load Balancer is supported via Global VNet Peering</td>
      <td>Not supported</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/virtual-network/nat-gateway/nat-overview">NAT Gateway Support</a></td>
      <td style="text-align: left">Both Standard Internal Load Balancer and Standard Public Load Balancer are supported via Nat Gateway</td>
      <td>Not supported</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/private-link/private-link-overview">Private Link Support</a></td>
      <td style="text-align: left">Standard Internal Load Balancer is supported via Private Link</td>
      <td>Not supported</td>
    </tr>
    <tr>
      <td style="text-align: left"><a href="https://learn.microsoft.com/en-us/azure/load-balancer/cross-region-overview">Global tier</a></td>
      <td style="text-align: left">Standard Load Balancer supports the Global tier for Public Load Balancers enabling cross-region load balancing</td>
      <td>Not supported</td>
    </tr>
  </tbody>
</table>

<h2 id="azure-governance-tools">Azure governance tools</h2>

<h3 id="a-azure-traffic-analytics">A. Azure Traffic Analytics</h3>

<p>Azure Traffic Analytics is a cloud-based solution that provides visibility into user and application traffic on your Azure virtual network. It leverages Network Security Group (NSG) flow logs to give you insights into traffic patterns and identify potential security threats.</p>

<p><strong>Key Features:</strong></p>

<ul>
  <li><strong>Network Traffic Visibility</strong>: Provides a comprehensive view of the traffic flow in your Azure network.</li>
  <li><strong>Threat Detection</strong>: Helps identify potential security threats and anomalies in network traffic.</li>
  <li><strong>Performance Monitoring</strong>: Monitors network performance and identifies bottlenecks.</li>
  <li><strong>Compliance Reporting</strong>: Assists in compliance reporting by providing detailed traffic logs and analytics.</li>
  <li><strong>Integration</strong>: Integrates with other Azure security services like Azure Security Center.</li>
</ul>

<h3 id="b-azure-monitor">B. Azure Monitor</h3>

<p>Azure Monitor is a full-stack monitoring service that provides a comprehensive solution for collecting, analyzing, and acting on telemetry from your cloud and on-premises environments. It helps you maximize the availability and performance of your applications and services.</p>

<p><strong>Key Features:</strong></p>

<ul>
  <li><strong>Data Collection</strong>: Collects data from various sources, including applications, guest operating systems, Azure resources, and custom sources.</li>
  <li><strong>Metrics and Logs</strong>: Provides powerful metrics and log analytics capabilities.</li>
  <li><strong>Dashboards</strong>: Customizable dashboards to visualize monitoring data.</li>
  <li><strong>Alerts</strong>: Configurable alerts based on specific criteria to notify you of performance issues.</li>
  <li><strong>Insights</strong>: Application Insights for monitoring application performance and dependencies.</li>
  <li><strong>Diagnostics</strong>: Detailed diagnostics to troubleshoot issues.</li>
</ul>

<h3 id="c-azure-activity-log">C. Azure Activity Log</h3>

<p>Azure Activity Log provides a record of all the activities that happen in your Azure subscription. It helps you understand the operations that were performed on resources in your subscription and provides insights into the “what, who, and when” for any write operations (PUT, POST, DELETE) taken on the resources.</p>

<p><strong>Key Features:</strong></p>

<ul>
  <li><strong>Operation Logs</strong>: Logs of all create, update, and delete operations performed on Azure resources.</li>
  <li><strong>User and System Actions</strong>: Tracks actions performed by users and systems.</li>
  <li><strong>Event Insights</strong>: Provides insights into the events that have occurred within your Azure resources.</li>
  <li><strong>Audit and Compliance</strong>: Useful for auditing and compliance purposes by providing detailed logs of resource changes.</li>
  <li><strong>Integration</strong>: Can be integrated with Azure Monitor and other services for deeper analytics and alerts.</li>
</ul>

<h3 id="d-azure-advisor">D. Azure Advisor</h3>

<p>Azure Advisor is a personalized cloud consultant that helps you follow best practices to optimize your Azure deployments. It analyzes your resource configuration and usage telemetry and offers recommendations to help you improve the cost-effectiveness, performance, reliability, and security of your resources.</p>

<p><strong>Key Features:</strong></p>

<ul>
  <li><strong>Cost Recommendations</strong>: Provides suggestions to reduce your overall Azure spending.</li>
  <li><strong>Performance Recommendations</strong>: Offers advice to improve the performance of your applications.</li>
  <li><strong>Security Recommendations</strong>: Identifies potential security vulnerabilities and provides recommendations to mitigate them.</li>
  <li><strong>Reliability Recommendations</strong>: Helps improve the reliability of your applications with best practices.</li>
  <li><strong>Actionable Insights</strong>: Provides actionable insights and recommendations that you can implement directly from the Advisor portal.</li>
  <li><strong>Integration</strong>: Integrates with other Azure services to provide a holistic view of your resource optimization.</li>
</ul>

<p>These tools collectively help you manage, monitor, and optimize your Azure environment effectively.</p>

        </div>
        
        <div class="col-12 col-md-4">
            
            <h2>Table of Content</h2>
            
            <ul id="toc" class="toc-list">
<li class="toc-item toc-h2"><a href="#availability-set">Availability set</a>
<ul class="toc-sublist">
<li class="toc-item toc-h3"><a href="#fault-domain">Fault Domain</a></li>
<li class="toc-item toc-h3"><a href="#update-domain">Update Domain</a></li>
<li class="toc-item toc-h3"><a href="#key-differences">Key Differences</a></li>
</ul>
</li>
<li class="toc-item toc-h2"><a href="#management-group">Management group</a></li>
<li class="toc-item toc-h2"><a href="#sas">SAS</a>
<ul class="toc-sublist">
<li class="toc-item toc-h3"><a href="#services-supported-by-sas-keys">Services Supported by SAS Keys</a></li>
<li class="toc-item toc-h3"><a href="#types-of-sas-tokens">Types of SAS Tokens</a></li>
<li class="toc-item toc-h3"><a href="#permissions-in-sas-tokens">Permissions in SAS Tokens</a></li>
<li class="toc-item toc-h3"><a href="#example-use-cases">Example Use Cases</a></li>
<li class="toc-item toc-h3"><a href="#using-an-azure-file-share-with-windows">Using an Azure file share with Windows</a></li>
<li class="toc-item toc-h3"><a href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toc-item toc-h2"><a href="#authorization-methods-for-azcopy">Authorization methods for AzCopy</a></li>
<li class="toc-item toc-h2"><a href="#vm-scale-set">VM scale set</a></li>
<li class="toc-item toc-h2"><a href="#os-image-upgrade-versus-reimage">OS image upgrade versus reimage</a></li>
<li class="toc-item toc-h2"><a href="#general-roles">General roles</a></li>
<li class="toc-item toc-h2"><a href="#vm-size-naming-convention">VM size naming convention</a></li>
<li class="toc-item toc-h2"><a href="#vpn-gateways">VPN gateways</a></li>
<li class="toc-item toc-h2"><a href="#vm-scale-set-az-vmss">VM scale set az vmss</a></li>
<li class="toc-item toc-h2"><a href="#port-numbers-for-common-protocols">Port numbers for common protocols</a></li>
<li class="toc-item toc-h2"><a href="#tutorial-create-a-site-to-site-vpn-connection">Tutorial: Create a site-to-site VPN connection</a>
<ul class="toc-sublist">
<li class="toc-item toc-h3"><a href="#vnet-preparation">VNet preparation</a></li>
<li class="toc-item toc-h3"><a href="#create-a-gateway-subnet">Create a gateway subnet</a></li>
<li class="toc-item toc-h3"><a href="#create-a-vpn-gateway">Create a VPN gateway</a></li>
</ul>
</li>
<li class="toc-item toc-h2"><a href="#vm-backup">VM backup</a></li>
<li class="toc-item toc-h2"><a href="#sspr">SSPR</a></li>
<li class="toc-item toc-h2"><a href="#dns-verification-process">DNS verification process</a>
<ul class="toc-sublist">
<li class="toc-item toc-h3"><a href="#dns-resolution-process">DNS Resolution Process</a></li>
<li class="toc-item toc-h3"><a href="#example-walkthrough">Example Walkthrough</a></li>
</ul>
</li>
<li class="toc-item toc-h2"><a href="#storage-replication-strategies">Storage replication strategies</a></li>
<li class="toc-item toc-h2"><a href="#sas-features">SAS features</a>
<ul class="toc-sublist">
<li class="toc-item toc-h3"><a href="#uri-definitions">URI definitions</a></li>
</ul>
</li>
<li class="toc-item toc-h2"><a href="#summary-of-supported-authentication-methods-in-azcopy">Summary of supported authentication methods in azcopy</a></li>
<li class="toc-item toc-h2"><a href="#azure-backup-services">Azure backup services</a>
<ul class="toc-sublist">
<li class="toc-item toc-h3"><a href="#access-tiers">Access tiers</a></li>
<li class="toc-item toc-h3"><a href="#built-in-security-measures">Built-in security measures</a></li>
<li class="toc-item toc-h3"><a href="#vm-protections">VM Protections</a></li>
<li class="toc-item toc-h3"><a href="#soft-delete">Soft delete</a></li>
</ul>
</li>
<li class="toc-item toc-h2"><a href="#entra-id">Entra ID</a></li>
<li class="toc-item toc-h2"><a href="#move-an-app-to-a-different-region">Move an app to a different region</a></li>
<li class="toc-item toc-h2"><a href="#load-balancer-skus">Load Balancer SKUs</a></li>
<li class="toc-item toc-h2"><a href="#azure-governance-tools">Azure governance tools</a>
<ul class="toc-sublist">
<li class="toc-item toc-h3"><a href="#a-azure-traffic-analytics">A. Azure Traffic Analytics</a></li>
<li class="toc-item toc-h3"><a href="#b-azure-monitor">B. Azure Monitor</a></li>
<li class="toc-item toc-h3"><a href="#c-azure-activity-log">C. Azure Activity Log</a></li>
<li class="toc-item toc-h3"><a href="#d-azure-advisor">D. Azure Advisor</a></li>
</ul>
</li>
</ul>
            <div class="card my-card">
  <div class="card-header my-card-header">
    <h4 class="mb-0 display-text">Recent posts</h2>
  </div>
  <ul class="list-group list-group-flush">
    
    <a class="list-group-item my-list-group-item" href="/2024/07/27/canada-pr-application.html">
      <div class="row">
        <div class="col">
          <strong>Canada PR application (after provincial nomination)</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          July 27, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/07/22/angular-notes.html">
      <div class="row">
        <div class="col">
          <strong>Angular Notes</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          July 22, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/07/16/configure-a-ts-project.html">
      <div class="row">
        <div class="col">
          <strong>Configure a TypeScript project with CI/CD</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          July 16, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/07/09/leetcode-notes.html">
      <div class="row">
        <div class="col">
          <strong>Leetcode Notes</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          July 09, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/07/09/azure-500-notes.html">
      <div class="row">
        <div class="col">
          <strong>AZ-500 notes</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          July 09, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/07/06/az104-exam.html">
      <div class="row">
        <div class="col">
          <strong>Passed AZ-104 (Azure Administrator Associate) Today</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          July 06, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/06/02/azure-notes.html">
      <div class="row">
        <div class="col">
          <strong>Azure Notes</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          June 02, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/05/30/azure-storage.html">
      <div class="row">
        <div class="col">
          <strong>Azure Storage</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          May 30, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/05/27/Azure-SAS.html">
      <div class="row">
        <div class="col">
          <strong>Azure Sas</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          May 27, 2024
        </div>
        <div class="col-auto">
          
        </div>
      </div>
    </a>
    
    <a class="list-group-item my-list-group-item" href="/2024/05/22/css-flex-layout.html">
      <div class="row">
        <div class="col">
          <strong>CSS: layout of the header</strong>
        </div>
      </div>
      <div class="row">
        <div class="col">
          May 22, 2024
        </div>
        <div class="col-auto">
          
          <div class="badge badge-info">web</div>
          
          <div class="badge badge-info">css</div>
          
        </div>
      </div>
    </a>
    
  </ul>
</div> 
        </div>
    </div>
</main>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
</script>

</html>